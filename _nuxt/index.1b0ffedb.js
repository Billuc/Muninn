import{g as y,x as H,o as u,c as f,a as g,t as x,h as c,b as v,y as ne,z as B,A as ae,q as L,r as Y,B as $,w as h,d as M,s as S,v as k,C as se,D as G,E as w,G as le,H as J,I as oe,J as re,F as ie,S as ce,K as de,u as ue}from"./entry.9eb24a14.js";import{P as ve}from"./PageHeading.3a6f42e7.js";import{r as D,t as b,a as P,g as U,f as C,b as pe,p as Q,i as me}from"./isNaN.8d5077d2.js";import{d as fe,_ as X}from"./Input.vue.e21bd4c4.js";import{_ as Z,a as ee}from"./TextInput.vue.9b322cfb.js";function j(n,e){D(2,arguments);var t=b(n),a=P(e);if(isNaN(a))return new Date(NaN);if(!a)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+a+1,0);var l=s.getDate();return r>=l?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function R(n,e){var t,a,r,s,l,i,o,d;D(1,arguments);var p=U(),_=P((t=(a=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(l=e.locale)===null||l===void 0||(i=l.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&r!==void 0?r:p.weekStartsOn)!==null&&a!==void 0?a:(o=p.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=b(n),E=m.getDay(),I=(E<_?7:0)+E-_;return m.setDate(m.getDate()-I),m.setHours(0,0,0,0),m}function A(n){D(1,arguments);var e=b(n);return e.setHours(0,0,0,0),e}function _e(n,e){D(2,arguments);var t=A(n),a=A(e);return t.getTime()===a.getTime()}function he(n){D(1,arguments);var e=b(n);return e.setHours(23,59,59,999),e}function F(n,e){var t;D(1,arguments);var a=n||{},r=b(a.start),s=b(a.end),l=s.getTime();if(!(r.getTime()<=l))throw new RangeError("Invalid interval");var i=[],o=r;o.setHours(0,0,0,0);var d=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=l;)i.push(b(o)),o.setDate(o.getDate()+d),o.setHours(0,0,0,0);return i}function ge(n){D(1,arguments);var e=b(n);return e.setDate(1),e.setHours(0,0,0,0),e}function be(n){D(1,arguments);var e=b(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function ye(n,e){D(2,arguments);var t=b(n),a=b(e);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function we(n,e){var t,a,r,s,l,i,o,d;D(1,arguments);var p=U(),_=P((t=(a=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(l=e.locale)===null||l===void 0||(i=l.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&r!==void 0?r:p.weekStartsOn)!==null&&a!==void 0?a:(o=p.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var m=b(n),E=m.getDay(),I=(E<_?-7:0)+6-(E-_);return m.setHours(0,0,0,0),m.setDate(m.getDate()+I),m}const De={class:"px-4 flex items-center justify-between"},Ee={tabindex:"0",class:"text-base font-bold"},Oe={class:"flex items-center gap-x-2"},xe=y({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth"],setup(n,{emit:e}){const t=n,a=H(()=>C(t.date,"MMMM yyyy")),r=()=>e("nextMonth"),s=()=>e("previousMonth");return(l,i)=>(u(),f("div",De,[g("span",Ee,x(c(a)),1),g("div",Oe,[v(B,{icon:c(ne),onClick:s,class:"btn-circle btn-xs btn-accent"},null,8,["icon"]),v(B,{icon:c(ae),onClick:r,class:"btn-circle btn-xs btn-accent"},null,8,["icon"])])]))}}),Ce={class:"text-base font-medium text-center"},$e=y({__name:"CalendarMonthView",props:{date:{}},emits:["selectDate"],setup(n,{emit:e}){const t=n,a=F({start:R(t.date,{weekStartsOn:1}),end:pe(R(t.date,{weekStartsOn:1}),6)}).map(l=>C(l,"EEE")),r=H(()=>F({start:R(ge(t.date),{weekStartsOn:1}),end:we(be(t.date),{weekStartsOn:1})})),s=l=>e("selectDate",l);return(l,i)=>(u(),f("div",{class:S(("mergeClasses"in l?l.mergeClasses:c(k))("grid","grid-cols-7","gap-y-1"))},[(u(!0),f(L,null,Y(c(a),o=>(u(),f("div",Ce,x(o),1))),256)),(u(!0),f(L,null,Y(c(r),o=>(u(),$(B,{onClick:()=>s(o),class:S(("mergeClasses"in l?l.mergeClasses:c(k))("btn-circle",c(ye)(o,t.date)?void 0:"opacity-50",c(_e)(o,t.date)?"bg-base-300":"btn-ghost"))},{default:h(()=>[M(x(o.getDate()),1)]),_:2},1032,["onClick","class"]))),256))],2))}}),N=n=>C(n,"yyyy-MM-dd HH:mm"),T=n=>Q(n,"yyyy-MM-dd HH:mm",new Date),W=fe("events",{state:()=>({events:new Map,nextEventId:0}),actions:{getEventsOfDay(n){return[...this.events.values()].filter(e=>A(T(e.start))<=n&&he(T(e.end??e.start))>=n).map(e=>({id:e.id,description:e.description,frequency:e.frequency,start:T(e.start),title:e.title,end:e.end?T(e.end):void 0}))},newEvent(n){const e={id:this.nextEventId,title:n.title,description:n.description,frequency:n.frequency,start:N(n.start),end:n.end?N(n.end):void 0};this.events.set(this.nextEventId,e),this.nextEventId++},editEvent(n,e){const t=this.events.get(n);if(!t)throw new Error(`[Events] Key ${n} not found`);const a={id:n,title:e.title??t.title,description:e.description??t.description,frequency:e.frequency??t.frequency,start:e.start?N(e.start):t.start,end:e.end?N(e.end):t.end};this.events.set(n,a)},removeEvent(n){if(!this.events.delete(n))throw new Error(`[Events] Key ${n} not found`)}}}),ke={class:"border-b last-of-type:border-b-0 p-2 border-base-300 border-dashed hover:bg-accent-focus cursor-pointer"},Me={class:"text-xs font-light leading-3"},Se={class:"focus:outline-none text-lg font-medium leading-5"},He={key:0,class:"text-sm"},Ie=y({__name:"CalendarEvent",props:{start:{},end:{},title:{},description:{}},setup(n){const e=n,t=H(()=>{if(!e.start&&!e.end)return"Whole day";if(e.start&&!e.end)return C(e.start,"H:mm");if(e.start&&e.end)return`${C(e.start,"H:mm")} - ${C(e.end,"H:mm")}`});return(a,r)=>(u(),f("div",ke,[g("p",Me,x(c(t)),1),g("p",Se,x(e.title),1),e.description?(u(),f("p",He,x(e.description),1)):se("",!0)]))}});var z=(n=>(n[n.Once=0]="Once",n[n.Daily=1]="Daily",n[n.Weekly=2]="Weekly",n[n.Monthly=3]="Monthly",n[n.Yearly=4]="Yearly",n))(z||{});const V=y({__name:"DateTimeSelector",props:{value:{},label:{},clearable:{type:Boolean}},emits:["input"],setup(n,{emit:e}){const t=n,{value:a}=G(t),r=H(()=>a.value?C(a.value,"yyyy-MM-dd'T'HH:mm"):"");function s(i){var p;const o=(p=i.target)==null?void 0:p.value,d=Q(o,"yyyy-MM-dd'T'HH:mm",new Date);me(d.valueOf())||e("input",d)}const l=()=>e("input",null);return(i,o)=>(u(),$(X,{label:t.label,type:"datetime-local",pattern:"\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}",clearable:t.clearable,value:c(r),onChange:s,onClear:l},null,8,["label","clearable","value"]))}}),Be=y({__name:"MultilineInput",props:{label:{},value:{},placeholder:{},class:{},clearable:{type:Boolean}},emits:["input"],setup(n,{emit:e}){const t=n,{value:a}=G(t),r=w(null),s=i=>e("input",i.target.value),l=i=>e("input",null);return le([a],()=>{let o=20+(a.value.match(/\n/g)||[]).length*20;const d=r.value;d.style.height=o+"px"}),(i,o)=>(u(),$(X,{class:S(("mergeClasses"in i?i.mergeClasses:c(k))("h-fit","min-h-[3rem]",t.class)),type:"text",label:t.label,clearable:t.clearable,placeholder:t.placeholder,value:t.value,onClear:l},{input:h(d=>[g("textarea",J(d,{class:("mergeClasses"in i?i.mergeClasses:c(k))("focus:outline-none","flex-grow","leading-5","resize-none","py-1","box-content"),onInput:s,rows:"1",ref_key:"textarea",ref:r}),null,16)]),_:1},8,["class","label","clearable","placeholder","value"]))}}),Ne={class:"form-control my-4 gap-y-2"},Te={class:"flex flex-nowrap gap-2"},Le=y({__name:"EditEvent",props:{event:{}},emits:["close"],setup(n,{emit:e}){const t=n,a=W(),r=H(()=>!!t.event),s=w(""),l=w(new Date),i=w(null),o=w(""),d=O=>s.value=O,p=O=>l.value=O,_=O=>i.value=O,m=O=>o.value=O??"",E=()=>e("close"),I=()=>{t.event&&(a.editEvent(t.event.id,{title:s.value,description:"",frequency:z.Once,start:l.value,end:void 0}),E())},te=()=>{t.event&&(a.removeEvent(t.event.id),E())};return oe(()=>{t.event?(s.value=t.event.title,l.value=t.event.start,i.value=t.event.end??null,o.value=t.event.description):(s.value="",l.value=new Date,i.value=new Date,o.value="")}),(O,Fe)=>{const K=B;return u(),$(ee,{"is-opened":c(r),onClose:E},{title:h(()=>{var q;return[M("Update event '"+x((q=t.event)==null?void 0:q.title)+"'",1)]}),default:h(()=>[g("div",Ne,[v(Z,{label:"Event name",placeholder:"Enter name...",value:c(s),onInput:d},null,8,["value"]),g("div",Te,[v(V,{value:c(l),onInput:p,label:"Start of event"},null,8,["value"]),v(V,{value:c(i),onInput:_,label:"End of event",clearable:""},null,8,["value"])]),v(Be,{label:"Description (optional)",placeholder:"Enter description... (optional)",value:c(o),onInput:m,clearable:""},null,8,["value"])])]),actions:h(()=>[v(K,{class:"btn-error ml-2",onClick:te},{default:h(()=>[M("Delete")]),_:1}),v(K,{class:"btn-success ml-2",onClick:I},{default:h(()=>[M("Save")]),_:1})]),_:1},8,["is-opened"])}}}),Re={key:1,class:"text-center font-light"},Ye=y({__name:"CalendarEvents",props:{date:{}},setup(n){const e=n,t=W(),a=H(()=>re.sortBy(t.getEventsOfDay(e.date),l=>l.start)),r=w(null),s=l=>r.value=l;return(l,i)=>(u(),f("div",null,[c(a).length>0?(u(),f(L,{key:0},[(u(!0),f(L,null,Y(c(a),o=>(u(),$(Ie,J({key:"event-"+o.id},o,{onClick:d=>s(o)}),null,16,["onClick"]))),128)),v(Le,{event:c(r),onClose:i[0]||(i[0]=()=>s(null))},null,8,["event"])],64)):(u(),f("div",Re,"No event for this day..."))]))}}),Ae=["disabled"],Ve=y({__name:"FABButton",props:{disabled:{type:Boolean},loading:{type:Boolean},icon:{}},emits:["click"],setup(n,{emit:e}){const t=n;function a(){t.loading||t.disabled||e("click")}return(r,s)=>(u(),f("button",{onClick:a,class:S(("mergeClasses"in r?r.mergeClasses:c(k))("btn","btn-circle","absolute","transition-colors","duration-300")),disabled:t.disabled},[t.loading?(u(),$(ce,{key:0})):(u(),$(c(ie),{key:1,icon:t.icon},null,8,["icon"]))],10,Ae))}}),Pe={class:"form-control gap-y-2"},We=y({__name:"CreateEvent",setup(n){const e=W(),t=w(!1),a=w(""),r=w(new Date),s=()=>t.value=!0,l=()=>t.value=!1,i=p=>a.value=p,o=p=>r.value=p,d=()=>{e.newEvent({title:a.value,description:"",frequency:z.Once,start:r.value,end:void 0}),l()};return(p,_)=>{const m=B;return u(),f("div",null,[v(Ve,{icon:c(de),class:"absolute -bottom-4 right-4 shadow-md",onClick:s},null,8,["icon"]),v(ee,{"is-opened":c(t),onClose:l},{title:h(()=>[M("Create a new event")]),default:h(()=>[g("div",Pe,[v(Z,{label:"Event name",placeholder:"Enter name...",value:c(a),onInput:i},null,8,["value"]),v(V,{value:c(r),onInput:o,label:"Start of event"},null,8,["value"])])]),actions:h(()=>[v(m,{class:"btn-success",onClick:d},{default:h(()=>[M("Create")]),_:1})]),_:1},8,["is-opened"])])}}}),ze={class:"px-4 py-4 md:px-8 md:py-6"},Ke={class:"bg-accent px-6 py-4 md:px-14 md:py-6"},qe=y({__name:"Calendar",setup(n){const e=w(new Date),t=()=>e.value=j(e.value,-1),a=()=>e.value=j(e.value,1),r=s=>e.value=s;return(s,l)=>(u(),f("div",{class:S(("mergeClasses"in s?s.mergeClasses:c(k))("relative","max-w-sm","md:max-w-md"))},[g("div",{class:S(("mergeClasses"in s?s.mergeClasses:c(k))("card","bg-accent-focus","shadow-xl","overflow-hidden"))},[g("div",ze,[v(xe,{date:c(e),onPreviousMonth:t,onNextMonth:a,class:"px-4"},null,8,["date"]),v($e,{date:c(e),class:"pt-4",onSelectDate:r},null,8,["date"])]),g("div",Ke,[v(Ye,{date:c(e)},null,8,["date"])])],2),v(We)],2))}}),je=g("span",{class:"text-accent"},"Events",-1),Ze=y({__name:"index",setup(n){return ue({title:"Events"}),(e,t)=>(u(),f("div",null,[v(ve,null,{default:h(()=>[je]),_:1}),v(qe,{class:"mx-auto"})]))}});export{Ze as default};
