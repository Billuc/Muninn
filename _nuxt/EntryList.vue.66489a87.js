import{f as m}from"./index.1dfe98c4.js";import{g as _,c as l,a as E,t as w,h as p,o as c,A as g,b as y,B as x,S as b,Q as I,z as k,q as M,r as A,x as B}from"./entry.2fb70ca1.js";import{d as J}from"./PageHeading.99ada2df.js";import{_ as $}from"./MultilineField.vue.048823b1.js";const S={class:"text-primary text-xl font-bold leading-4"},N={class:"text-primary text-2xl font-extrabold"},P=_({__name:"DateDisplay",props:{date:{}},setup(t){const n=t;return(e,r)=>(c(),l("div",null,[E("h3",S,w(p(m)(n.date,"MMM d")),1),E("h2",N,w(p(m)(n.date,"EEEE")),1)]))}}),d=t=>m(t,"yyyy-MM-dd"),U=J("journal",{state:()=>({entries:new Map}),actions:{getEntries(t){return this.entries.get(d(t))},newEntry(t,n){const e=d(t);this.entries.has(e)||this.entries.set(e,[]),this.entries.get(e).push(n)},editEntry(t,n,e){const r=this.entries.get(d(t));if(!r)throw new Error(`[Journal] Key ${t} not found`);if(r[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);r.splice(n,1,e)},removeEntry(t,n){const e=this.entries.get(d(t));if(!e)throw new Error(`[Journal] Key ${t} not found`);if(e[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);e.splice(n,1)}}}),D={class:"m-0"},K=_({__name:"Entry",props:{entry:{}},emits:["update:entry"],setup(t,{emit:n}){const e=t,r=s=>n("update:entry",s.trim()),a=g.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",D,[y($,{value:e.entry,placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i},null,8,["value","onInput"])]))}}),L={class:"m-0"},W=_({__name:"AddEntry",emits:["input"],setup(t,{emit:n}){const e=x(null),r=s=>{n("input",s.trim()),b(()=>{e.value.reset()})},a=g.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",L,[y($,{value:"",placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i,ref_key:"input",ref:e},null,8,["onInput"])]))}}),j={class:"list-disc marker:text-base-300 pl-8"},Q=_({__name:"EntryList",props:{date:{}},setup(t){const n=t,{date:e}=I(n),r=U(),a=k(()=>r.getEntries(e.value));function i(o,u){u?r.editEntry(e.value,o,u):r.removeEntry(e.value,o)}function s(o){o&&r.newEntry(e.value,o)}return(o,u)=>(c(),l("ul",j,[(c(!0),l(M,null,A(p(a),(f,h)=>(c(),B(K,{entry:f,"onUpdate:entry":v=>i(h,v),key:`entry-${h}`},null,8,["entry","onUpdate:entry"]))),128)),y(W,{onInput:u[0]||(u[0]=f=>s(f))})]))}});export{P as _,Q as a};
