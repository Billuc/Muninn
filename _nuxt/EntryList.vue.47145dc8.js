import{f as h}from"./index.f3feb017.js";import{g as v,c as m,a as x,t as $,h as a,o as p,b as d,Z as b,$ as k,Y as C,M,x as E,z as A,a0 as B,Q as I,l as J,F as R,r as S,q as D}from"./entry.fba0ea98.js";import{d as F}from"./PageHeading.63e43538.js";import{_ as w}from"./MultilineField.vue.9fc529de.js";const K={class:"text-secondary text-xl font-bold leading-4"},L={class:"text-secondary text-2xl font-extrabold"},H=v({__name:"DateDisplay",props:{date:{}},setup(n){const t=n;return(e,r)=>(p(),m("div",null,[x("h3",K,$(a(h)(t.date,"MMM d")),1),x("h2",L,$(a(h)(t.date,"EEEE")),1)]))}}),y=n=>h(n,"yyyy-MM-dd"),N=F("journal",{state:()=>({entries:new Map}),actions:{getEntries(n){return this.entries.get(y(n))},newEntry(n,t){const e=y(n);this.entries.has(e)||this.entries.set(e,[]),this.entries.get(e).push(t)},editEntry(n,t,e){const r=this.entries.get(y(n));if(!r)throw new Error(`[Journal] Key ${n} not found`);if(r[t]===void 0)throw new Error(`[Journal] Index ${t} out of range for key ${n}`);r.splice(t,1,e)},removeEntry(n,t){const e=this.entries.get(y(n));if(!e)throw new Error(`[Journal] Key ${n} not found`);if(e[t]===void 0)throw new Error(`[Journal] Index ${t} out of range for key ${n}`);e.splice(t,1)}}}),T={class:"flex flex-nowrap"},U=v({__name:"EntryActions",emits:["validate","cancel","remove"],setup(n,{emit:t}){const e=()=>t("validate"),r=()=>t("cancel"),s=()=>t("remove");return(l,i)=>{const u=M;return p(),m("div",T,[d(u,{icon:a(b),class:"btn-circle !btn-xs",onClick:e},null,8,["icon"]),d(u,{icon:a(k),class:"btn-circle !btn-xs",onClick:r},null,8,["icon"]),d(u,{icon:a(C),class:"btn-circle !btn-xs",onClick:s},null,8,["icon"])])}}}),V={class:"m-0 marker:text-neutral"},W={class:"flex flex-nowrap"},j=v({__name:"Entry",props:{entry:{}},emits:["update:entry","remove"],setup(n,{emit:t}){const e=n,r=E(e.entry),s=E(!1),l=E(null),i=()=>{t("update:entry",r.value),s.value=!1,l.value.blur()},u=()=>{r.value=e.entry,s.value=!1},o=()=>{t("remove"),s.value=!1};return(f,c)=>(p(),m("li",V,[x("div",W,[d(w,{value:a(r),placeholder:"Write here...",class:"w-full",onInput:c[0]||(c[0]=_=>r.value=_),"detect-enter":"",onEnter:i,onFocus:c[1]||(c[1]=_=>s.value=!0),ref_key:"input",ref:l},null,8,["value"]),A(d(U,{onValidate:i,onCancel:u,onRemove:o},null,512),[[B,a(s)]])])]))}}),q={class:"m-0 marker:text-base-300"},z=v({__name:"AddEntry",emits:["input"],setup(n,{emit:t}){const e=E(""),r=s=>{t("input",s.trim()),e.value=""};return(s,l)=>(p(),m("li",q,[d(w,{value:a(e),placeholder:"Write here...",onInput:l[0]||(l[0]=i=>e.value=i),class:"w-full","detect-enter":"",onEnter:r},null,8,["value"])]))}}),P={class:"list-disc pl-8"},O=v({__name:"EntryList",props:{date:{}},setup(n){const t=n,{date:e}=I(t),r=N(),s=J(()=>r.getEntries(e.value));function l(o,f){f?r.editEntry(e.value,o,f):r.removeEntry(e.value,o)}function i(o){r.removeEntry(e.value,o)}function u(o){o&&r.newEntry(e.value,o)}return(o,f)=>(p(),m("ul",P,[(p(!0),m(R,null,S(a(s),(c,_)=>(p(),D(j,{entry:c,"onUpdate:entry":g=>l(_,g),onRemove:()=>i(_),key:`entry-${_}`},null,8,["entry","onUpdate:entry","onRemove"]))),128)),d(z,{onInput:f[0]||(f[0]=c=>u(c))})]))}});export{O as _,H as a};
