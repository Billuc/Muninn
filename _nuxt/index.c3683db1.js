import{g as v,o as a,c as u,b as c,w as f,d as y,t as T,s as h,h as n,v as C,e as M,B as $,F as V,C as P,a as _,P as B,Q as D,E as x,x as N,q as I,r as O,R as G,T as K,z as H,u as J}from"./entry.86fd7d37.js";import{P as j}from"./PageHeading.6605ef2f.js";import{u as R}from"./noteStore.960306e6.js";import{_ as q,a as Q}from"./TextInput.vue.ab75aafa.js";import{_ as W}from"./Input.vue.e6e4e005.js";const S=v({__name:"NotesGridElement",props:{label:{},href:{}},emits:["click"],setup(d,{emit:s}){const e=d;function o(t){e.href||(t.preventDefault(),s("click"))}return(t,g)=>{const p=M;return a(),u("li",{class:h(("mergeClasses"in t?t.mergeClasses:n(C))("btn","btn-neutral","list-none","-skew-y-3","my-0","w-full","h-full")),onClick:o},[c(p,{class:h(("mergeClasses"in t?t.mergeClasses:n(C))("w-full","h-full","flex","justify-center","items-center","m-0","no-underline","text-lg")),href:e.href},{default:f(()=>[y(T(e.label),1)]),_:1},8,["class","href"])],2)}}}),U={class:"ml-1"},X=v({__name:"Tag",props:{color:{},icon:{},text:{}},setup(d){const s=d;return(e,o)=>(a(),u("div",{class:"badge",style:D({backgroundColor:s.color})},[s.icon?(a(),$(n(V),{key:0,icon:s.icon,size:"xs"},null,8,["icon"])):P("",!0),_("span",U,T(s.text),1),B(e.$slots,"default")],4))}}),Y=["onClick"],Z={key:1},E=v({__name:"Autocomplete",props:{label:{},inputClass:{},placeholder:{},options:{},textKey:{},valueKey:{}},emits:["input","newOption"],setup(d,{emit:s}){const e=d,o=x(""),t=N(()=>e.options.filter(r=>(r[e.textKey??"text"]??"").toLowerCase().startsWith(o.value.toLowerCase()))),g=r=>o.value=r.target.value,p=r=>s("input",r[e.valueKey??"value"]),l=()=>s("newOption",o.value);return(r,m)=>(a(),u("div",{class:h(("mergeClasses"in r?r.mergeClasses:n(C))("w-full","dropdown"))},[c(W,{label:e.label,type:"text",placeholder:e.placeholder,onInput:g,value:n(o)},null,8,["label","placeholder","value"]),_("ul",{class:h(("mergeClasses"in r?r.mergeClasses:n(C))("dropdown-content","menu","border","z-10","p-2","shadow","bg-base-100","rounded-box","w-56","max-h-52"))},[n(t).length>0?(a(!0),u(I,{key:0},O(n(t),(w,k)=>(a(),u("li",{key:`autocomplete-option-${k}`},[_("button",{onClick:()=>p(w)},T(w[e.textKey??"text"]),9,Y)]))),128)):(a(),u("li",Z,[B(r.$slots,"no-option",{newOption:l,inputValue:n(o)},()=>[_("button",{onClick:l},"New option : "+T(n(o)),1)])]))],2)],2))}}),ee={class:"dropdown"},se=v({__name:"TagInput",props:{tags:{},selectedTagIds:{}},emits:["newTag","removeTag","selectTag"],setup(d,{emit:s}){const e=d,o=N(()=>e.tags.filter(l=>e.selectedTagIds.includes(l.id))),t=l=>s("selectTag",l),g=l=>s("removeTag",l.id),p=l=>s("newTag",l);return(l,r)=>(a(),u("div",ee,[c(E,{label:"Tag name",options:e.tags,onInput:t,onNewOption:p,"text-key":"title","value-key":"id"},null,8,["options"]),_("div",{class:h(("mergeClasses"in l?l.mergeClasses:n(C))("flex"))},[(a(!0),u(I,null,O(n(o),m=>(a(),$(X,{key:"tag-"+m.id,text:m.title,color:m.color,icon:m.icon},{default:f(()=>[c(n(V),{icon:n(G),size:"xs",class:"btn btn-circle btn-xs",onClick:w=>g(m)},null,8,["icon","onClick"])]),_:2},1032,["text","color","icon"]))),128))],2)]))}}),te=v({__name:"CreateNote",setup(d){const s=R(),e=x(!1),o=x(""),t=x([]),{tags:g,nextTagId:p}=K(s),l=N(()=>[...g.value.values()]),r=()=>e.value=!0,m=()=>e.value=!1,w=i=>o.value=i,k=()=>{s.newNote(o.value,t.value),m()},L=i=>{const b=p.value;s.newTag(i),console.log(i,b),t.value.push(b)},A=i=>{t.value=t.value.filter(b=>b!==i)},F=i=>{t.value.includes(i)||t.value.push(i)},z=i=>{console.log(i)};return(i,b)=>(a(),u("div",null,[c(S,{label:"+",onClick:r}),c(Q,{"is-opened":n(e),onClose:m},{title:f(()=>[y("Create a new note")]),default:f(()=>[_("div",null,[c(q,{label:"Note name",value:n(o),placeholder:"Enter name...","input-class":"border-neutral",onInput:w},null,8,["value"]),c(se,{tags:n(l),"selected-tag-ids":n(t),onNewTag:L,onRemoveTag:A,onSelectTag:F},null,8,["tags","selected-tag-ids"]),c(E,{label:"test",options:[{text:"John",value:0},{text:"Jean",value:1},{text:"Mike",value:3}],onInput:z,onNewOption:z})])]),actions:f(()=>[c(H,{class:"btn-success",onClick:k},{default:f(()=>[y("Create")]),_:1})]),_:1},8,["is-opened"])]))}}),ne={class:"py-2"},oe=v({__name:"NotesGrid",setup(d){const s=R(),{notes:e}=K(s);return(o,t)=>(a(),u("div",ne,[_("ul",{class:h(("mergeClasses"in o?o.mergeClasses:n(C))("grid","grid-cols-1","md:grid-cols-2","gap-1","p-0"))},[(a(!0),u(I,null,O(n(e),([g,p])=>(a(),$(S,{key:`note-${p.id}`,label:p.title,href:`/notes/${p.id}`},null,8,["label","href"]))),128)),c(te)],2)]))}}),le=_("span",{class:"text-neutral"},"Notes",-1),pe=v({__name:"index",setup(d){return J({title:"Notes"}),(s,e)=>(a(),u("div",null,[c(j,null,{default:f(()=>[le]),_:1}),c(oe)]))}});export{pe as default};
