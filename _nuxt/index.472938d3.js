import{g as E,E as j,x as D,c as g,h as f,o as m,q as U,r as F,a as h,t as C,s as Y,v as Z,C as R,b,B as tt,u as et,w as nt}from"./entry.67bee11c.js";import{f as $,b as rt}from"./index.f5fa4f10.js";import{d as ot}from"./persistedPinia.b9bd7008.js";import{_ as st}from"./MultilineInput.vue.d510f198.js";import{P as at}from"./PageHeading.cd4206d4.js";var it=typeof global=="object"&&global&&global.Object===Object&&global;const ut=it;var ct=typeof self=="object"&&self&&self.Object===Object&&self,lt=ut||ct||Function("return this")();const V=lt;var ft=V.Symbol;const x=ft;var G=Object.prototype,dt=G.hasOwnProperty,pt=G.toString,v=x?x.toStringTag:void 0;function mt(t){var e=dt.call(t,v),n=t[v];try{t[v]=void 0;var o=!0}catch{}var i=pt.call(t);return o&&(e?t[v]=n:delete t[v]),i}var yt=Object.prototype,gt=yt.toString;function bt(t){return gt.call(t)}var _t="[object Null]",vt="[object Undefined]",B=x?x.toStringTag:void 0;function H(t){return t==null?t===void 0?vt:_t:B&&B in Object(t)?mt(t):bt(t)}function K(t){return t!=null&&typeof t=="object"}var ht="[object Symbol]";function Et(t){return typeof t=="symbol"||K(t)&&H(t)==ht}var Tt=/\s/;function St(t){for(var e=t.length;e--&&Tt.test(t.charAt(e)););return e}var $t=/^\s+/;function xt(t){return t&&t.slice(0,St(t)+1).replace($t,"")}function M(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var P=0/0,jt=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,Ot=/^0o[0-7]+$/i,kt=parseInt;function J(t){if(typeof t=="number")return t;if(Et(t))return P;if(M(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=M(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xt(t);var n=wt.test(t);return n||Ot.test(t)?kt(t.slice(2),n?2:8):jt.test(t)?P:+t}var It=function(){return V.Date.now()};const I=It;var Ct="Expected a function",Mt=Math.max,Dt=Math.min;function Nt(t,e,n){var o,i,c,u,r,s,l=0,d=!1,y=!1,w=!0;if(typeof t!="function")throw new TypeError(Ct);e=J(e)||0,M(n)&&(d=!!n.leading,y="maxWait"in n,c=y?Mt(J(n.maxWait)||0,e):c,w="trailing"in n?!!n.trailing:w);function O(a){var p=o,_=i;return o=i=void 0,l=a,u=t.apply(_,p),u}function q(a){return l=a,r=setTimeout(T,e),d?O(a):u}function z(a){var p=a-s,_=a-l,A=e-p;return y?Dt(A,c-_):A}function N(a){var p=a-s,_=a-l;return s===void 0||p>=e||p<0||y&&_>=c}function T(){var a=I();if(N(a))return W(a);r=setTimeout(T,z(a))}function W(a){return r=void 0,w&&o?O(a):(o=i=void 0,u)}function X(){r!==void 0&&clearTimeout(r),l=0,o=s=i=r=void 0}function Q(){return r===void 0?u:W(I())}function k(){var a=I(),p=N(a);if(o=arguments,i=this,s=a,p){if(r===void 0)return q(s);if(y)return clearTimeout(r),r=setTimeout(T,e),O(s)}return r===void 0&&(r=setTimeout(T,e)),u}return k.cancel=X,k.flush=Q,k}var Wt="[object Number]";function At(t){return typeof t=="number"||K(t)&&H(t)==Wt}function Bt(t){return At(t)&&t!=+t}const Pt=["value"],Jt=E({__name:"DateSelector",props:{value:{}},emits:["input"],setup(t,{emit:e}){const n=t,{value:o}=j(n),i=D(()=>$(o.value,"yyyy-MM-dd"));function c(u){var l;const r=(l=u.target)==null?void 0:l.value,s=new Date(r);Bt(s.valueOf())||e("input",s)}return(u,r)=>(m(),g("input",{type:"date",class:"input input-sm input-bordered focus:outline-0",pattern:"\\d{4}-\\d{2}-\\d{2}",value:f(i),onChange:c},null,40,Pt))}}),Lt=["onClick"],Ut=E({__name:"DayOfWeekSelector",props:{value:{}},emits:["input"],setup(t,{emit:e}){const n=t,o=["M","T","W","T","F","S","S"],{value:i}=j(n),c=D(()=>(i.value.getDay()+6)%7);function u(r){const s=rt(i.value,r-c.value);e("input",s)}return(r,s)=>(m(),g("div",null,[(m(),g(U,null,F(o,(l,d)=>h("button",{class:Y(("mergeClasses"in r?r.mergeClasses:f(Z))("btn","btn-circle","btn-outline","btn-sm","btn-primary","mx-1",d==f(c)?"btn-active":void 0)),onClick:()=>u(d)},C(l),11,Lt)),64))]))}}),S=t=>$(t,"yyyy-MM-dd"),Ft=ot("journal",{state:()=>({entries:new Map}),actions:{getEntries(t){return this.entries.get(S(t))},newEntry(t,e){const n=S(t);this.entries.has(n)||this.entries.set(n,[]),this.entries.get(n).push(e)},editEntry(t,e,n){const o=this.entries.get(S(t));if(!o)throw new Error(`[Journal] Key ${t} not found`);if(o[e]===void 0)throw new Error(`[Journal] Index ${e} out of range for key ${t}`);o.splice(e,1,n)},removeEntry(t,e){const n=this.entries.get(S(t));if(!n)throw new Error(`[Journal] Key ${t} not found`);if(n[e]===void 0)throw new Error(`[Journal] Index ${e} out of range for key ${t}`);n.splice(e,1)}}}),Rt={class:"m-0"},L=E({__name:"Entry",props:{entry:{}},emits:["update:entry"],setup(t,{emit:e}){const n=t,{entry:o}=j(n),i=R(null),c=Nt(u=>{e("update:entry",u.trim()),i.value.resetContent()},2e3);return(u,r)=>(m(),g("li",Rt,[b(st,{value:f(o),placeholder:"Write here...",ref_key:"input",ref:i,onInput:f(c),class:"w-full"},null,8,["value","onInput"])]))}}),Vt={class:"list-disc marker:text-primary-focus"},Gt=E({__name:"EntryList",props:{date:{}},setup(t){const e=t,{date:n}=j(e),o=Ft(),i=D(()=>o.getEntries(n.value));function c(r,s){s?o.editEntry(n.value,r,s):o.removeEntry(n.value,r)}function u(r){r&&o.newEntry(n.value,r)}return(r,s)=>(m(),g("ul",Vt,[(m(!0),g(U,null,F(f(i),(l,d)=>(m(),tt(L,{entry:l,"onUpdate:entry":y=>c(d,y),key:`entry-${d}`},null,8,["entry","onUpdate:entry"]))),128)),b(L,{entry:"","onUpdate:entry":s[0]||(s[0]=l=>u(l))})]))}}),Ht=h("span",{class:"text-primary-focus"},"Journal",-1),Kt={class:"flex flex-wrap justify-center my-4 gap-y-1"},qt={class:"text-primary-focus text-xl font-bold"},zt={class:"text-primary-focus text-2xl font-extrabold"},ee=E({__name:"index",setup(t){et({title:"Journal"});const e=R(new Date);function n(o){e.value=o}return(o,i)=>(m(),g("div",null,[b(at,null,{default:nt(()=>[Ht]),_:1}),h("div",Kt,[b(Jt,{value:f(e),onInput:n,class:"input-primary"},null,8,["value"]),b(Ut,{value:f(e),onInput:n},null,8,["value"])]),h("h3",qt,C(f($)(f(e),"MMM d")),1),h("h2",zt,C(f($)(f(e),"EEEE")),1),b(Gt,{date:f(e),class:"mt-4"},null,8,["date"])]))}});export{ee as default};
