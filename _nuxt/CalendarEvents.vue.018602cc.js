import{g as y,z as $,o,c as f,a as _,t as h,h as s,x as q,y as R,s as B,v as H,Q as j,q as w,r as S,B as g,J,w as b,d as E,b as m,I as L,R as P,A as Q}from"./entry.2fb70ca1.js";import{F as k,u as T}from"./eventStore.f4201045.js";import{_ as W}from"./Tag.vue.a23b0b30.js";import{f as C,p as G}from"./index.1dfe98c4.js";import{a as K,_ as X}from"./Dialog.vue.04f2e674.js";import{a as Y}from"./PageHeading.99ada2df.js";import{i as Z}from"./isNaN.30d01d11.js";import{_ as ee}from"./TagSelecter.vue.9198336c.js";const te={class:"flex-grow"},ne={class:"text-xs font-light leading-3"},se={class:"focus:outline-none text-lg font-medium leading-5"},ae=y({__name:"CalendarEvent",props:{start:{},end:{},title:{},description:{},tag:{}},setup(c){const e=c,t=$(()=>{if(!e.start&&!e.end)return"Whole day";if(e.start&&!e.end)return C(e.start,"H:mm");if(e.start&&e.end)return`${C(e.start,"H:mm")} - ${C(e.end,"H:mm")}`});return(a,d)=>(o(),f("div",{class:B(("mergeClasses"in a?a.mergeClasses:s(H))("border-b","last-of-type:border-b-0","p-2","border-base-300","border-dashed","cursor-pointer","flex","items-center"))},[_("div",te,[_("p",ne,h(s(t)),1),_("p",se,h(e.title),1)]),e.tag?(o(),q(W,{key:0,icon:e.tag.icon,color:e.tag.color},null,8,["icon","color"])):R("",!0)],2))}}),I=y({__name:"DateTimeSelector",props:{value:{},label:{},clearable:{type:Boolean}},emits:["input"],setup(c,{emit:e}){const t=c,{value:a}=j(t),d=$(()=>a.value?C(a.value,"yyyy-MM-dd'T'HH:mm"):"");function v(n){var p;const r=(p=n.target)==null?void 0:p.value,l=G(r,"yyyy-MM-dd'T'HH:mm",new Date);Z(l.valueOf())||e("input",l)}const u=()=>e("input",null);return(n,r)=>(o(),q(Y,{label:t.label,type:"datetime-local",pattern:"\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}",clearable:t.clearable,value:s(d),onChange:v,onClear:u},null,8,["label","clearable","value"]))}}),le={class:"btn btn-xs"},oe=y({__name:"FrequencyVue",props:{frequency:{}},setup(c){return(e,t)=>(o(),f("div",le,h(e.frequency),1))}}),re={class:"flex items-center gap-x-2 overflow-x-auto p-2"},ce={class:"font-bold whitespace-nowrap"},ue=y({__name:"FrequencySelecter",props:{frequency:{},label:{}},emits:["update:frequency"],setup(c,{emit:e}){const t=c,a=Object.values(k),d=v=>{e("update:frequency",v)};return(v,u)=>(o(),f("div",re,[_("div",ce,h(t.label??"Frequency :"),1),(o(!0),f(w,null,S(s(a),n=>(o(),q(oe,{frequency:n,onClick:()=>d(n),class:B({"outline outline-2 outline-offset-1 outline-neutral":t.frequency===n})},null,8,["frequency","onClick","class"]))),256))]))}}),ie={class:"form-control gap-y-2"},de={class:"flex flex-nowrap gap-2 overflow-x-auto"},ve=y({__name:"EditEvent",props:{event:{}},emits:["close"],setup(c,{emit:e}){const t=c,a=T(),d=a.tagArray,v=$(()=>!!t.event),u=g(""),n=g(new Date),r=g(null),l=g(k.Once),p=g(-1),x=()=>e("close"),N=i=>u.value=i,V=i=>n.value=i,O=i=>r.value=i,M=i=>l.value=i,A=i=>p.value=i,U=()=>{t.event&&(a.editEvent(t.event.id,{title:u.value,frequency:l.value,start:n.value,end:r.value??void 0,tagId:p.value}),x())},z=()=>{t.event&&(a.removeEvent(t.event.id),x())};return J(()=>{t.event?(u.value=t.event.title,n.value=t.event.start,r.value=t.event.end??null,l.value=t.event.frequency,p.value=t.event.tagId):(u.value="",n.value=new Date,r.value=new Date,l.value=k.Once,p.value=-1)}),(i,fe)=>{const D=L;return o(),q(K,{"is-opened":s(v),onClose:x},{title:b(()=>{var F;return[E("Update event '"+h((F=t.event)==null?void 0:F.title)+"'",1)]}),default:b(()=>[_("div",ie,[m(X,{label:"Event name",placeholder:"Enter name...",value:s(u),onInput:N},null,8,["value"]),_("div",de,[m(I,{value:s(n),onInput:V,label:"Start of event"},null,8,["value"]),m(I,{value:s(r),onInput:O,label:"End of event",clearable:""},null,8,["value"])]),m(ue,{frequency:s(l),"onUpdate:frequency":M},null,8,["frequency"]),m(ee,{tags:s(d),selected:s(p),"onUpdate:selected":A},null,8,["tags","selected"])])]),actions:b(()=>[m(D,{class:"btn-error ml-2",onClick:z},{default:b(()=>[E("Delete")]),_:1}),m(D,{class:"btn-success ml-2",onClick:U},{default:b(()=>[E("Save")]),_:1})]),_:1},8,["is-opened"])}}}),pe={class:"menu"},me={key:1,class:"text-center font-light py-4"},xe=y({__name:"CalendarEvents",props:{date:{},tagFilter:{}},setup(c){const e=c,t=T(),a=$(()=>Q(t.getEventsOfDay(e.date)).chain().filter(n=>e.tagFilter<0||n.tagId===e.tagFilter).sortBy([n=>n.start.getHours(),n=>n.start.getMinutes()]).value()),d=g(null),v=n=>d.value=n,u=n=>t.tags.get(n.tagId);return(n,r)=>(o(),f("div",null,[s(a).length>0?(o(),f(w,{key:0},[_("ul",pe,[(o(!0),f(w,null,S(s(a),l=>(o(),f("li",{key:"event-"+l.id},[m(ae,P(l,{tag:u(l),onClick:p=>v(l),class:("mergeClasses"in n?n.mergeClasses:s(H))("px-6","rounded-box")}),null,16,["tag","onClick","class"])]))),128))]),m(ve,{event:s(d),onClose:r[0]||(r[0]=()=>v(null))},null,8,["event"])],64)):(o(),f("div",me,"No event for this day..."))]))}});export{I as _,ue as a,xe as b};
