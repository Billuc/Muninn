import{g as h,o as u,c as m,B as N,h as s,F as I,C as S,a as f,t as k,P as R,Q as J,q as z,r as F,w as g,N as Q,R as W,s as y,v as b,E as x,x as w,b as r,J as P,T as X,U as Y,d as C,I as Z,z as K,V as ee,W as M,e as te,u as se}from"./entry.9eb24a14.js";import{P as oe}from"./PageHeading.3a6f42e7.js";import{u as O,T as L}from"./noteStore.8cdb2ef8.js";import{a as V,_ as U}from"./TextInput.vue.9b322cfb.js";import{_ as ne}from"./Input.vue.e21bd4c4.js";const le={class:"ml-1"},D=h({__name:"Tag",props:{color:{},icon:{},text:{}},setup(d){const o=d;return(e,l)=>(u(),m("div",{class:"badge",style:J({backgroundColor:o.color})},[o.icon?(u(),N(s(I),{key:0,icon:o.icon,size:"xs"},null,8,["icon"])):S("",!0),f("span",le,k(o.text),1),R(e.$slots,"default")],4))}}),j=h({__name:"TagList",props:{tags:{},removable:{type:Boolean},editable:{type:Boolean}},emits:["remove","edit"],setup(d,{emit:o}){const e=d,l=n=>o("remove",n),a=n=>o("edit",n);return(n,i)=>(u(),m("div",{class:y(("mergeClasses"in n?n.mergeClasses:s(b))("flex","flex-wrap","gap-2"))},[(u(!0),m(z,null,F(e.tags,c=>(u(),N(D,{key:"tag-"+c.id,text:c.title,color:c.color,icon:c.icon},{default:g(()=>[n.editable?(u(),N(s(I),{key:0,icon:s(Q),size:"xs",class:"cursor-pointer ml-1",onClick:()=>a(c)},null,8,["icon","onClick"])):S("",!0),n.removable?(u(),N(s(I),{key:1,icon:s(W),size:"xs",class:"cursor-pointer ml-1",onClick:()=>l(c)},null,8,["icon","onClick"])):S("",!0)]),_:2},1032,["text","color","icon"]))),128))],2))}}),ae=["onClick"],ce={key:1},G=h({__name:"Autocomplete",props:{label:{},inputClass:{},placeholder:{},options:{},textKey:{},valueKey:{}},emits:["input","newOption"],setup(d,{emit:o}){const e=d,l=x(""),a=w(()=>e.options.filter(t=>{const _=t[e.textKey??"text"]??"";return P.includes(_.toLowerCase(),l.value.toLowerCase())})),n=t=>l.value=t.target.value,i=t=>o("input",t[e.valueKey??"value"]),c=()=>o("newOption",l.value);return(t,_)=>(u(),m("div",{class:y(("mergeClasses"in t?t.mergeClasses:s(b))("w-full","dropdown"))},[r(ne,{label:e.label,type:"text",placeholder:e.placeholder,onInput:n,value:s(l),class:y(e.inputClass)},null,8,["label","placeholder","value","class"]),f("ul",{class:y(("mergeClasses"in t?t.mergeClasses:s(b))("dropdown-content","menu","border","z-10","p-2","shadow","bg-base-100","rounded-box","w-56","max-h-52","flex","flex-col","flex-nowrap","overflow-y-auto"))},[s(a).length>0?(u(!0),m(z,{key:0},F(s(a),(p,T)=>(u(),m("li",{key:`autocomplete-option-${T}`},[R(t.$slots,"option",{option:p,index:T,textKey:e.textKey,selectOption:()=>i(p)},()=>[f("button",{onClick:()=>i(p)},k(p[e.textKey??"text"]),9,ae)])]))),128)):(u(),m("li",ce,[R(t.$slots,"no-option",{newOption:c,inputValue:s(l)},()=>[f("button",{onClick:c},"New option : "+k(s(l)),1)])]))],2)],2))}}),re={class:"flex-grow"},ie=["onClick"],ue={key:0},de=h({__name:"IconInput",props:{icon:{}},emits:["input"],setup(d,{emit:o}){const e=d,l=[...Object.values(X),...Object.values(Y)].map(n=>({text:n.iconName,value:[n.prefix,n.iconName]})),a=n=>o("input",n);return(n,i)=>(u(),m("div",{class:y(("mergeClasses"in n?n.mergeClasses:s(b))("flex","flex-wrap","items-center","justify-center","gap-x-4","gap-y-2","w-full"))},[f("div",re,[r(G,{label:"Icon",placeholder:"Search icons...",options:s(l),onInput:a},{option:g(({option:c,selectOption:t})=>[f("div",{onClick:t,tabindex:"0"},[r(s(I),{icon:c.value},null,8,["icon"]),C(" "+k(c.text),1)],8,ie)]),"no-option":g(()=>[C(" No icon found... ")]),_:1},8,["options"])]),e.icon?(u(),m("div",ue,[r(s(I),{icon:e.icon},null,8,["icon"]),C(" "+k(e.icon[1]),1)])):S("",!0)],2))}}),pe={class:"form-control my-4 gap-y-2"},ge=h({__name:"EditNoteTag",props:{tag:{}},emits:["close"],setup(d,{emit:o}){const e=d,l=O(),a=w(()=>!!e.tag),n=x(""),i=x(L.red),c=x(null),t=$=>n.value=$,_=$=>c.value=$,p=()=>o("close"),T=()=>{e.tag&&(l.editTag(e.tag.id,{id:e.tag.id,color:i.value,title:n.value,icon:c.value??void 0}),p())};return Z(()=>{e.tag?(n.value=e.tag.title,i.value=e.tag.color,c.value=e.tag.icon??null):(n.value="",i.value=L.red,c.value=null)}),($,A)=>{const B=U;return u(),N(V,{"is-opened":s(a),onClose:p},{title:g(()=>{var v;return[C(" Edit tag '"+k((v=e.tag)==null?void 0:v.title)+"'",1)]}),default:g(()=>[f("div",pe,[r(B,{label:"Tag name",placeholder:"Enter name...",value:s(n),onInput:t},null,8,["value"]),r(de,{icon:s(c)??void 0,onInput:_},null,8,["icon"])])]),actions:g(()=>[r(K,{class:"btn-success ml-2",onClick:T},{default:g(()=>[C("Save")]),_:1})]),_:1},8,["is-opened"])}}}),me=h({__name:"ManageNoteTags",setup(d){const o=O(),e=x(!1),l=x(null),a=w(()=>[...o.tags.values()]),n=()=>e.value=!0,i=()=>e.value=!1,c=_=>o.removeTag(_.id),t=_=>l.value=_;return(_,p)=>(u(),m("div",null,[r(K,{onClick:n},{default:g(()=>[C("Manage tags")]),_:1}),r(V,{"is-opened":s(e),onClose:i},{title:g(()=>[C(" Manage note tags ")]),default:g(()=>[r(j,{tags:s(a),editable:"",removable:"",onRemove:c,onEdit:t},null,8,["tags"])]),_:1},8,["is-opened"]),r(ge,{tag:s(l),onClose:p[0]||(p[0]=T=>l.value=null)},null,8,["tag"])]))}}),_e={class:"w-full"},fe=["onClick"],H=h({__name:"TagInput",props:{tags:{},selectedTagIds:{},strict:{type:Boolean}},emits:["newTag","removeTag","selectTag"],setup(d,{emit:o}){const e=d,l=w(()=>e.tags.filter(t=>e.selectedTagIds.includes(t.id))),a=w(()=>e.tags.filter(t=>!l.value.includes(t))),n=t=>o("selectTag",t),i=t=>o("removeTag",t.id),c=t=>o("newTag",t);return(t,_)=>(u(),m("div",_e,[r(G,{label:"Tags",placeholder:"Enter tag name...",options:s(a),onInput:n,onNewOption:c,"text-key":"title","value-key":"id"},ee({option:g(({option:p,selectOption:T})=>[f("div",{onClick:T,tabindex:"0"},[r(D,{color:p.color,text:p.title,icon:p.icon},null,8,["color","text","icon"])],8,fe)]),_:2},[e.strict?{name:"no-option",fn:g(()=>[C(" No tag found... ")]),key:"0"}:void 0]),1032,["options"]),r(j,{class:"mt-2",tags:s(l),removable:"",onRemove:i},null,8,["tags"])]))}}),ve={class:"flex items-center gap-x-4"},he=f("span",{class:"flex-shrink-0"},"Filter by tag : ",-1),Ce=h({__name:"NoteTagFilter",props:{selected:{}},emits:["update:selected"],setup(d,{emit:o}){const e=d,l=O(),{tags:a}=M(l),n=w(()=>[...a.value.values()]),i=t=>o("update:selected",[...e.selected,t]),c=t=>o("update:selected",e.selected.filter(_=>_!==t));return(t,_)=>{const p=H;return u(),m("div",ve,[he,r(p,{strict:"",tags:s(n),"selected-tag-ids":e.selected,onSelectTag:i,onRemoveTag:c},null,8,["tags","selected-tag-ids"])])}}}),q=h({__name:"NotesGridElement",props:{label:{},href:{},tags:{}},emits:["click"],setup(d,{emit:o}){const e=d;function l(a){e.href||(a.preventDefault(),o("click"))}return(a,n)=>{const i=te;return u(),m("li",{class:y(("mergeClasses"in a?a.mergeClasses:s(b))("btn","btn-neutral","list-none","-skew-y-3","my-0","w-full","h-full","py-1")),onClick:l},[r(i,{class:y(("mergeClasses"in a?a.mergeClasses:s(b))("w-full","h-full","flex","justify-center","items-center","m-0","no-underline","text-lg","flex","flex-col","items-center")),href:e.href},{default:g(()=>[C(k(e.label)+" ",1),r(j,{tags:e.tags},null,8,["tags"])]),_:1},8,["class","href"])],2)}}}),xe={class:"form-control gap-y-2"},Te=h({__name:"CreateNote",setup(d){const o=O(),e=x(!1),l=x(""),a=x([]),{tags:n,nextTagId:i}=M(o),c=w(()=>[...n.value.values()]),t=()=>e.value=!0,_=()=>e.value=!1,p=v=>l.value=v,T=()=>{o.newNote(l.value,a.value),_()},$=v=>{const E=i.value;o.newTag(v),a.value.push(E)},A=v=>{a.value=a.value.filter(E=>E!==v)},B=v=>{a.value.includes(v)||a.value.push(v)};return(v,E)=>(u(),m("div",null,[r(q,{label:"+",onClick:t,tags:[]}),r(V,{"is-opened":s(e),onClose:_},{title:g(()=>[C("Create a new note")]),default:g(()=>[f("div",xe,[r(U,{label:"Note name",value:s(l),placeholder:"Enter name...","input-class":"border-neutral",onInput:p},null,8,["value"]),r(H,{tags:s(c),"selected-tag-ids":s(a),onNewTag:$,onRemoveTag:A,onSelectTag:B},null,8,["tags","selected-tag-ids"])])]),actions:g(()=>[r(K,{class:"btn-success",onClick:T},{default:g(()=>[C("Create")]),_:1})]),_:1},8,["is-opened"])]))}}),ye={class:"py-2"},be=h({__name:"NotesGrid",props:{tagFilter:{}},setup(d){const o=d,e=O(),{notes:l}=M(e),a=w(()=>[...l.value.values()].filter(i=>P.difference(o.tagFilter,i.tagIds).length===0)),n=i=>[...e.tags.values()].filter(c=>i.includes(c.id));return(i,c)=>(u(),m("div",ye,[f("ul",{class:y(("mergeClasses"in i?i.mergeClasses:s(b))("grid","grid-cols-1","md:grid-cols-2","gap-1","p-0"))},[(u(!0),m(z,null,F(s(a),t=>(u(),N(q,{key:`note-${t.id}`,label:t.title,href:`/notes/${t.id}`,tags:n(t.tagIds)},null,8,["label","href","tags"]))),128)),r(Te)],2)]))}}),we=f("span",{class:"text-neutral"},"Notes",-1),Ee=h({__name:"index",setup(d){const o=x([]),e=l=>o.value=l;return se({title:"Notes"}),(l,a)=>(u(),m("div",null,[r(oe,null,{default:g(()=>[we]),_:1}),f("div",{class:y(("mergeClasses"in l?l.mergeClasses:s(b))("flex","flex-wrap","items-center","justify-center","gap-x-4","gap-y-2","w-full","my-4"))},[r(Ce,{selected:s(o),"onUpdate:selected":e,class:"flex-grow"},null,8,["selected"]),r(me)],2),r(be,{"tag-filter":s(o)},null,8,["tag-filter"])]))}});export{Ee as default};
