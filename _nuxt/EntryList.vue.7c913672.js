import{f as h}from"./index.504780f4.js";import{g as v,c as m,a as w,t as x,h as a,o as d,b as f,W as k,X as C,V as M,K as R,x as E,z as $,Y as A,Z as B,$ as J,l as S,F as D,r as K,q as U}from"./entry.b18e108e.js";import{d as F}from"./PageHeading.5f531ff8.js";import{_ as g}from"./MultilineInput.vue.672e0f7c.js";const N={class:"text-secondary text-xl font-bold leading-4"},V={class:"text-secondary text-2xl font-extrabold"},O=v({__name:"DateDisplay",props:{date:{}},setup(n){const t=n;return(e,r)=>(d(),m("div",null,[w("h3",N,x(a(h)(t.date,"MMM d")),1),w("h2",V,x(a(h)(t.date,"EEEE")),1)]))}}),y=n=>h(n,"yyyy-MM-dd"),W=F("journal",{state:()=>({entries:new Map}),actions:{getEntries(n){return this.entries.get(y(n))},newEntry(n,t){const e=y(n);this.entries.has(e)||this.entries.set(e,[]),this.entries.get(e).push(t)},editEntry(n,t,e){const r=this.entries.get(y(n));if(!r)throw new Error(`[Journal] Key ${n} not found`);if(r[t]===void 0)throw new Error(`[Journal] Index ${t} out of range for key ${n}`);r.splice(t,1,e)},removeEntry(n,t){const e=this.entries.get(y(n));if(!e)throw new Error(`[Journal] Key ${n} not found`);if(e[t]===void 0)throw new Error(`[Journal] Index ${t} out of range for key ${n}`);e.splice(t,1)}}}),I={class:"flex flex-nowrap"},L=v({__name:"EntryActions",emits:["validate","cancel","remove"],setup(n,{emit:t}){const e=()=>t("validate"),r=()=>t("cancel"),s=()=>t("remove");return(l,i)=>{const u=R;return d(),m("div",I,[f(u,{icon:a(k),class:"btn-circle !btn-xs",onClick:e},null,8,["icon"]),f(u,{icon:a(C),class:"btn-circle !btn-xs",onClick:r},null,8,["icon"]),f(u,{icon:a(M),class:"btn-circle !btn-xs",onClick:s},null,8,["icon"])])}}}),T={class:"m-0 marker:text-neutral"},j={class:"flex flex-nowrap"},q=v({__name:"Entry",props:{entry:{}},emits:["update:entry","remove"],setup(n,{emit:t}){const e=n,r=E(e.entry),s=E(!1),l=E(null),i=()=>{t("update:entry",r.value),s.value=!1,l.value.blur()},u=()=>{r.value=e.entry,s.value=!1},o=()=>{t("remove"),s.value=!1};return(p,c)=>(d(),m("li",T,[w("div",j,[f(g,{value:a(r),"onUpdate:value":c[0]||(c[0]=_=>$(r)?r.value=_:null),placeholder:"Write here...",class:"w-full","detect-enter":"",onEnter:i,onFocus:c[1]||(c[1]=_=>s.value=!0),ref_key:"input",ref:l},null,8,["value"]),A(f(L,{onValidate:i,onCancel:u,onRemove:o},null,512),[[B,a(s)]])])]))}}),z={class:"m-0 marker:text-base-300"},P=v({__name:"AddEntry",emits:["new-entry"],setup(n,{emit:t}){const e=E(""),r=s=>{t("new-entry",s.trim()),e.value=""};return(s,l)=>(d(),m("li",z,[f(g,{value:a(e),"onUpdate:value":l[0]||(l[0]=i=>$(e)?e.value=i:null),placeholder:"Write here...",class:"w-full","detect-enter":"",onEnter:r},null,8,["value"])]))}}),X={class:"list-disc pl-8"},Q=v({__name:"EntryList",props:{date:{}},setup(n){const t=n,{date:e}=J(t),r=W(),s=S(()=>r.getEntries(e.value));function l(o,p){p?r.editEntry(e.value,o,p):r.removeEntry(e.value,o)}function i(o){r.removeEntry(e.value,o)}function u(o){o&&r.newEntry(e.value,o)}return(o,p)=>(d(),m("ul",X,[(d(!0),m(D,null,K(a(s),(c,_)=>(d(),U(q,{entry:c,"onUpdate:entry":b=>l(_,b),onRemove:()=>i(_),key:`entry-${_}`},null,8,["entry","onUpdate:entry","onRemove"]))),128)),f(P,{onNewEntry:p[0]||(p[0]=c=>u(c))})]))}});export{Q as _,O as a};
