import{g as m,s as O,o as d,c as u,b as i,h as l,I as A,E as D,a as M,t as b,J as R,n as p,m as f,l as x,w as B,d as T,F,r as S,x as H,K as P,u as U,L as W}from"./entry.49f3b586.js";import{P as j}from"./PageHeading.ad0b6c3e.js";import{_ as q,a as z}from"./CreateEvent.vue.33c89b45.js";import{r as h,t as _,a as L,g as J,f as Y,e as E}from"./index.80596018.js";import{u as I}from"./eventStore.db08204f.js";import{i as K,s as w,a as G}from"./index.a15921b6.js";import{_ as Q}from"./TagSelecter.vue.634bd37e.js";import{_ as X}from"./Background.vue.c25db773.js";import"./Tag.5085e303.js";import"./Dialog.vue.5d645579.js";import"./FABButton.vue.ce35e567.js";import"./isNaN.30d01d11.js";function N(n,e){h(2,arguments);var t=_(n),a=L(e);if(isNaN(a))return new Date(NaN);if(!a)return t;var s=t.getDate(),o=new Date(t.getTime());o.setMonth(t.getMonth()+a+1,0);var r=o.getDate();return s>=r?o:(t.setFullYear(o.getFullYear(),o.getMonth(),s),t)}function Z(n){h(1,arguments);var e=_(n);return e.setDate(1),e.setHours(0,0,0,0),e}function ee(n){h(1,arguments);var e=_(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function te(n,e){h(2,arguments);var t=_(n),a=_(e);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function ae(n,e){var t,a,s,o,r,g,c,C;h(1,arguments);var $=J(),y=L((t=(a=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(r=e.locale)===null||r===void 0||(g=r.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&s!==void 0?s:$.weekStartsOn)!==null&&a!==void 0?a:(c=$.locale)===null||c===void 0||(C=c.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&t!==void 0?t:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var v=_(n),k=v.getDay(),V=(k<y?-7:0)+6-(k-y);return v.setHours(0,0,0,0),v.setDate(v.getDate()+V),v}const se={tabindex:"0",class:"text-base font-bold"},ne=m({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth"],setup(n,{emit:e}){const t=n,a=O(()=>Y(t.date,"MMMM yyyy")),s=()=>e("nextMonth"),o=()=>e("previousMonth");return(r,g)=>(d(),u("div",{class:p(("mergeClasses"in r?r.mergeClasses:l(f))("px-4","flex","items-center","justify-between"))},[i(D,{icon:l(A),onClick:o,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),M("span",se,b(l(a)),1),i(D,{icon:l(R),onClick:s,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),re={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},le=m({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(n){const e=n,t=I(),a=O(()=>t.getEventsOfDay(e.day).filter(s=>(e.tagFilter??-1)<0||s.tagId===e.tagFilter).length);return(s,o)=>{const r=D;return d(),x(r,{class:p(("mergeClasses"in s?s.mergeClasses:l(f))("btn-circle",l(te)(e.day,e.date)?void 0:"opacity-50",l(K)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:B(()=>[T(b(s.day.getDate())+" ",1),M("div",re,b(".".repeat(Math.min(3,l(a)))),1)]),_:1},8,["class"])}}}),oe={class:"text-base font-medium text-center"},de=m({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(n,{emit:e}){const t=n,a=E({start:w(t.date,{weekStartsOn:1}),end:G(w(t.date,{weekStartsOn:1}),6)}).map(r=>Y(r,"EEE")),s=O(()=>E({start:w(Z(t.date),{weekStartsOn:1}),end:ae(ee(t.date),{weekStartsOn:1})})),o=r=>e("selectDate",r);return(r,g)=>(d(),u("div",{class:p(("mergeClasses"in r?r.mergeClasses:l(f))("grid","grid-cols-7","gap-y-1"))},[(d(!0),u(F,null,S(l(a),c=>(d(),u("div",oe,b(c),1))),256)),(d(!0),u(F,null,S(l(s),c=>(d(),x(le,{key:"day-"+c,day:c,date:t.date,"tag-filter":t.tagFilter,onClick:()=>o(c)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),ie=m({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(n,{emit:e}){const t=n,a=()=>e("update:date",N(t.date,-1)),s=()=>e("update:date",N(t.date,1)),o=r=>e("update:date",r);return(r,g)=>(d(),u("div",null,[i(ne,{date:t.date,onPreviousMonth:a,onNextMonth:s,class:"px-4"},null,8,["date"]),i(de,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:o},null,8,["date","tag-filter"])]))}}),ce=m({__name:"Calendar",props:{tagFilter:{}},setup(n){const e=n,t=H(new Date);return(a,s)=>(d(),u("div",{class:p(("mergeClasses"in a?a.mergeClasses:l(f))("relative","max-w-md","md:max-w-full"))},[M("div",{class:p(("mergeClasses"in a?a.mergeClasses:l(f))("card","shadow-xl","overflow-hidden","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[i(ie,{date:l(t),"onUpdate:date":s[0]||(s[0]=o=>P(t)?t.value=o:null),"tag-filter":e.tagFilter,class:p(("mergeClasses"in a?a.mergeClasses:l(f))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),i(q,{day:l(t),"tag-filter":e.tagFilter,class:p(("mergeClasses"in a?a.mergeClasses:l(f))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),i(z)],2))}}),ue=m({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(n,{emit:e}){const t=n,s=I().tagArray,o=r=>e("update:selected",r);return(r,g)=>(d(),x(Q,{tags:l(s),selected:t.selected,label:"","onUpdate:selected":o},null,8,["tags","selected"]))}}),me={class:"flex flex-col items-center gap-2"},ge=m({__name:"EventsVue",setup(n){const e=H(-1);return(t,a)=>(d(),u("div",me,[i(ue,{selected:l(e),"onUpdate:selected":a[0]||(a[0]=s=>e.value=s)},null,8,["selected"]),i(ce,{"tag-filter":l(e),class:"w-full"},null,8,["tag-filter"])]))}}),pe=M("span",null,"Events",-1),$e=m({__name:"index",setup(n){return U({title:"Events"}),(e,t)=>(d(),u("div",null,[i(j,null,{default:B(()=>[pe]),_:1}),i(X,{icon:l(W)},null,8,["icon"]),i(ge)]))}});export{$e as default};
