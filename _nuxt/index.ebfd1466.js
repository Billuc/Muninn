import{g as y,o as d,c as m,B as N,h as n,F as z,C as S,a as v,t as I,P as R,Q as q,q as B,r as M,w as _,N as J,R as Q,s as h,v as k,x,E as C,I as W,d as b,b as i,z as V,T as X,U as Y,J as j,V as Z,W as A,e as ee,u as te}from"./entry.416ca34c.js";import{P as se}from"./PageHeading.1842734e.js";import{u as E,T as P}from"./noteStore.25840bd0.js";import{a as F,_ as D}from"./TextInput.vue.29140d61.js";import{_ as oe}from"./Input.vue.d1de34fc.js";const ne={class:"ml-1"},U=y({__name:"Tag",props:{color:{},icon:{},text:{}},setup(u){const s=u;return(e,o)=>(d(),m("div",{class:"badge",style:q({backgroundColor:s.color})},[s.icon?(d(),N(n(z),{key:0,icon:s.icon,size:"xs"},null,8,["icon"])):S("",!0),v("span",ne,I(s.text),1),R(e.$slots,"default")],4))}}),K=y({__name:"TagList",props:{tags:{},removable:{type:Boolean},editable:{type:Boolean}},emits:["remove","edit"],setup(u,{emit:s}){const e=u,o=l=>s("remove",l),a=l=>s("edit",l);return(l,r)=>(d(),m("div",{class:h(("mergeClasses"in l?l.mergeClasses:n(k))("flex","flex-wrap","gap-2"))},[(d(!0),m(B,null,M(e.tags,c=>(d(),N(U,{key:"tag-"+c.id,text:c.title,color:c.color,icon:c.icon},{default:_(()=>[l.editable?(d(),N(n(z),{key:0,icon:n(J),size:"xs",class:"cursor-pointer ml-1",onClick:()=>a(c)},null,8,["icon","onClick"])):S("",!0),l.removable?(d(),N(n(z),{key:1,icon:n(Q),size:"xs",class:"cursor-pointer ml-1",onClick:()=>o(c)},null,8,["icon","onClick"])):S("",!0)]),_:2},1032,["text","color","icon"]))),128))],2))}}),ae=X(()=>Y(()=>import("./IconInput.96d784e6.js"),["./IconInput.96d784e6.js","./entry.416ca34c.js","./entry.8c7273a9.css","./PageHeading.1842734e.js","./noteStore.25840bd0.js","./Input.vue.d1de34fc.js","./TextInput.vue.29140d61.js"],import.meta.url).then(u=>u.default||u)),le={class:"form-control my-4 gap-y-2"},ce=y({__name:"EditNoteTag",props:{tag:{}},emits:["close"],setup(u,{emit:s}){const e=u,o=E(),a=x(()=>!!e.tag),l=C(""),r=C(P.red),c=C(null),t=$=>l.value=$,g=$=>c.value=$,p=()=>s("close"),T=()=>{e.tag&&(o.editTag(e.tag.id,{id:e.tag.id,color:r.value,title:l.value,icon:c.value??void 0}),p())};return W(()=>{e.tag?(l.value=e.tag.title,r.value=e.tag.color,c.value=e.tag.icon??null):(l.value="",r.value=P.red,c.value=null)}),($,L)=>{const O=D,f=ae;return d(),N(F,{"is-opened":n(a),onClose:p},{title:_(()=>{var w;return[b(" Edit tag '"+I((w=e.tag)==null?void 0:w.title)+"'",1)]}),default:_(()=>[v("div",le,[i(O,{label:"Tag name",placeholder:"Enter name...",value:n(l),onInput:t},null,8,["value"]),i(f,{icon:n(c)??void 0,onInput:g},null,8,["icon"])])]),actions:_(()=>[i(V,{class:"btn-success ml-2",onClick:T},{default:_(()=>[b("Save")]),_:1})]),_:1},8,["is-opened"])}}}),re=y({__name:"ManageNoteTags",setup(u){const s=E(),e=C(!1),o=C(null),a=x(()=>[...s.tags.values()]),l=()=>e.value=!0,r=()=>e.value=!1,c=g=>s.removeTag(g.id),t=g=>o.value=g;return(g,p)=>(d(),m("div",null,[i(V,{onClick:l},{default:_(()=>[b("Manage tags")]),_:1}),i(F,{"is-opened":n(e),onClose:r},{title:_(()=>[b(" Manage note tags ")]),default:_(()=>[i(K,{tags:n(a),editable:"",removable:"",onRemove:c,onEdit:t},null,8,["tags"])]),_:1},8,["is-opened"]),i(ce,{tag:n(o),onClose:p[0]||(p[0]=T=>o.value=null)},null,8,["tag"])]))}}),ie=["onClick"],ue={key:1},de=y({__name:"Autocomplete",props:{label:{},inputClass:{},placeholder:{},options:{},textKey:{},valueKey:{}},emits:["input","newOption"],setup(u,{emit:s}){const e=u,o=C(""),a=x(()=>e.options.filter(t=>{const g=t[e.textKey??"text"]??"";return j.includes(g.toLowerCase(),o.value.toLowerCase())})),l=t=>o.value=t.target.value,r=t=>s("input",t[e.valueKey??"value"]),c=()=>s("newOption",o.value);return(t,g)=>(d(),m("div",{class:h(("mergeClasses"in t?t.mergeClasses:n(k))("w-full","dropdown"))},[i(oe,{label:e.label,type:"text",placeholder:e.placeholder,onInput:l,value:n(o),class:h(e.inputClass)},null,8,["label","placeholder","value","class"]),v("ul",{class:h(("mergeClasses"in t?t.mergeClasses:n(k))("dropdown-content","menu","border","z-10","p-2","shadow","bg-base-100","rounded-box","w-56","max-h-52","flex","flex-col","flex-nowrap","overflow-y-auto"))},[n(a).length>0?(d(!0),m(B,{key:0},M(n(a),(p,T)=>(d(),m("li",{key:`autocomplete-option-${T}`},[R(t.$slots,"option",{option:p,index:T,textKey:e.textKey,selectOption:()=>r(p)},()=>[v("button",{onClick:()=>r(p)},I(p[e.textKey??"text"]),9,ie)])]))),128)):(d(),m("li",ue,[R(t.$slots,"no-option",{newOption:c,inputValue:n(o)},()=>[v("button",{onClick:c},"New option : "+I(n(o)),1)])]))],2)],2))}}),pe={class:"w-full"},ge=["onClick"],G=y({__name:"TagInput",props:{tags:{},selectedTagIds:{},strict:{type:Boolean}},emits:["newTag","removeTag","selectTag"],setup(u,{emit:s}){const e=u,o=x(()=>e.tags.filter(t=>e.selectedTagIds.includes(t.id))),a=x(()=>e.tags.filter(t=>!o.value.includes(t))),l=t=>s("selectTag",t),r=t=>s("removeTag",t.id),c=t=>s("newTag",t);return(t,g)=>(d(),m("div",pe,[i(de,{label:"Tags",placeholder:"Enter tag name...",options:n(a),onInput:l,onNewOption:c,"text-key":"title","value-key":"id"},Z({option:_(({option:p,selectOption:T})=>[v("div",{onClick:T,tabindex:"0"},[i(U,{color:p.color,text:p.title,icon:p.icon},null,8,["color","text","icon"])],8,ge)]),_:2},[e.strict?{name:"no-option",fn:_(()=>[b(" No tag found... ")]),key:"0"}:void 0]),1032,["options"]),i(K,{class:"mt-2",tags:n(o),removable:"",onRemove:r},null,8,["tags"])]))}}),_e={class:"flex items-center gap-x-4"},me=v("span",{class:"flex-shrink-0"},"Filter by tag : ",-1),fe=y({__name:"NoteTagFilter",props:{selected:{}},emits:["update:selected"],setup(u,{emit:s}){const e=u,o=E(),{tags:a}=A(o),l=x(()=>[...a.value.values()]),r=t=>s("update:selected",[...e.selected,t]),c=t=>s("update:selected",e.selected.filter(g=>g!==t));return(t,g)=>{const p=G;return d(),m("div",_e,[me,i(p,{strict:"",tags:n(l),"selected-tag-ids":e.selected,onSelectTag:r,onRemoveTag:c},null,8,["tags","selected-tag-ids"])])}}}),H=y({__name:"NotesGridElement",props:{label:{},href:{},tags:{}},emits:["click"],setup(u,{emit:s}){const e=u;function o(a){e.href||(a.preventDefault(),s("click"))}return(a,l)=>{const r=ee;return d(),m("li",{class:h(("mergeClasses"in a?a.mergeClasses:n(k))("btn","btn-primary","list-none","-skew-y-3","my-0","w-full","h-full","py-1")),onClick:o},[i(r,{class:h(("mergeClasses"in a?a.mergeClasses:n(k))("w-full","h-full","flex","justify-center","items-center","m-0","no-underline","text-lg","flex","flex-col","items-center")),href:e.href},{default:_(()=>[b(I(e.label)+" ",1),i(K,{tags:e.tags},null,8,["tags"])]),_:1},8,["class","href"])],2)}}}),ve={class:"form-control gap-y-2"},ye=y({__name:"CreateNote",setup(u){const s=E(),e=C(!1),o=C(""),a=C([]),{tags:l,nextTagId:r}=A(s),c=x(()=>[...l.value.values()]),t=()=>e.value=!0,g=()=>e.value=!1,p=f=>o.value=f,T=()=>{s.newNote(o.value,a.value),g()},$=f=>{const w=r.value;s.newTag(f),a.value.push(w)},L=f=>{a.value=a.value.filter(w=>w!==f)},O=f=>{a.value.includes(f)||a.value.push(f)};return(f,w)=>(d(),m("div",null,[i(H,{label:"+",onClick:t,tags:[]}),i(F,{"is-opened":n(e),onClose:g},{title:_(()=>[b("Create a new note")]),default:_(()=>[v("div",ve,[i(D,{label:"Note name",value:n(o),placeholder:"Enter name...","input-class":"border-primary",onInput:p},null,8,["value"]),i(G,{tags:n(c),"selected-tag-ids":n(a),onNewTag:$,onRemoveTag:L,onSelectTag:O},null,8,["tags","selected-tag-ids"])])]),actions:_(()=>[i(V,{class:"btn-success",onClick:T},{default:_(()=>[b("Create")]),_:1})]),_:1},8,["is-opened"])]))}}),Ce={class:"py-2"},Te=y({__name:"NotesGrid",props:{tagFilter:{}},setup(u){const s=u,e=E(),{notes:o}=A(e),a=x(()=>[...o.value.values()].filter(r=>j.difference(s.tagFilter,r.tagIds).length===0)),l=r=>[...e.tags.values()].filter(c=>r.includes(c.id));return(r,c)=>(d(),m("div",Ce,[v("ul",{class:h(("mergeClasses"in r?r.mergeClasses:n(k))("grid","grid-cols-1","md:grid-cols-2","gap-1","p-0"))},[(d(!0),m(B,null,M(n(a),t=>(d(),N(H,{key:`note-${t.id}`,label:t.title,href:`/notes/${t.id}`,tags:l(t.tagIds)},null,8,["label","href","tags"]))),128)),i(ye)],2)]))}}),he=v("span",{class:"text-primary"},"Notes",-1),xe=y({__name:"index",setup(u){const s=C([]),e=o=>s.value=o;return te({title:"Notes"}),(o,a)=>(d(),m("div",null,[i(se,null,{default:_(()=>[he]),_:1}),v("div",{class:h(("mergeClasses"in o?o.mergeClasses:n(k))("flex","flex-wrap","items-center","justify-center","gap-x-4","gap-y-2","w-full","my-4"))},[i(fe,{selected:n(s),"onUpdate:selected":e,class:"flex-grow"},null,8,["selected"]),i(re)],2),i(Te,{"tag-filter":n(s)},null,8,["tag-filter"])]))}}),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{de as _,Ie as i};
