import{g as w,B as h,o as v,c as p,b as d,h as n,H as G,w as M,d as E,a as k,I as S,z as R,L as J,t as F,M as K,s as b,v as y,q,r as N,x as Y,N as Q,O as X,P as Z,u as ee,k as te}from"./entry.57980362.js";import{P as ae}from"./PageHeading.e201258d.js";import{_ as H,a as se,b as ne}from"./CalendarEvents.vue.e2bfd7fe.js";import{_ as le}from"./FABButton.vue.9e66c0fc.js";import{_ as oe,a as re}from"./Dialog.vue.f34fb503.js";import{s as T,u as A,F as de,e as L}from"./eventStore.b1edd272.js";import{_ as P}from"./TagSelecter.vue.7d71394e.js";import{r as C,t as D,a as I,g as U,f as V}from"./index.1dfe98c4.js";import{a as ie}from"./index.0e822314.js";import{_ as ce}from"./Background.vue.7425a258.js";import"./Tag.vue.1893dfd3.js";import"./isNaN.30d01d11.js";function B(r,e){C(2,arguments);var t=D(r),a=I(e);if(isNaN(a))return new Date(NaN);if(!a)return t;var l=t.getDate(),o=new Date(t.getTime());o.setMonth(t.getMonth()+a+1,0);var s=o.getDate();return l>=s?o:(t.setFullYear(o.getFullYear(),o.getMonth(),l),t)}function x(r,e){var t,a,l,o,s,c,i,g;C(1,arguments);var _=U(),f=I((t=(a=(l=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&a!==void 0?a:(i=_.locale)===null||i===void 0||(g=i.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=D(r),O=u.getDay(),$=(O<f?7:0)+O-f;return u.setDate(u.getDate()-$),u.setHours(0,0,0,0),u}function ue(r,e){C(2,arguments);var t=T(r),a=T(e);return t.getTime()===a.getTime()}function ve(r){C(1,arguments);var e=D(r);return e.setDate(1),e.setHours(0,0,0,0),e}function fe(r){C(1,arguments);var e=D(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function me(r,e){C(2,arguments);var t=D(r),a=D(e);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function pe(r,e){var t,a,l,o,s,c,i,g;C(1,arguments);var _=U(),f=I((t=(a=(l=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(c=s.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&l!==void 0?l:_.weekStartsOn)!==null&&a!==void 0?a:(i=_.locale)===null||i===void 0||(g=i.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&t!==void 0?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var u=D(r),O=u.getDay(),$=(O<f?-7:0)+6-(O-f);return u.setHours(0,0,0,0),u.setDate(u.getDate()+$),u}const ge={class:"form-control gap-y-2"},_e={class:"flex flex-nowrap gap-2 overflow-x-auto"},he=w({__name:"CreateEvent",setup(r){const e=A(),t=h(!1),a=e.tagArray,l=h(""),o=h(new Date),s=h(null),c=h(de.Once),i=h(-1),g=()=>t.value=!0,_=()=>t.value=!1,f=m=>l.value=m,u=m=>o.value=m,O=m=>s.value=m,$=m=>c.value=m,z=m=>i.value=m,W=()=>{e.newEvent({title:l.value,frequency:c.value,start:o.value,end:s.value??void 0,tagId:i.value}),_()};return(m,xe)=>{const j=S;return v(),p("div",null,[d(le,{icon:n(G),class:"absolute -bottom-4 right-4 shadow-md btn-primary",onClick:g},null,8,["icon"]),d(re,{"is-opened":n(t),onClose:_},{title:M(()=>[E("Create a new event")]),default:M(()=>[k("div",ge,[d(oe,{label:"Event name",placeholder:"Enter name...",value:n(l),onInput:f},null,8,["value"]),k("div",_e,[d(H,{value:n(o),onInput:u,label:"Start of event"},null,8,["value"]),d(H,{value:n(s),onInput:O,label:"End of event",clearable:""},null,8,["value"])]),d(se,{frequency:n(c),"onUpdate:frequency":$},null,8,["frequency"]),d(P,{tags:n(a),selected:n(i),"onUpdate:selected":z},null,8,["tags","selected"])])]),actions:M(()=>[d(j,{class:"btn-success",onClick:W},{default:M(()=>[E("Create")]),_:1})]),_:1},8,["is-opened"])])}}}),we={tabindex:"0",class:"text-base font-bold"},Oe=w({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth"],setup(r,{emit:e}){const t=r,a=R(()=>V(t.date,"MMMM yyyy")),l=()=>e("nextMonth"),o=()=>e("previousMonth");return(s,c)=>(v(),p("div",{class:b(("mergeClasses"in s?s.mergeClasses:n(y))("px-4","flex","items-center","justify-between"))},[d(S,{icon:n(J),onClick:o,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),k("span",we,F(n(a)),1),d(S,{icon:n(K),onClick:l,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),be={class:"text-base font-medium text-center"},ye=w({__name:"CalendarMonthView",props:{date:{}},emits:["selectDate"],setup(r,{emit:e}){const t=r,a=L({start:x(t.date,{weekStartsOn:1}),end:ie(x(t.date,{weekStartsOn:1}),6)}).map(s=>V(s,"EEE")),l=R(()=>L({start:x(ve(t.date),{weekStartsOn:1}),end:pe(fe(t.date),{weekStartsOn:1})})),o=s=>e("selectDate",s);return(s,c)=>(v(),p("div",{class:b(("mergeClasses"in s?s.mergeClasses:n(y))("grid","grid-cols-7","gap-y-1"))},[(v(!0),p(q,null,N(n(a),i=>(v(),p("div",be,F(i),1))),256)),(v(!0),p(q,null,N(n(l),i=>(v(),Y(S,{onClick:()=>o(i),class:b(("mergeClasses"in s?s.mergeClasses:n(y))("btn-circle",n(me)(i,t.date)?void 0:"opacity-50",n(ue)(i,t.date)?"btn-primary":"btn-ghost"))},{default:M(()=>[E(F(i.getDate()),1)]),_:2},1032,["onClick","class"]))),256))],2))}}),De=w({__name:"CalendarCard",props:{date:{}},emits:["update:date"],setup(r,{emit:e}){const t=r,a=()=>e("update:date",B(t.date,-1)),l=()=>e("update:date",B(t.date,1)),o=s=>e("update:date",s);return(s,c)=>(v(),p("div",null,[d(Oe,{date:s.date,onPreviousMonth:a,onNextMonth:l,class:"px-4"},null,8,["date"]),d(ye,{date:s.date,class:"pt-4",onSelectDate:o},null,8,["date"])]))}}),Ce=w({__name:"Calendar",props:{tagFilter:{}},setup(r){const e=r,t=h(new Date);return(a,l)=>(v(),p("div",{class:b(("mergeClasses"in a?a.mergeClasses:n(y))("relative","max-w-md","md:max-w-full"))},[k("div",{class:b(("mergeClasses"in a?a.mergeClasses:n(y))("card","shadow-xl","overflow-hidden","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[d(De,{date:n(t),"onUpdate:date":l[0]||(l[0]=o=>Q(t)?t.value=o:null),class:b(("mergeClasses"in a?a.mergeClasses:n(y))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","class"]),d(ne,{date:n(t),"tag-filter":e.tagFilter,class:b(("mergeClasses"in a?a.mergeClasses:n(y))("md:col-span-2","rounded-box"))},null,8,["date","tag-filter","class"])],2),d(he)],2))}}),Me=w({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(r,{emit:e}){const t=r,l=A().tagArray,o=s=>e("update:selected",s);return(s,c)=>X((v(),Y(P,{tags:n(l),selected:t.selected,"onUpdate:selected":o},null,8,["tags","selected"])),[[Z,n(l).length]])}}),$e={class:"grid grid-cols-1 lg:grid-cols-9"},ke=w({__name:"EventsVue",setup(r){const e=h(-1);return(t,a)=>(v(),p("div",$e,[d(Me,{selected:n(e),"onUpdate:selected":a[0]||(a[0]=l=>e.value=l),class:"w-full my-2 lg:flex-col lg:col-span-2"},null,8,["selected"]),d(Ce,{"tag-filter":n(e),class:"mx-auto lg:col-span-7 w-full"},null,8,["tag-filter"])]))}}),Se=k("span",null,"Events",-1),Pe=w({__name:"index",setup(r){return ee({title:"Events"}),(e,t)=>(v(),p("div",null,[d(ae,null,{default:M(()=>[Se]),_:1}),d(ce,{icon:n(te)},null,8,["icon"]),d(ke)]))}});export{Pe as default};
