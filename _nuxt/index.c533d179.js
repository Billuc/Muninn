import{g as m,E as b,x as T,o as c,c as u,b as i,h as o,s as h,a as v,q as I,r as O,t as x,P as R,v as y,B as k,F as S,C as z,Q as U,w as f,R as D,T as G,d as $,U as B,e as H,z as M,J as j,u as q}from"./entry.df4b684a.js";import{P as J}from"./PageHeading.8619259e.js";import{_ as Q}from"./Input.vue.96b9d4be.js";import{u as F}from"./noteStore.938b56f5.js";import{_ as W,a as X}from"./TextInput.vue.54b9c6e6.js";const Y=["onClick"],Z={key:1},ee=m({__name:"Autocomplete",props:{label:{},inputClass:{},placeholder:{},options:{},textKey:{},valueKey:{}},emits:["input","newOption"],setup(r,{emit:a}){const e=r,n=b(""),t=T(()=>e.options.filter(s=>(s[e.textKey??"text"]??"").toLowerCase().startsWith(n.value.toLowerCase()))),p=s=>n.value=s.target.value,l=s=>a("input",s[e.valueKey??"value"]),d=()=>a("newOption",n.value);return(s,_)=>(c(),u("div",{class:h(("mergeClasses"in s?s.mergeClasses:o(y))("w-full","dropdown"))},[i(Q,{label:e.label,type:"text",placeholder:e.placeholder,onInput:p,value:o(n),class:h(e.inputClass)},null,8,["label","placeholder","value","class"]),v("ul",{class:h(("mergeClasses"in s?s.mergeClasses:o(y))("dropdown-content","menu","border","z-10","p-2","shadow","bg-base-100","rounded-box","w-56","max-h-52"))},[o(t).length>0?(c(!0),u(I,{key:0},O(o(t),(C,N)=>(c(),u("li",{key:`autocomplete-option-${N}`},[v("button",{onClick:()=>l(C)},x(C[e.textKey??"text"]),9,Y)]))),128)):(c(),u("li",Z,[R(s.$slots,"no-option",{newOption:d,inputValue:o(n)},()=>[v("button",{onClick:d},"New option : "+x(o(n)),1)])]))],2)],2))}}),se={class:"ml-1"},te=m({__name:"Tag",props:{color:{},icon:{},text:{}},setup(r){const a=r;return(e,n)=>(c(),u("div",{class:"badge",style:U({backgroundColor:a.color})},[a.icon?(c(),k(o(S),{key:0,icon:a.icon,size:"xs"},null,8,["icon"])):z("",!0),v("span",se,x(a.text),1),R(e.$slots,"default")],4))}}),V=m({__name:"TagList",props:{tags:{},removable:{type:Boolean}},emits:["remove"],setup(r,{emit:a}){const e=r,n=t=>a("remove",t);return(t,p)=>(c(),u("div",{class:h(("mergeClasses"in t?t.mergeClasses:o(y))("flex","gap-x-2"))},[(c(!0),u(I,null,O(e.tags,l=>(c(),k(te,{key:"tag-"+l.id,text:l.title,color:l.color,icon:l.icon},{default:f(()=>[t.removable?(c(),k(o(S),{key:0,icon:o(D),size:"xs",class:"cursor-pointer ml-1",onClick:()=>n(l)},null,8,["icon","onClick"])):z("",!0)]),_:2},1032,["text","color","icon"]))),128))],2))}}),ae={class:"dropdown w-full"},E=m({__name:"TagInput",props:{tags:{},selectedTagIds:{},strict:{type:Boolean}},emits:["newTag","removeTag","selectTag"],setup(r,{emit:a}){const e=r,n=T(()=>e.tags.filter(s=>e.selectedTagIds.includes(s.id))),t=T(()=>e.tags.filter(s=>!n.value.includes(s))),p=s=>a("selectTag",s),l=s=>a("removeTag",s.id),d=s=>a("newTag",s);return(s,_)=>(c(),u("div",ae,[i(ee,{label:"Tags",placeholder:"Enter tag name...",options:o(t),onInput:p,onNewOption:d,"text-key":"title","value-key":"id"},G({_:2},[e.strict?{name:"no-option",fn:f(()=>[$(" No tag found... ")]),key:"0"}:void 0]),1032,["options"]),i(V,{class:"mt-2",tags:o(n),removable:"",onRemove:l},null,8,["tags"])]))}}),ne={class:"flex items-center gap-x-4"},oe=v("span",{class:"flex-shrink-0"},"Filter by tag : ",-1),le=m({__name:"NoteTagFilter",props:{selected:{}},emits:["update:selected"],setup(r,{emit:a}){const e=r,n=F(),{tags:t}=B(n),p=T(()=>[...t.value.values()]),l=s=>a("update:selected",[...e.selected,s]),d=s=>a("update:selected",e.selected.filter(_=>_!==s));return(s,_)=>{const C=E;return c(),u("div",ne,[oe,i(C,{strict:"",tags:o(p),"selected-tag-ids":e.selected,onSelectTag:l,onRemoveTag:d},null,8,["tags","selected-tag-ids"])])}}}),K=m({__name:"NotesGridElement",props:{label:{},href:{},tags:{}},emits:["click"],setup(r,{emit:a}){const e=r;function n(t){e.href||(t.preventDefault(),a("click"))}return(t,p)=>{const l=H;return c(),u("li",{class:h(("mergeClasses"in t?t.mergeClasses:o(y))("btn","btn-neutral","list-none","-skew-y-3","my-0","w-full","h-full","py-1")),onClick:n},[i(l,{class:h(("mergeClasses"in t?t.mergeClasses:o(y))("w-full","h-full","flex","justify-center","items-center","m-0","no-underline","text-lg","flex","flex-col","items-center")),href:e.href},{default:f(()=>[$(x(e.label)+" ",1),i(V,{tags:e.tags},null,8,["tags"])]),_:1},8,["class","href"])],2)}}}),ce={class:"form-control gap-y-2"},re=m({__name:"CreateNote",setup(r){const a=F(),e=b(!1),n=b(""),t=b([]),{tags:p,nextTagId:l}=B(a),d=T(()=>[...p.value.values()]),s=()=>e.value=!0,_=()=>e.value=!1,C=g=>n.value=g,N=()=>{a.newNote(n.value,t.value),_()},L=g=>{const w=l.value;a.newTag(g),t.value.push(w)},A=g=>{t.value=t.value.filter(w=>w!==g)},P=g=>{t.value.includes(g)||t.value.push(g)};return(g,w)=>(c(),u("div",null,[i(K,{label:"+",onClick:s,tags:[]}),i(X,{"is-opened":o(e),onClose:_,class:"overflow-y-visible"},{title:f(()=>[$("Create a new note")]),default:f(()=>[v("div",ce,[i(W,{label:"Note name",value:o(n),placeholder:"Enter name...","input-class":"border-neutral",onInput:C},null,8,["value"]),i(E,{tags:o(d),"selected-tag-ids":o(t),onNewTag:L,onRemoveTag:A,onSelectTag:P},null,8,["tags","selected-tag-ids"])])]),actions:f(()=>[i(M,{class:"btn-success",onClick:N},{default:f(()=>[$("Create")]),_:1})]),_:1},8,["is-opened"])]))}}),ie={class:"py-2"},ue=m({__name:"NotesGrid",props:{tagFilter:{}},setup(r){const a=r,e=F(),{notes:n}=B(e),t=T(()=>[...n.value.values()].filter(l=>j.difference(a.tagFilter,l.tagIds).length===0)),p=l=>[...e.tags.values()].filter(d=>l.includes(d.id));return(l,d)=>(c(),u("div",ie,[v("ul",{class:h(("mergeClasses"in l?l.mergeClasses:o(y))("grid","grid-cols-1","md:grid-cols-2","gap-1","p-0"))},[(c(!0),u(I,null,O(o(t),s=>(c(),k(K,{key:`note-${s.id}`,label:s.title,href:`/notes/${s.id}`,tags:p(s.tagIds)},null,8,["label","href","tags"]))),128)),i(re)],2)]))}}),pe=v("span",{class:"text-neutral"},"Notes",-1),ve=m({__name:"index",setup(r){const a=b([]),e=n=>a.value=n;return q({title:"Notes"}),(n,t)=>(c(),u("div",null,[i(J,null,{default:f(()=>[pe]),_:1}),i(le,{selected:o(a),"onUpdate:selected":e},null,8,["selected"]),i(ue,{"tag-filter":o(a)},null,8,["tag-filter"])]))}});export{ve as default};
