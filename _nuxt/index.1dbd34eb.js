import{g as f,o as c,q as C,w as D,a as b,n as g,h as l,m as p,t as y,Q as V,v as A,j as L,c as h,b as u,R as P,M as O,S as W,l as H,d as j,F as k,r as Y,x as T,B as q,u as z,T as Q}from"./entry.fba0ea98.js";import{P as G}from"./PageHeading.63e43538.js";import{a as E,_ as J,b as K}from"./CreateEvent.vue.b0978575.js";import{c as I}from"./SelectAlt.vue.88259c7d.js";import{r as v,t as m,a as x,g as X,f as B,e as N}from"./index.f3feb017.js";import{u as R}from"./eventStore.737d8aa7.js";import{i as Z,s as F}from"./index.0bcc0cb9.js";import{a as ee}from"./index.6e1b1773.js";import{_ as te}from"./TagSelecter.vue.e69c76ff.js";import{_ as ae}from"./Background.vue.7bd083cd.js";import"./InputAlt.vue.c568be83.js";import"./FABButton.vue.6f7ad212.js";function se(n){v(1,arguments);var e=n||{},t=m(e.start),s=m(e.end),r=s.getTime(),a=[];if(!(t.getTime()<=r))throw new RangeError("Invalid interval");var o=t;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=r;)a.push(m(o)),o.setMonth(o.getMonth()+1);return a}function ne(n){v(1,arguments);var e=m(n);return e.setDate(1),e.setHours(0,0,0,0),e}function re(n){v(1,arguments);var e=m(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function oe(n){v(1,arguments);var e=m(n),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function le(n){v(1,arguments);var e=m(n),t=e.getFullYear(),s=e.getMonth(),r=new Date(0);return r.setFullYear(t,s+1,0),r.setHours(0,0,0,0),r.getDate()}function ie(n){v(1,arguments);var e=m(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function de(n,e){v(2,arguments);var t=m(n),s=m(e);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()}function ce(n,e){var t,s,r,a,o,d,i,_;v(1,arguments);var S=X(),w=x((t=(s=(r=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:S.weekStartsOn)!==null&&s!==void 0?s:(i=S.locale)===null||i===void 0||(_=i.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&t!==void 0?t:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var M=m(n),$=M.getDay(),U=($<w?-7:0)+6-($-w);return M.setHours(0,0,0,0),M.setDate(M.getDate()+U),M}function ue(n,e){v(2,arguments);var t=m(n),s=x(e),r=t.getFullYear(),a=t.getDate(),o=new Date(0);o.setFullYear(r,s,15),o.setHours(0,0,0,0);var d=le(o);return t.setMonth(s,Math.min(a,d)),t}function me(n,e){v(2,arguments);var t=m(n),s=x(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(s),t)}const ge=["onClick"],pe=f({__name:"MonthSelect",props:{month:{}},emits:["update:month"],setup(n,{emit:e}){const t=n,s=se({start:oe(new Date),end:re(new Date)}).map(a=>({text:B(a,"MMMM"),value:a.getMonth().toString()})),r=a=>e("update:month",Number(a));return(a,o)=>(c(),C(I,{options:l(s),value:t.month.toString(),"onUpdate:value":r},{option:D(({option:d,onSelect:i,selected:_})=>[b("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("bg-base-300")),onClick:i},[b("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("py-2","font-semibold","bg-base-200","hover:bg-base-300","mx-auto","w-40","drop-shadow-xl","border-0","text-center","rounded-box","mb-1"))},y(d.text),3)],10,ge)]),_:1},8,["options","value"]))}}),fe=["onClick"],ve=f({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(n,{emit:e}){const t=n;V(t);const s=A.range(1970,2100).map(a=>({text:a.toString(),value:a.toString()})),r=a=>e("update:year",Number(a));return L(()=>{const a=document.getElementsByClassName("selected")[0];a==null||a.scrollIntoView()}),(a,o)=>(c(),C(I,{options:l(s),value:t.year.toString(),"onUpdate:value":r},{option:D(({option:d,onSelect:i,selected:_})=>[b("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("bg-base-300")),onClick:i},[b("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("py-2","font-semibold","bg-base-200","hover:bg-base-300","mx-auto","w-20","drop-shadow-xl","border-0","text-center","rounded-box","mb-1",_?"selected":void 0))},y(d.text),3)],10,fe)]),_:1},8,["options","value"]))}}),he=f({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(n,{emit:e}){const t=n,s=()=>e("nextMonth"),r=()=>e("previousMonth"),a=d=>e("selectMonth",d),o=d=>e("selectYear",d);return(d,i)=>(c(),h("div",{class:g(("mergeClasses"in d?d.mergeClasses:l(p))("px-4","flex","items-center","justify-between"))},[u(O,{icon:l(P),onClick:r,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),u(pe,{month:t.date.getMonth(),"onUpdate:month":a,class:"!w-fit"},null,8,["month"]),u(ve,{year:t.date.getFullYear(),"onUpdate:year":o,class:"!w-fit"},null,8,["year"]),u(O,{icon:l(W),onClick:s,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),_e={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},be=f({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(n){const e=n,t=R(),s=H(()=>t.getEventsOfDay(e.day).filter(r=>(e.tagFilter??-1)<0||r.tagId===e.tagFilter).length);return(r,a)=>{const o=O;return c(),C(o,{class:g(("mergeClasses"in r?r.mergeClasses:l(p))("btn-circle",l(de)(e.day,e.date)?void 0:"opacity-50",l(Z)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:D(()=>[j(y(r.day.getDate())+" ",1),b("div",_e,y(".".repeat(Math.min(3,l(s)))),1)]),_:1},8,["class"])}}}),Me={class:"text-base font-medium text-center"},ye=f({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(n,{emit:e}){const t=n,s=N({start:F(t.date,{weekStartsOn:1}),end:ee(F(t.date,{weekStartsOn:1}),6)}).map(o=>B(o,"EEE")),r=H(()=>N({start:F(ne(t.date),{weekStartsOn:1}),end:ce(ie(t.date),{weekStartsOn:1})})),a=o=>e("selectDate",o);return(o,d)=>(c(),h("div",{class:g(("mergeClasses"in o?o.mergeClasses:l(p))("grid","grid-cols-7","gap-y-1"))},[(c(!0),h(k,null,Y(l(s),i=>(c(),h("div",Me,y(i),1))),256)),(c(!0),h(k,null,Y(l(r),i=>(c(),C(be,{key:"day-"+i,day:i,date:t.date,"tag-filter":t.tagFilter,onClick:()=>a(i)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),Ce=f({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(n,{emit:e}){const t=n,s=()=>e("update:date",E(t.date,-1)),r=()=>e("update:date",E(t.date,1)),a=i=>e("update:date",ue(t.date,i)),o=i=>e("update:date",me(t.date,i)),d=i=>e("update:date",i);return(i,_)=>(c(),h("div",null,[u(he,{date:t.date,onPreviousMonth:s,onNextMonth:r,onSelectMonth:a,onSelectYear:o,class:"px-4"},null,8,["date"]),u(ye,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:d},null,8,["date","tag-filter"])]))}}),we=f({__name:"Calendar",props:{tagFilter:{}},setup(n){const e=n,t=T(new Date);return(s,r)=>(c(),h("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("relative","max-w-md","md:max-w-full"))},[b("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("card","shadow-xl","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[u(Ce,{date:l(t),"onUpdate:date":r[0]||(r[0]=a=>q(t)?t.value=a:null),"tag-filter":e.tagFilter,class:g(("mergeClasses"in s?s.mergeClasses:l(p))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),u(J,{day:l(t),"tag-filter":e.tagFilter,class:g(("mergeClasses"in s?s.mergeClasses:l(p))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),u(K)],2))}}),De=f({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(n,{emit:e}){const t=n,r=R().tagArray,a=o=>e("update:selected",o);return(o,d)=>(c(),C(te,{tags:l(r),selected:t.selected,label:"Filter by Tag","onUpdate:selected":a,clearable:""},null,8,["tags","selected"]))}}),Fe={class:"flex flex-col items-center gap-2"},Oe=f({__name:"EventsVue",setup(n){const e=T(-1);return(t,s)=>(c(),h("div",Fe,[u(De,{selected:l(e),"onUpdate:selected":s[0]||(s[0]=r=>e.value=r)},null,8,["selected"]),u(we,{"tag-filter":l(e),class:"w-full"},null,8,["tag-filter"])]))}}),xe=b("span",null,"Events",-1),Ve=f({__name:"index",setup(n){return z({title:"Events"}),(e,t)=>(c(),h("div",null,[u(G,null,{default:D(()=>[xe]),_:1}),u(ae,{icon:l(Q)},null,8,["icon"]),u(Oe)]))}});export{Ve as default};
