import{g as O,h as x,o as y,c as U,a as F,t as N,j as c,i as I,z as le,n as j,m as V,w as E,b as f,x as oe,l as he,S as ye,A,T as _e,d as H,M as W,N as K,r as D,I as ne,R as Me,U as be,V as De,W as we,X as Ee,L as Ce,v as k,Y as Oe,B as ke,Z as Se,$ as $e,K as qe}from"./entry.4537cad6.js";import{a as Ie,c as P,b as J,e as ue,_ as Ue}from"./Tag.dda4a674.js";import{r as _,t as m,a as q,_ as Fe,b as ie,g as ce,f as Y,e as ae}from"./index.224b8d39.js";import{_ as Q,a as G,b as xe,c as de}from"./InputField.vue.aab2f993.js";import{d as Ne,m as Ye,a as Te,e as He,b as Be,c as Re,p as Ae,u as X,F as L,f as Le}from"./eventStore.6fbf5d21.js";import{a as ve,i as Ve}from"./index.ed260b32.js";import{_ as We}from"./FABButton.vue.675ab981.js";import{_ as Pe}from"./TagSelecter.vue.9f7d7b5f.js";function Z(a,t){_(2,arguments);var e=m(a),n=q(t);if(isNaN(n))return new Date(NaN);if(!n)return e;var r=e.getDate(),l=new Date(e.getTime());l.setMonth(e.getMonth()+n+1,0);var s=l.getDate();return r>=s?l:(e.setFullYear(l.getFullYear(),l.getMonth(),r),e)}function R(a,t){if(_(2,arguments),!t||Fe(t)!=="object")return new Date(NaN);var e=t.years?q(t.years):0,n=t.months?q(t.months):0,r=t.weeks?q(t.weeks):0,l=t.days?q(t.days):0,s=t.hours?q(t.hours):0,u=t.minutes?q(t.minutes):0,o=t.seconds?q(t.seconds):0,i=m(a),g=n||e?Z(i,n+e*12):i,v=l||r?ve(g,l+r*7):g,p=u+s*60,M=o+p*60,$=M*1e3,T=new Date(v.getTime()+$);return T}var je=36e5;function Xe(a,t){_(2,arguments);var e=q(t);return ie(a,e*je)}function z(a,t){var e,n,r,l,s,u,o,i;_(1,arguments);var g=ce(),v=q((e=(n=(r=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&n!==void 0?n:(o=g.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&e!==void 0?e:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=m(a),M=p.getDay(),$=(M<v?7:0)+M-v;return p.setDate(p.getDate()-$),p.setHours(0,0,0,0),p}var Ge=6e4;function ze(a,t){_(2,arguments);var e=q(t);return ie(a,e*Ge)}function B(a,t){_(2,arguments);var e=m(a),n=m(t),r=e.getTime()-n.getTime();return r<0?-1:r>0?1:r}function se(a,t){var e=a.getFullYear()-t.getFullYear()||a.getMonth()-t.getMonth()||a.getDate()-t.getDate()||a.getHours()-t.getHours()||a.getMinutes()-t.getMinutes()||a.getSeconds()-t.getSeconds()||a.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Ke(a,t){_(2,arguments);var e=m(a),n=m(t),r=se(e,n),l=Math.abs(Ne(e,n));e.setDate(e.getDate()-r*l);var s=+(se(e,n)===-r),u=r*(l-s);return u===0?0:u}function ee(a,t){return _(2,arguments),m(a).getTime()-m(t).getTime()}var re={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Ze="trunc";function te(a){return a?re[a]:re[Ze]}function Je(a,t,e){_(2,arguments);var n=ee(a,t)/Ye;return te(e==null?void 0:e.roundingMethod)(n)}function Qe(a,t,e){_(2,arguments);var n=ee(a,t)/Te;return te(e==null?void 0:e.roundingMethod)(n)}function et(a){_(1,arguments);var t=m(a),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function tt(a){_(1,arguments);var t=m(a);return He(t).getTime()===et(t).getTime()}function nt(a,t){_(2,arguments);var e=m(a),n=m(t),r=B(e,n),l=Math.abs(Be(e,n)),s;if(l<1)s=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*l);var u=B(e,n)===-r;tt(m(a))&&l===1&&B(a,n)===1&&(u=!1),s=r*(l-Number(u))}return s===0?0:s}function at(a,t,e){_(2,arguments);var n=ee(a,t)/1e3;return te(e==null?void 0:e.roundingMethod)(n)}function st(a,t){_(2,arguments);var e=m(a),n=m(t),r=B(e,n),l=Math.abs(Re(e,n));e.setFullYear(1584),n.setFullYear(1584);var s=B(e,n)===-r,u=r*(l-Number(s));return u===0?0:u}function rt(a){_(1,arguments);var t=a||{},e=m(t.start),n=m(t.end),r=n.getTime(),l=[];if(!(e.getTime()<=r))throw new RangeError("Invalid interval");var s=e;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=r;)l.push(m(s)),s.setMonth(s.getMonth()+1);return l}function lt(a){_(1,arguments);var t=m(a);return t.setDate(1),t.setHours(0,0,0,0),t}function ot(a){_(1,arguments);var t=m(a),e=t.getFullYear();return t.setFullYear(e+1,0,0),t.setHours(23,59,59,999),t}function ut(a){_(1,arguments);var t=m(a),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function it(a){_(1,arguments);var t=m(a),e=t.getFullYear(),n=t.getMonth(),r=new Date(0);return r.setFullYear(e,n+1,0),r.setHours(0,0,0,0),r.getDate()}function ct(a){_(1,arguments);var t=m(a),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function dt(a){_(1,arguments);var t=m(a.start),e=m(a.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(e.getTime()))throw new RangeError("End Date is invalid");var n={};n.years=Math.abs(st(e,t));var r=B(e,t),l=R(t,{years:r*n.years});n.months=Math.abs(nt(e,l));var s=R(l,{months:r*n.months});n.days=Math.abs(Ke(e,s));var u=R(s,{days:r*n.days});n.hours=Math.abs(Je(e,u));var o=R(u,{hours:r*n.hours});n.minutes=Math.abs(Qe(e,o));var i=R(o,{minutes:r*n.minutes});return n.seconds=Math.abs(at(e,i)),n}function vt(a,t){_(2,arguments);var e=m(a),n=m(t);return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()}function pt(a,t){var e,n,r,l,s,u,o,i;_(1,arguments);var g=ce(),v=q((e=(n=(r=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&n!==void 0?n:(o=g.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&e!==void 0?e:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var p=m(a),M=p.getDay(),$=(M<v?-7:0)+6-(M-v);return p.setHours(0,0,0,0),p.setDate(p.getDate()+$),p}function mt(a,t){_(2,arguments);var e=m(a),n=q(t),r=e.getFullYear(),l=e.getDate(),s=new Date(0);s.setFullYear(r,n,15),s.setHours(0,0,0,0);var u=it(s);return e.setMonth(n,Math.min(l,u)),e}function ft(a,t){_(2,arguments);var e=m(a),n=q(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(n),e)}const gt={class:"flex-grow"},ht={class:"text-xs font-light leading-3"},yt={class:"focus:outline-none text-lg font-medium leading-5"},_t={class:"text-xs"},Mt=O({__name:"CalendarEvent",props:{start:{},end:{},title:{},description:{},tag:{}},setup(a){const t=a,e=x(()=>{if(!t.start&&!t.end)return"Whole day";if(t.start&&!t.end)return Y(t.start,"H:mm");if(t.start&&t.end)return`${Y(t.start,"H:mm")} - ${Y(t.end,"H:mm")}`});return(n,r)=>(y(),U("div",{class:j(("mergeClasses"in n?n.mergeClasses:c(V))("border-b","last-of-type:border-b-0","p-1","border-base-300","border-dashed","cursor-pointer","flex","items-center","bg-base-300"))},[F("div",gt,[F("p",ht,N(c(e)),1),F("p",yt,N(t.title),1),F("p",_t,N(t.description),1)]),t.tag?(y(),I(Ie,{key:0,icon:t.tag.icon,color:t.tag.color},null,8,["icon","color"])):le("",!0)],2))}});function pe(a){return Y(a,"yyyy-MM-dd")}function bt(a,t){return dt({start:a,end:t})}function Dt(a){return Ae(a,"yyyy-MM-dd",new Date)}function me(a,t){const e=Dt(a);return t[0]&&e.setHours(t[0]),t[1]&&e.setMinutes(t[1]),e}function fe(a,t){let e=Xe(a,t[0]??0);return e=ze(e,t[1]??0),e}const wt={class:"grid grid-cols-2 gap-2"},Et=O({__name:"DurationPicker",props:{hours:{},minutes:{},labelClass:{}},emits:["update:hours","update:minutes"],setup(a,{emit:t}){const e=a,n=[...Array(24)].map((o,i)=>({text:("00"+i).slice(-2),value:i})),r=[...Array(12)].map((o,i)=>({text:("00"+5*i).slice(-2),value:5*i})),l=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),s=o=>t("update:hours",o),u=o=>t("update:minutes",o);return(o,i)=>(y(),I(J,{"label-class":e.labelClass},{label:E(()=>[F("span",null,N(c(l)),1)]),content:E(()=>[F("div",wt,[f(P,{elements:c(n),selected:e.hours,onSelect:s},null,8,["elements","selected"]),f(P,{elements:c(r),selected:e.minutes,onSelect:u},null,8,["elements","selected"])])]),_:1},8,["label-class"]))}}),Ct=O({__name:"DurationField",props:{label:{},clearable:{type:Boolean},icon:{},hours:{},minutes:{},required:{type:Boolean}},emits:["clear","update:hours","update:minutes"],setup(a,{emit:t}){const e=a,n=()=>t("clear"),r=i=>t("update:hours",i),l=i=>t("update:minutes",i),s=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),u=new RegExp("[0-9]{2}:[0-9]{2}"),o=e.required?[i=>u.test(i)]:[];return(i,g)=>(y(),I(Q,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(s),onClear:n,rules:c(o)},{input:E(({inputClass:v,id:p})=>[f(Et,{hours:e.hours,minutes:e.minutes,"label-class":v,class:"flex-shrink w-full","onUpdate:hours":r,"onUpdate:minutes":l,"input-id":p},null,8,["hours","minutes","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),Ot={class:"grid grid-cols-2 gap-2"},kt=O({__name:"TimePicker",props:{hours:{},minutes:{},labelClass:{}},emits:["update:hours","update:minutes"],setup(a,{emit:t}){const e=a,n=[...Array(24)].map((o,i)=>({text:("00"+i).slice(-2),value:i})),r=[...Array(12)].map((o,i)=>({text:("00"+5*i).slice(-2),value:5*i})),l=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),s=o=>t("update:hours",o),u=o=>t("update:minutes",o);return(o,i)=>(y(),I(J,{"label-class":e.labelClass},{label:E(()=>[F("span",null,N(c(l)),1)]),content:E(()=>[F("div",Ot,[f(P,{elements:c(n),selected:e.hours,onSelect:s},null,8,["elements","selected"]),f(P,{elements:c(r),selected:e.minutes,onSelect:u},null,8,["elements","selected"])])]),_:1},8,["label-class"]))}}),St=O({__name:"TimeField",props:{label:{},clearable:{type:Boolean},icon:{},hours:{},minutes:{},required:{type:Boolean}},emits:["clear","update:hours","update:minutes"],setup(a,{emit:t}){const e=a,n=()=>t("clear"),r=i=>t("update:hours",i),l=i=>t("update:minutes",i),s=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),u=new RegExp("[0-9]{2}:[0-9]{2}"),o=e.required?[i=>u.test(i)]:[];return(i,g)=>(y(),I(Q,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(s),onClear:n,rules:c(o)},{input:E(({inputClass:v,id:p})=>[f(kt,{hours:e.hours,minutes:e.minutes,"label-class":v,class:"flex-shrink w-full","onUpdate:hours":r,"onUpdate:minutes":l,"input-id":p},null,8,["hours","minutes","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),$t=O({__name:"MonthSelect",props:{month:{},compact:{type:Boolean}},emits:["update:month"],setup(a,{emit:t}){const e=a,n=rt({start:ut(new Date),end:ot(new Date)}).map(l=>({text:Y(l,e.compact?"MMM":"MMMM"),value:l.getMonth().toString()})),r=l=>t("update:month",Number(l));return(l,s)=>(y(),I(ue,{options:c(n),value:e.month.toString(),"label-class":"font-semibold","onUpdate:value":r},null,8,["options","value"]))}}),qt=O({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(a,{emit:t}){const e=a,n=oe.range(1970,2100).map(l=>({text:l.toString(),value:l.toString()})),r=l=>t("update:year",Number(l));return he(()=>{const l=document.getElementsByClassName("selected")[0];l==null||l.scrollIntoView()}),(l,s)=>(y(),I(ue,{options:c(n),value:e.year.toString(),"label-class":"font-semibold","onUpdate:value":r},null,8,["options","value"]))}}),It=O({__name:"CalendarHeader",props:{date:{},compact:{type:Boolean}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(a,{emit:t}){const e=a,n=()=>t("nextMonth"),r=()=>t("previousMonth"),l=u=>t("selectMonth",u),s=u=>t("selectYear",u);return(u,o)=>(y(),U("div",{class:j(("mergeClasses"in u?u.mergeClasses:c(V))("flex","items-center","justify-between"))},[f(A,{icon:c(ye),onClick:r,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),f($t,{month:e.date.getMonth(),compact:e.compact,"onUpdate:month":l,class:"!w-fit"},null,8,["month","compact"]),f(qt,{year:e.date.getFullYear(),"onUpdate:year":s,class:"!w-fit"},null,8,["year"]),f(A,{icon:c(_e),onClick:n,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),Ut=O({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(a){const t=a;return(e,n)=>{const r=A;return y(),I(r,{class:j(("mergeClasses"in e?e.mergeClasses:c(V))("btn-circle",c(vt)(t.day,t.date)?void 0:"opacity-50",c(Ve)(t.day,t.date)?"btn-primary":"btn-ghost","relative"))},{default:E(()=>[H(N(e.day.getDate())+" ",1)]),_:1},8,["class"])}}}),Ft={class:"text-base font-medium text-center"},xt=O({__name:"CalendarMonthView",props:{date:{},tagFilter:{},compact:{type:Boolean}},emits:["selectDate"],setup(a,{emit:t}){const e=a,n=ae({start:z(e.date,{weekStartsOn:1}),end:ve(z(e.date,{weekStartsOn:1}),6)}).map(s=>Y(s,e.compact?"EEEEE":"EEE")),r=x(()=>ae({start:z(lt(e.date),{weekStartsOn:1}),end:pt(ct(e.date),{weekStartsOn:1})})),l=s=>t("selectDate",s);return(s,u)=>(y(),U("div",{class:j(("mergeClasses"in s?s.mergeClasses:c(V))("grid","grid-cols-7","gap-y-1"))},[(y(!0),U(W,null,K(c(n),o=>(y(),U("div",Ft,N(o),1))),256)),(y(!0),U(W,null,K(c(r),o=>(y(),I(Ut,{key:"day-"+o,day:o,date:e.date,"tag-filter":e.tagFilter,onClick:()=>l(o)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),Nt=O({__name:"CalendarCard",props:{date:{},tagFilter:{},compact:{type:Boolean}},emits:["update:date"],setup(a,{emit:t}){const e=a,n=()=>t("update:date",Z(e.date,-1)),r=()=>t("update:date",Z(e.date,1)),l=o=>t("update:date",mt(e.date,o)),s=o=>t("update:date",ft(e.date,o)),u=o=>t("update:date",o);return(o,i)=>(y(),U("div",null,[f(It,{date:e.date,compact:e.compact,onPreviousMonth:n,onNextMonth:r,onSelectMonth:l,onSelectYear:s},null,8,["date","compact"]),f(xt,{date:e.date,"tag-filter":e.tagFilter,compact:e.compact,class:"pt-4",onSelectDate:u},null,8,["date","tag-filter","compact"])]))}}),Yt=O({__name:"DatePicker",props:{value:{},labelClass:{}},emits:["update:value"],setup(a,{emit:t}){const e=a,n=x(()=>Y(e.value,"dd/MM/yyyy")),r=l=>t("update:value",l);return(l,s)=>(y(),I(J,{"label-class":e.labelClass},{label:E(()=>[F("span",null,N(c(n)),1)]),content:E(()=>[f(Nt,{date:e.value,"onUpdate:date":r,compact:""},null,8,["date"])]),_:1},8,["label-class"]))}}),Tt=O({__name:"DateField",props:{label:{},clearable:{type:Boolean},icon:{},value:{},required:{type:Boolean}},emits:["clear","update:value"],setup(a,{emit:t}){const e=a,n=()=>t("clear"),r=o=>t("update:value",o),l=x(()=>Y(e.value,"dd/MM/yyyy")),s=new RegExp("[0-9]{2}/[0-9]{2}/[0-9]{4}"),u=e.required?[o=>s.test(o)]:[];return(o,i)=>(y(),I(Q,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(l),onClear:n,rules:c(u)},{input:E(({inputClass:g,id:v})=>[f(Yt,{value:e.value,"label-class":g,class:"flex-shrink w-full","onUpdate:value":r,"input-id":v},null,8,["value","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),ge=O({__name:"EventForm",props:{title:{},date:{},time:{},duration:{},frequency:{},frequencyMultiplier:{},tagId:{},description:{}},emits:["update:title","update:date","update:time","update:duration","update:frequency","update:frequency-multiplier","update:tagId","update:description"],setup(a,{expose:t,emit:e}){const n=a,r=X(),l=D(null),s=Object.values(L).map(h=>({text:Le[h],value:h})),u=h=>e("update:title",h),o=h=>e("update:date",h),i=h=>e("update:time",h),g=h=>e("update:duration",h),v=h=>e("update:frequency",h),p=h=>e("update:frequency-multiplier",Number(h)),M=h=>e("update:tagId",h),$=h=>e("update:description",h);return t({validate:()=>{var h;return(h=l.value)==null?void 0:h.validate()}}),(h,C)=>(y(),I(xe,{ref_key:"form",ref:l},{default:E(()=>[f(G,{label:"Event Name",placeholder:"Enter name...",value:n.title,icon:c(ne),"onUpdate:value":u,rules:[d=>!!d]},null,8,["value","icon","rules"]),f(Tt,{label:"Event Date",placeholder:"Enter date...",value:h.date,icon:c(Me),"onUpdate:value":o,required:""},null,8,["value","icon"]),f(St,{label:"Event Time",icon:c(be),hours:n.time[0],minutes:n.time[1],"onUpdate:hours":C[0]||(C[0]=d=>i([d,n.time[1]])),"onUpdate:minutes":C[1]||(C[1]=d=>i([n.time[0],d])),required:""},null,8,["icon","hours","minutes"]),f(Ct,{label:"Event Duration",icon:c(De),hours:n.duration[0],minutes:n.duration[1],"onUpdate:hours":C[2]||(C[2]=d=>g([d,n.duration[1]])),"onUpdate:minutes":C[3]||(C[3]=d=>g([n.duration[0],d])),required:""},null,8,["icon","hours","minutes"]),f(Ue,{label:"Frequency",icon:c(we),options:c(s),value:n.frequency,"onUpdate:value":v,rules:[d=>!!d]},null,8,["icon","options","value","rules"]),n.frequency!=="once"?(y(),I(G,{key:0,type:"number",label:"Frequency 'X'",placeholder:"Enter name...",value:String(n.frequencyMultiplier),icon:c(Ee),"onUpdate:value":p,rules:[d=>!!d]},null,8,["value","icon","rules"])):le("",!0),f(Pe,{tags:c(r).tagArray,selected:n.tagId,"onUpdate:selected":M,clearable:""},null,8,["tags","selected"]),f(G,{label:"Event Description",placeholder:"Enter description...",value:h.description,icon:c(ne),"onUpdate:value":$,clearable:"",onClear:C[4]||(C[4]=()=>$(""))},null,8,["value","icon"])]),_:1},512))}}),Ht=O({__name:"EditEvent",props:{event:{}},emits:["close"],setup(a,{emit:t}){const e=a,n=X(),r=D(null),l=x(()=>!!e.event),s=D(""),u=D(new Date),o=D([void 0,void 0]),i=D([1,0]),g=D(L.Once),v=D(1),p=D(""),M=D(""),$=()=>t("close"),T=()=>{var d;if(!e.event||!((d=r.value)!=null&&d.validate()))return;const C=me(pe(u.value),o.value);n.editEvent(e.event.id,{title:s.value,frequency:g.value,frequencyMultiplier:v.value,start:C,end:fe(C,i.value),tagId:p.value,description:M.value}),$()},h=()=>{e.event&&(n.removeEvent(e.event.id),$())};return Ce(()=>{if(e.event)if(s.value=e.event.title,u.value=e.event.start,o.value=[e.event.start.getHours(),e.event.start.getMinutes()],g.value=e.event.frequency,v.value=e.event.frequencyMultiplier,p.value=e.event.tagId,M.value=e.event.description??"",e.event.end){const C=bt(e.event.start,e.event.end);i.value=[C.hours,C.minutes]}else i.value=[0,0];else s.value="",u.value=new Date,o.value=[void 0,void 0],i.value=[1,0],g.value=L.Once,v.value=1,p.value="",M.value=""}),(C,d)=>{const b=A;return y(),I(de,{"is-opened":c(l),onClose:$},{title:E(()=>{var w;return[H("Update event '"+N((w=e.event)==null?void 0:w.title)+"'",1)]}),default:E(()=>[f(ge,{title:c(s),"onUpdate:title":d[0]||(d[0]=w=>k(s)?s.value=w:null),date:c(u),"onUpdate:date":d[1]||(d[1]=w=>k(u)?u.value=w:null),time:c(o),"onUpdate:time":d[2]||(d[2]=w=>k(o)?o.value=w:null),duration:c(i),"onUpdate:duration":d[3]||(d[3]=w=>k(i)?i.value=w:null),frequency:c(g),"onUpdate:frequency":d[4]||(d[4]=w=>k(g)?g.value=w:null),"frequency-multiplier":c(v),"onUpdate:frequencyMultiplier":d[5]||(d[5]=w=>k(v)?v.value=w:null),"tag-id":c(p),"onUpdate:tagId":d[6]||(d[6]=w=>k(p)?p.value=w:null),description:c(M),"onUpdate:description":d[7]||(d[7]=w=>k(M)?M.value=w:null),ref_key:"form",ref:r},null,8,["title","date","time","duration","frequency","frequency-multiplier","tag-id","description"])]),actions:E(()=>[f(b,{class:"btn-error ml-2",onClick:h},{default:E(()=>[H("Delete")]),_:1}),f(b,{class:"btn-success ml-2",onClick:T},{default:E(()=>[H("Save")]),_:1})]),_:1},8,["is-opened"])}}}),Bt={class:"menu"},Rt=F("div",{class:"text-center font-light py-4"},"No event for this day...",-1),zt=O({__name:"CalendarEvents",props:{day:{},tagFilter:{}},setup(a){const t=a,e=X(),n=D(null),r=x(()=>oe(e.getEventsOfDay(t.day)).chain().filter(s=>!t.tagFilter||s.tagId===t.tagFilter).sortBy([s=>s.start.getHours(),s=>s.start.getMinutes()]).map(s=>({event:s,tag:e.tags.get(s.tagId)})).value()),l=s=>n.value=s;return(s,u)=>(y(),U("div",null,[c(r).length>0?(y(),U(W,{key:0},[F("ul",Bt,[(y(!0),U(W,null,K(c(r),({event:o,tag:i})=>(y(),U("li",{key:"event-"+o.id},[f(Mt,Oe(o,{tag:i,onClick:g=>l(o),class:("mergeClasses"in s?s.mergeClasses:c(V))("px-6","rounded-box","mb-1")}),null,16,["tag","onClick","class"])]))),128))]),f(Ht,{event:c(n),onClose:u[0]||(u[0]=()=>l(null))},null,8,["event"])],64)):ke(s.$slots,"no-event",{key:1},()=>[Rt])]))}}),Kt=O({__name:"CreateEvent",props:{date:{}},setup(a){const t=a,e=X(),{date:n}=Se(t),r=D(!1),l=D(null),s=D(""),u=D((n==null?void 0:n.value)??new Date),o=D([new Date().getHours()+1,0]),i=D([1,0]),g=D(L.Once),v=D(1),p=D(""),M=D(""),$=()=>r.value=!0,T=()=>r.value=!1,h=()=>{var b;if(!((b=l.value)!=null&&b.validate()))return;const d=me(pe(u.value),o.value);e.newEvent({title:s.value,frequency:g.value,frequencyMultiplier:v.value,start:d,end:fe(d,i.value),tagId:p.value,description:M.value}),T(),C()},C=()=>{s.value="",u.value=new Date,o.value=[void 0,void 0],i.value=[1,0],g.value=L.Once,v.value=1,p.value="",M.value=""};return $e([n],()=>{u.value=(n==null?void 0:n.value)??new Date}),(d,b)=>{const w=A;return y(),U("div",null,[f(We,{icon:c(qe),class:"-bottom-4 right-4",onClick:$},null,8,["icon"]),f(de,{"is-opened":c(r),onClose:T},{title:E(()=>[H("Create a new event")]),default:E(()=>[f(ge,{title:c(s),"onUpdate:title":b[0]||(b[0]=S=>k(s)?s.value=S:null),date:c(u),"onUpdate:date":b[1]||(b[1]=S=>k(u)?u.value=S:null),time:c(o),"onUpdate:time":b[2]||(b[2]=S=>k(o)?o.value=S:null),duration:c(i),"onUpdate:duration":b[3]||(b[3]=S=>k(i)?i.value=S:null),frequency:c(g),"onUpdate:frequency":b[4]||(b[4]=S=>k(g)?g.value=S:null),"frequency-multiplier":c(v),"onUpdate:frequencyMultiplier":b[5]||(b[5]=S=>k(v)?v.value=S:null),"tag-id":c(p),"onUpdate:tagId":b[6]||(b[6]=S=>k(p)?p.value=S:null),description:c(M),"onUpdate:description":b[7]||(b[7]=S=>k(M)?M.value=S:null),ref_key:"form",ref:l},null,8,["title","date","time","duration","frequency","frequency-multiplier","tag-id","description"])]),actions:E(()=>[f(w,{class:"btn-success",onClick:h},{default:E(()=>[H("Create")]),_:1})]),_:1},8,["is-opened"])])}}});export{Nt as _,zt as a,Kt as b};
