import{X as l,x as f}from"./entry.ff782d29.js";import{v as g}from"./PageHeading.d4020c78.js";import{r as u,t as h,f as y,p as c,s as m,e as d}from"./index.504780f4.js";function w(t){u(1,arguments);var e=h(t);return e.setHours(23,59,59,999),e}var n=(t=>(t.Once="once",t.Daily="daily",t.Weekly="weekly",t.Monthly="monthly",t.Yearly="yearly",t))(n||{});const i=t=>y(t,"yyyy-MM-dd HH:mm"),o=t=>c(t,"yyyy-MM-dd HH:mm",new Date),E=(t,e)=>{const s=o(t.start),a=o(t.end??t.start);if(e<m(s))return!1;switch(t.frequency){case n.Once:return w(a)>=e;case n.Daily:return!0;case n.Weekly:return d({start:s,end:a}).some(r=>r.getDay()===e.getDay());case n.Monthly:return d({start:s,end:a}).some(r=>r.getDate()===e.getDate());case n.Yearly:return d({start:s,end:a}).some(r=>r.getDate()===e.getDate()&&r.getMonth()===e.getMonth());default:return!1}},M=l("events",{state:()=>({events:new Map,tags:new Map}),getters:{tagArray:t=>[...t.tags.values()]},actions:{getEventsOfDay(t){return[...this.events.values()].filter(e=>E(e,t)).map(e=>({id:e.id,frequency:e.frequency,start:o(e.start),title:e.title,end:e.end?o(e.end):void 0,tagId:e.tagId}))},newEvent(t){const e={id:g(),title:t.title,frequency:t.frequency,start:i(t.start),end:t.end?i(t.end):void 0,tagId:t.tagId};this.events.set(e.id,e)},editEvent(t,e){const s=this.events.get(t);if(!s)throw new Error(`[Events] Key ${t} not found`);const a={id:t,title:e.title??s.title,frequency:e.frequency??s.frequency,start:e.start?i(e.start):s.start,end:e.end?i(e.end):s.end,tagId:e.tagId??s.tagId};this.events.set(t,a)},removeEvent(t){if(!this.events.delete(t))throw new Error(`[Events] Key ${t} not found`)},newTag(t,e,s){if(f.some([...this.tags.values()],r=>r.color===e))throw new Error(`[Events] Tag with color ${e} already exists`);const a={id:g(),title:t,color:e,icon:s};this.tags.set(a.id,a)},removeTag(t){this.tags.delete(t)},editTag(t,e,s,a){if(!this.tags.has(t))throw new Error(`[Events] Tag with ID ${t} not found`);if(f.some([...this.tags.values()],r=>r.id!==t&&r.color===s))throw new Error(`[Events] Tag with color ${s} already exists`);this.tags.set(t,{id:t,color:s,title:e,icon:a})}}});export{n as F,w as e,M as u};
