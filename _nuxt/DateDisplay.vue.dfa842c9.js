import{d as x}from"./PageHeading.25c30acd.js";import{f as y}from"./index.f3feb017.js";import{_ as g}from"./MultilineField.vue.5a4a5fae.js";import{g as _,v as $,o as c,c as l,b as m,h as p,x as b,T as I,S as k,s as M,F as J,r as S,l as A,a as E,t as w}from"./entry.5564aef3.js";const d=t=>y(t,"yyyy-MM-dd"),B=x("journal",{state:()=>({entries:new Map}),actions:{getEntries(t){return this.entries.get(d(t))},newEntry(t,n){const e=d(t);this.entries.has(e)||this.entries.set(e,[]),this.entries.get(e).push(n)},editEntry(t,n,e){const r=this.entries.get(d(t));if(!r)throw new Error(`[Journal] Key ${t} not found`);if(r[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);r.splice(n,1,e)},removeEntry(t,n){const e=this.entries.get(d(t));if(!e)throw new Error(`[Journal] Key ${t} not found`);if(e[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);e.splice(n,1)}}}),N={class:"m-0"},U=_({__name:"Entry",props:{entry:{}},emits:["update:entry"],setup(t,{emit:n}){const e=t,r=s=>n("update:entry",s.trim()),a=$.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",N,[m(g,{value:e.entry,placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i},null,8,["value","onInput"])]))}}),D={class:"m-0"},K=_({__name:"AddEntry",emits:["input"],setup(t,{emit:n}){const e=b(null),r=s=>{n("input",s.trim()),I(()=>{e.value.reset()})},a=$.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",D,[m(g,{value:"",placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i,ref_key:"input",ref:e},null,8,["onInput"])]))}}),F={class:"list-disc marker:text-base-300 pl-8"},R=_({__name:"EntryList",props:{date:{}},setup(t){const n=t,{date:e}=k(n),r=B(),a=M(()=>r.getEntries(e.value));function i(o,u){u?r.editEntry(e.value,o,u):r.removeEntry(e.value,o)}function s(o){o&&r.newEntry(e.value,o)}return(o,u)=>(c(),l("ul",F,[(c(!0),l(J,null,S(p(a),(f,h)=>(c(),A(U,{entry:f,"onUpdate:entry":v=>i(h,v),key:`entry-${h}`},null,8,["entry","onUpdate:entry"]))),128)),m(K,{onInput:u[0]||(u[0]=f=>s(f))})]))}}),L={class:"text-secondary text-xl font-bold leading-4"},T={class:"text-secondary text-2xl font-extrabold"},V=_({__name:"DateDisplay",props:{date:{}},setup(t){const n=t;return(e,r)=>(c(),l("div",null,[E("h3",L,w(p(y)(n.date,"MMM d")),1),E("h2",T,w(p(y)(n.date,"EEEE")),1)]))}});export{V as _,R as a};
