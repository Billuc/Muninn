import{g as O,h as x,o as y,c as F,a as Y,t as N,j as c,i as $,z as he,n as P,m as A,w as D,b as f,x as oe,l as _e,S as ye,A as B,T as Me,d as q,M as V,N as z,r as w,I as ee,R as be,U as De,V as we,W as Ee,L as Oe,v as S,X as Ce,B as Se,Y as ke,Z as Ie,K as $e}from"./entry.1ee96a20.js";import{a as Fe,c as W,b as K,e as ue,_ as Ue}from"./Tag.2e4b716b.js";import{r as h,t as d,a as k,_ as Ye,b as ie,g as ce,s as te,c as ae,f as T,e as ne}from"./index.224b8d39.js";import{_ as Z,a as se,b as xe,c as de}from"./InputField.vue.8624c333.js";import{m as Ne,a as Te,e as qe,p as He,u as j,F as L}from"./eventStore.870237db.js";import{a as ve,i as Re}from"./index.ed260b32.js";import{_ as Be}from"./FABButton.vue.a66a4a04.js";import{_ as Le}from"./TagSelecter.vue.4089d52a.js";function G(n,t){h(2,arguments);var e=d(n),a=k(t);if(isNaN(a))return new Date(NaN);if(!a)return e;var r=e.getDate(),l=new Date(e.getTime());l.setMonth(e.getMonth()+a+1,0);var s=l.getDate();return r>=s?l:(e.setFullYear(l.getFullYear(),l.getMonth(),r),e)}function R(n,t){if(h(2,arguments),!t||Ye(t)!=="object")return new Date(NaN);var e=t.years?k(t.years):0,a=t.months?k(t.months):0,r=t.weeks?k(t.weeks):0,l=t.days?k(t.days):0,s=t.hours?k(t.hours):0,u=t.minutes?k(t.minutes):0,o=t.seconds?k(t.seconds):0,i=d(n),g=a||e?G(i,a+e*12):i,m=l||r?ve(g,l+r*7):g,p=u+s*60,C=o+p*60,U=C*1e3,_=new Date(m.getTime()+U);return _}var Ae=36e5;function Ve(n,t){h(2,arguments);var e=k(t);return ie(n,e*Ae)}function X(n,t){var e,a,r,l,s,u,o,i;h(1,arguments);var g=ce(),m=k((e=(a=(r=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&a!==void 0?a:(o=g.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&e!==void 0?e:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=d(n),C=p.getDay(),U=(C<m?7:0)+C-m;return p.setDate(p.getDate()-U),p.setHours(0,0,0,0),p}var We=864e5;function Pe(n,t){h(2,arguments);var e=te(n),a=te(t),r=e.getTime()-ae(e),l=a.getTime()-ae(a);return Math.round((r-l)/We)}var je=6e4;function Xe(n,t){h(2,arguments);var e=k(t);return ie(n,e*je)}function H(n,t){h(2,arguments);var e=d(n),a=d(t),r=e.getTime()-a.getTime();return r<0?-1:r>0?1:r}function ze(n,t){h(2,arguments);var e=d(n),a=d(t),r=e.getFullYear()-a.getFullYear(),l=e.getMonth()-a.getMonth();return r*12+l}function Ge(n,t){h(2,arguments);var e=d(n),a=d(t);return e.getFullYear()-a.getFullYear()}function re(n,t){var e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Ke(n,t){h(2,arguments);var e=d(n),a=d(t),r=re(e,a),l=Math.abs(Pe(e,a));e.setDate(e.getDate()-r*l);var s=+(re(e,a)===-r),u=r*(l-s);return u===0?0:u}function J(n,t){return h(2,arguments),d(n).getTime()-d(t).getTime()}var le={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Ze="trunc";function Q(n){return n?le[n]:le[Ze]}function Je(n,t,e){h(2,arguments);var a=J(n,t)/Ne;return Q(e==null?void 0:e.roundingMethod)(a)}function Qe(n,t,e){h(2,arguments);var a=J(n,t)/Te;return Q(e==null?void 0:e.roundingMethod)(a)}function et(n){h(1,arguments);var t=d(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function tt(n){h(1,arguments);var t=d(n);return qe(t).getTime()===et(t).getTime()}function at(n,t){h(2,arguments);var e=d(n),a=d(t),r=H(e,a),l=Math.abs(ze(e,a)),s;if(l<1)s=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*l);var u=H(e,a)===-r;tt(d(n))&&l===1&&H(n,a)===1&&(u=!1),s=r*(l-Number(u))}return s===0?0:s}function nt(n,t,e){h(2,arguments);var a=J(n,t)/1e3;return Q(e==null?void 0:e.roundingMethod)(a)}function st(n,t){h(2,arguments);var e=d(n),a=d(t),r=H(e,a),l=Math.abs(Ge(e,a));e.setFullYear(1584),a.setFullYear(1584);var s=H(e,a)===-r,u=r*(l-Number(s));return u===0?0:u}function rt(n){h(1,arguments);var t=n||{},e=d(t.start),a=d(t.end),r=a.getTime(),l=[];if(!(e.getTime()<=r))throw new RangeError("Invalid interval");var s=e;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=r;)l.push(d(s)),s.setMonth(s.getMonth()+1);return l}function lt(n){h(1,arguments);var t=d(n);return t.setDate(1),t.setHours(0,0,0,0),t}function ot(n){h(1,arguments);var t=d(n),e=t.getFullYear();return t.setFullYear(e+1,0,0),t.setHours(23,59,59,999),t}function ut(n){h(1,arguments);var t=d(n),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function it(n){h(1,arguments);var t=d(n),e=t.getFullYear(),a=t.getMonth(),r=new Date(0);return r.setFullYear(e,a+1,0),r.setHours(0,0,0,0),r.getDate()}function ct(n){h(1,arguments);var t=d(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function dt(n){h(1,arguments);var t=d(n.start),e=d(n.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(e.getTime()))throw new RangeError("End Date is invalid");var a={};a.years=Math.abs(st(e,t));var r=H(e,t),l=R(t,{years:r*a.years});a.months=Math.abs(at(e,l));var s=R(l,{months:r*a.months});a.days=Math.abs(Ke(e,s));var u=R(s,{days:r*a.days});a.hours=Math.abs(Je(e,u));var o=R(u,{hours:r*a.hours});a.minutes=Math.abs(Qe(e,o));var i=R(o,{minutes:r*a.minutes});return a.seconds=Math.abs(nt(e,i)),a}function vt(n,t){h(2,arguments);var e=d(n),a=d(t);return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()}function mt(n,t){var e,a,r,l,s,u,o,i;h(1,arguments);var g=ce(),m=k((e=(a=(r=(l=t==null?void 0:t.weekStartsOn)!==null&&l!==void 0?l:t==null||(s=t.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&a!==void 0?a:(o=g.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&e!==void 0?e:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var p=d(n),C=p.getDay(),U=(C<m?-7:0)+6-(C-m);return p.setHours(0,0,0,0),p.setDate(p.getDate()+U),p}function pt(n,t){h(2,arguments);var e=d(n),a=k(t),r=e.getFullYear(),l=e.getDate(),s=new Date(0);s.setFullYear(r,a,15),s.setHours(0,0,0,0);var u=it(s);return e.setMonth(a,Math.min(l,u)),e}function ft(n,t){h(2,arguments);var e=d(n),a=k(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(a),e)}const gt={class:"flex-grow"},ht={class:"text-xs font-light leading-3"},_t={class:"focus:outline-none text-lg font-medium leading-5"},yt={class:"text-xs"},Mt=O({__name:"CalendarEvent",props:{start:{},end:{},title:{},description:{},tag:{}},setup(n){const t=n,e=x(()=>{if(!t.start&&!t.end)return"Whole day";if(t.start&&!t.end)return T(t.start,"H:mm");if(t.start&&t.end)return`${T(t.start,"H:mm")} - ${T(t.end,"H:mm")}`});return(a,r)=>(y(),F("div",{class:P(("mergeClasses"in a?a.mergeClasses:c(A))("border-b","last-of-type:border-b-0","p-1","border-base-300","border-dashed","cursor-pointer","flex","items-center","bg-base-300"))},[Y("div",gt,[Y("p",ht,N(c(e)),1),Y("p",_t,N(t.title),1),Y("p",yt,N(t.description),1)]),t.tag?(y(),$(Fe,{key:0,icon:t.tag.icon,color:t.tag.color},null,8,["icon","color"])):he("",!0)],2))}});function me(n){return T(n,"yyyy-MM-dd")}function bt(n,t){return dt({start:n,end:t})}function Dt(n){return He(n,"yyyy-MM-dd",new Date)}function pe(n,t){const e=Dt(n);return t[0]&&e.setHours(t[0]),t[1]&&e.setMinutes(t[1]),e}function fe(n,t){let e=Ve(n,t[0]??0);return e=Xe(e,t[1]??0),e}const wt={class:"grid grid-cols-2 gap-2"},Et=O({__name:"DurationPicker",props:{hours:{},minutes:{},labelClass:{}},emits:["update:hours","update:minutes"],setup(n,{emit:t}){const e=n,a=[...Array(24)].map((o,i)=>({text:("00"+i).slice(-2),value:i})),r=[...Array(12)].map((o,i)=>({text:("00"+5*i).slice(-2),value:5*i})),l=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),s=o=>t("update:hours",o),u=o=>t("update:minutes",o);return(o,i)=>(y(),$(K,{"label-class":e.labelClass},{label:D(()=>[Y("span",null,N(c(l)),1)]),content:D(()=>[Y("div",wt,[f(W,{elements:c(a),selected:e.hours,onSelect:s},null,8,["elements","selected"]),f(W,{elements:c(r),selected:e.minutes,onSelect:u},null,8,["elements","selected"])])]),_:1},8,["label-class"]))}}),Ot=O({__name:"DurationField",props:{label:{},clearable:{type:Boolean},icon:{},hours:{},minutes:{},required:{type:Boolean}},emits:["clear","update:hours","update:minutes"],setup(n,{emit:t}){const e=n,a=()=>t("clear"),r=i=>t("update:hours",i),l=i=>t("update:minutes",i),s=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),u=new RegExp("[0-9]{2}:[0-9]{2}"),o=e.required?[i=>u.test(i)]:[];return(i,g)=>(y(),$(Z,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(s),onClear:a,rules:c(o)},{input:D(({inputClass:m,id:p})=>[f(Et,{hours:e.hours,minutes:e.minutes,"label-class":m,class:"flex-shrink w-full","onUpdate:hours":r,"onUpdate:minutes":l,"input-id":p},null,8,["hours","minutes","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),Ct={class:"grid grid-cols-2 gap-2"},St=O({__name:"TimePicker",props:{hours:{},minutes:{},labelClass:{}},emits:["update:hours","update:minutes"],setup(n,{emit:t}){const e=n,a=[...Array(24)].map((o,i)=>({text:("00"+i).slice(-2),value:i})),r=[...Array(12)].map((o,i)=>({text:("00"+5*i).slice(-2),value:5*i})),l=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),s=o=>t("update:hours",o),u=o=>t("update:minutes",o);return(o,i)=>(y(),$(K,{"label-class":e.labelClass},{label:D(()=>[Y("span",null,N(c(l)),1)]),content:D(()=>[Y("div",Ct,[f(W,{elements:c(a),selected:e.hours,onSelect:s},null,8,["elements","selected"]),f(W,{elements:c(r),selected:e.minutes,onSelect:u},null,8,["elements","selected"])])]),_:1},8,["label-class"]))}}),kt=O({__name:"TimeField",props:{label:{},clearable:{type:Boolean},icon:{},hours:{},minutes:{},required:{type:Boolean}},emits:["clear","update:hours","update:minutes"],setup(n,{emit:t}){const e=n,a=()=>t("clear"),r=i=>t("update:hours",i),l=i=>t("update:minutes",i),s=x(()=>(e.hours===void 0?"--":("00"+e.hours).slice(-2))+":"+(e.minutes===void 0?"--":("00"+e.minutes).slice(-2))),u=new RegExp("[0-9]{2}:[0-9]{2}"),o=e.required?[i=>u.test(i)]:[];return(i,g)=>(y(),$(Z,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(s),onClear:a,rules:c(o)},{input:D(({inputClass:m,id:p})=>[f(St,{hours:e.hours,minutes:e.minutes,"label-class":m,class:"flex-shrink w-full","onUpdate:hours":r,"onUpdate:minutes":l,"input-id":p},null,8,["hours","minutes","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),It=O({__name:"MonthSelect",props:{month:{},compact:{type:Boolean}},emits:["update:month"],setup(n,{emit:t}){const e=n,a=rt({start:ut(new Date),end:ot(new Date)}).map(l=>({text:T(l,e.compact?"MMM":"MMMM"),value:l.getMonth().toString()})),r=l=>t("update:month",Number(l));return(l,s)=>(y(),$(ue,{options:c(a),value:e.month.toString(),"label-class":"font-semibold","onUpdate:value":r},null,8,["options","value"]))}}),$t=O({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(n,{emit:t}){const e=n,a=oe.range(1970,2100).map(l=>({text:l.toString(),value:l.toString()})),r=l=>t("update:year",Number(l));return _e(()=>{const l=document.getElementsByClassName("selected")[0];l==null||l.scrollIntoView()}),(l,s)=>(y(),$(ue,{options:c(a),value:e.year.toString(),"label-class":"font-semibold","onUpdate:value":r},null,8,["options","value"]))}}),Ft=O({__name:"CalendarHeader",props:{date:{},compact:{type:Boolean}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(n,{emit:t}){const e=n,a=()=>t("nextMonth"),r=()=>t("previousMonth"),l=u=>t("selectMonth",u),s=u=>t("selectYear",u);return(u,o)=>(y(),F("div",{class:P(("mergeClasses"in u?u.mergeClasses:c(A))("flex","items-center","justify-between"))},[f(B,{icon:c(ye),onClick:r,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),f(It,{month:e.date.getMonth(),compact:e.compact,"onUpdate:month":l,class:"!w-fit"},null,8,["month","compact"]),f($t,{year:e.date.getFullYear(),"onUpdate:year":s,class:"!w-fit"},null,8,["year"]),f(B,{icon:c(Me),onClick:a,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),Ut=O({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(n){const t=n;return(e,a)=>{const r=B;return y(),$(r,{class:P(("mergeClasses"in e?e.mergeClasses:c(A))("btn-circle",c(vt)(t.day,t.date)?void 0:"opacity-50",c(Re)(t.day,t.date)?"btn-primary":"btn-ghost","relative"))},{default:D(()=>[q(N(e.day.getDate())+" ",1)]),_:1},8,["class"])}}}),Yt={class:"text-base font-medium text-center"},xt=O({__name:"CalendarMonthView",props:{date:{},tagFilter:{},compact:{type:Boolean}},emits:["selectDate"],setup(n,{emit:t}){const e=n,a=ne({start:X(e.date,{weekStartsOn:1}),end:ve(X(e.date,{weekStartsOn:1}),6)}).map(s=>T(s,e.compact?"EEEEE":"EEE")),r=x(()=>ne({start:X(lt(e.date),{weekStartsOn:1}),end:mt(ct(e.date),{weekStartsOn:1})})),l=s=>t("selectDate",s);return(s,u)=>(y(),F("div",{class:P(("mergeClasses"in s?s.mergeClasses:c(A))("grid","grid-cols-7","gap-y-1"))},[(y(!0),F(V,null,z(c(a),o=>(y(),F("div",Yt,N(o),1))),256)),(y(!0),F(V,null,z(c(r),o=>(y(),$(Ut,{key:"day-"+o,day:o,date:e.date,"tag-filter":e.tagFilter,onClick:()=>l(o)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),Nt=O({__name:"CalendarCard",props:{date:{},tagFilter:{},compact:{type:Boolean}},emits:["update:date"],setup(n,{emit:t}){const e=n,a=()=>t("update:date",G(e.date,-1)),r=()=>t("update:date",G(e.date,1)),l=o=>t("update:date",pt(e.date,o)),s=o=>t("update:date",ft(e.date,o)),u=o=>t("update:date",o);return(o,i)=>(y(),F("div",null,[f(Ft,{date:e.date,compact:e.compact,onPreviousMonth:a,onNextMonth:r,onSelectMonth:l,onSelectYear:s},null,8,["date","compact"]),f(xt,{date:e.date,"tag-filter":e.tagFilter,compact:e.compact,class:"pt-4",onSelectDate:u},null,8,["date","tag-filter","compact"])]))}}),Tt=O({__name:"DatePicker",props:{value:{},labelClass:{}},emits:["update:value"],setup(n,{emit:t}){const e=n,a=x(()=>T(e.value,"dd/MM/yyyy")),r=l=>t("update:value",l);return(l,s)=>(y(),$(K,{"label-class":e.labelClass},{label:D(()=>[Y("span",null,N(c(a)),1)]),content:D(()=>[f(Nt,{date:e.value,"onUpdate:date":r,compact:""},null,8,["date"])]),_:1},8,["label-class"]))}}),qt=O({__name:"DateField",props:{label:{},clearable:{type:Boolean},icon:{},value:{},required:{type:Boolean}},emits:["clear","update:value"],setup(n,{emit:t}){const e=n,a=()=>t("clear"),r=o=>t("update:value",o),l=x(()=>T(e.value,"dd/MM/yyyy")),s=new RegExp("[0-9]{2}/[0-9]{2}/[0-9]{4}"),u=e.required?[o=>s.test(o)]:[];return(o,i)=>(y(),$(Z,{icon:e.icon,clearable:e.clearable,label:e.label,value:c(l),onClear:a,rules:c(u)},{input:D(({inputClass:g,id:m})=>[f(Tt,{value:e.value,"label-class":g,class:"flex-shrink w-full","onUpdate:value":r,"input-id":m},null,8,["value","label-class","input-id"])]),_:1},8,["icon","clearable","label","value","rules"]))}}),ge=O({__name:"EventForm",props:{title:{},date:{},time:{},duration:{},frequency:{},tagId:{},description:{}},emits:["update:title","update:date","update:time","update:duration","update:frequency","update:tagId","update:description"],setup(n,{expose:t,emit:e}){const a=n,r=j(),l=w(null),s=Object.entries(L).map(([_,M])=>({text:_,value:M})),u=_=>e("update:title",_),o=_=>e("update:date",_),i=_=>e("update:time",_),g=_=>e("update:duration",_),m=_=>e("update:frequency",_),p=_=>e("update:tagId",_),C=_=>e("update:description",_);return t({validate:()=>{var _;return(_=l.value)==null?void 0:_.validate()}}),(_,M)=>(y(),$(xe,{ref_key:"form",ref:l},{default:D(()=>[f(se,{label:"Event Name",placeholder:"Enter name...",value:a.title,icon:c(ee),"onUpdate:value":u,rules:[v=>!!v]},null,8,["value","icon","rules"]),f(qt,{label:"Event Date",placeholder:"Enter date...",value:_.date,icon:c(be),"onUpdate:value":o,required:""},null,8,["value","icon"]),f(kt,{label:"Event Time",icon:c(De),hours:a.time[0],minutes:a.time[1],"onUpdate:hours":M[0]||(M[0]=v=>i([v,a.time[1]])),"onUpdate:minutes":M[1]||(M[1]=v=>i([a.time[0],v])),required:""},null,8,["icon","hours","minutes"]),f(Ot,{label:"Event Duration",icon:c(we),hours:a.duration[0],minutes:a.duration[1],"onUpdate:hours":M[2]||(M[2]=v=>g([v,a.duration[1]])),"onUpdate:minutes":M[3]||(M[3]=v=>g([a.duration[0],v])),required:""},null,8,["icon","hours","minutes"]),f(Ue,{label:"Frequency",icon:c(Ee),options:c(s),value:_.frequency,"onUpdate:value":m,rules:[v=>!!v]},null,8,["icon","options","value","rules"]),f(Le,{tags:c(r).tagArray,selected:a.tagId,"onUpdate:selected":p,clearable:""},null,8,["tags","selected"]),f(se,{label:"Event Description",placeholder:"Enter description...",value:_.description,icon:c(ee),"onUpdate:value":C,clearable:"",onClear:M[4]||(M[4]=()=>C(""))},null,8,["value","icon"])]),_:1},512))}}),Ht=O({__name:"EditEvent",props:{event:{}},emits:["close"],setup(n,{emit:t}){const e=n,a=j(),r=w(null),l=x(()=>!!e.event),s=w(""),u=w(new Date),o=w([void 0,void 0]),i=w([1,0]),g=w(L.Once),m=w(""),p=w(""),C=()=>t("close"),U=()=>{var v;if(!e.event||!((v=r.value)!=null&&v.validate()))return;const M=pe(me(u.value),o.value);a.editEvent(e.event.id,{title:s.value,frequency:g.value,start:M,end:fe(M,i.value),tagId:m.value,description:p.value}),C()},_=()=>{e.event&&(a.removeEvent(e.event.id),C())};return Oe(()=>{if(e.event)if(s.value=e.event.title,u.value=e.event.start,o.value=[e.event.start.getHours(),e.event.start.getMinutes()],g.value=e.event.frequency,m.value=e.event.tagId,p.value=e.event.description??"",e.event.end){const M=bt(e.event.start,e.event.end);i.value=[M.hours,M.minutes]}else i.value=[0,0];else s.value="",u.value=new Date,o.value=[void 0,void 0],i.value=[1,0],g.value=L.Once,m.value="",p.value=""}),(M,v)=>{const b=B;return y(),$(de,{"is-opened":c(l),onClose:C},{title:D(()=>{var E;return[q("Update event '"+N((E=e.event)==null?void 0:E.title)+"'",1)]}),default:D(()=>[f(ge,{title:c(s),"onUpdate:title":v[0]||(v[0]=E=>S(s)?s.value=E:null),date:c(u),"onUpdate:date":v[1]||(v[1]=E=>S(u)?u.value=E:null),time:c(o),"onUpdate:time":v[2]||(v[2]=E=>S(o)?o.value=E:null),duration:c(i),"onUpdate:duration":v[3]||(v[3]=E=>S(i)?i.value=E:null),frequency:c(g),"onUpdate:frequency":v[4]||(v[4]=E=>S(g)?g.value=E:null),"tag-id":c(m),"onUpdate:tagId":v[5]||(v[5]=E=>S(m)?m.value=E:null),description:c(p),"onUpdate:description":v[6]||(v[6]=E=>S(p)?p.value=E:null),ref_key:"form",ref:r},null,8,["title","date","time","duration","frequency","tag-id","description"])]),actions:D(()=>[f(b,{class:"btn-error ml-2",onClick:_},{default:D(()=>[q("Delete")]),_:1}),f(b,{class:"btn-success ml-2",onClick:U},{default:D(()=>[q("Save")]),_:1})]),_:1},8,["is-opened"])}}}),Rt={class:"menu"},Bt=Y("div",{class:"text-center font-light py-4"},"No event for this day...",-1),Gt=O({__name:"CalendarEvents",props:{day:{},tagFilter:{}},setup(n){const t=n,e=j(),a=w(null),r=x(()=>oe(e.getEventsOfDay(t.day)).chain().filter(s=>!t.tagFilter||s.tagId===t.tagFilter).sortBy([s=>s.start.getHours(),s=>s.start.getMinutes()]).map(s=>({event:s,tag:e.tags.get(s.tagId)})).value()),l=s=>a.value=s;return(s,u)=>(y(),F("div",null,[c(r).length>0?(y(),F(V,{key:0},[Y("ul",Rt,[(y(!0),F(V,null,z(c(r),({event:o,tag:i})=>(y(),F("li",{key:"event-"+o.id},[f(Mt,Ce(o,{tag:i,onClick:g=>l(o),class:("mergeClasses"in s?s.mergeClasses:c(A))("px-6","rounded-box","mb-1")}),null,16,["tag","onClick","class"])]))),128))]),f(Ht,{event:c(a),onClose:u[0]||(u[0]=()=>l(null))},null,8,["event"])],64)):Se(s.$slots,"no-event",{key:1},()=>[Bt])]))}}),Kt=O({__name:"CreateEvent",props:{date:{}},setup(n){const t=n,e=j(),{date:a}=ke(t),r=w(!1),l=w(null),s=w(""),u=w((a==null?void 0:a.value)??new Date),o=w([new Date().getHours()+1,0]),i=w([1,0]),g=w(L.Once),m=w(""),p=w(""),C=()=>r.value=!0,U=()=>r.value=!1,_=()=>{var b;if(!((b=l.value)!=null&&b.validate()))return;const v=pe(me(u.value),o.value);e.newEvent({title:s.value,frequency:g.value,start:v,end:fe(v,i.value),tagId:m.value,description:p.value}),U(),M()},M=()=>{s.value="",u.value=new Date,o.value=[void 0,void 0],i.value=[1,0],g.value=L.Once,m.value="",p.value=""};return Ie([a],()=>{u.value=(a==null?void 0:a.value)??new Date}),(v,b)=>{const E=B;return y(),F("div",null,[f(Be,{icon:c($e),class:"-bottom-4 right-4",onClick:C},null,8,["icon"]),f(de,{"is-opened":c(r),onClose:U},{title:D(()=>[q("Create a new event")]),default:D(()=>[f(ge,{title:c(s),"onUpdate:title":b[0]||(b[0]=I=>S(s)?s.value=I:null),date:c(u),"onUpdate:date":b[1]||(b[1]=I=>S(u)?u.value=I:null),time:c(o),"onUpdate:time":b[2]||(b[2]=I=>S(o)?o.value=I:null),duration:c(i),"onUpdate:duration":b[3]||(b[3]=I=>S(i)?i.value=I:null),frequency:c(g),"onUpdate:frequency":b[4]||(b[4]=I=>S(g)?g.value=I:null),"tag-id":c(m),"onUpdate:tagId":b[5]||(b[5]=I=>S(m)?m.value=I:null),description:c(p),"onUpdate:description":b[6]||(b[6]=I=>S(p)?p.value=I:null),ref_key:"form",ref:l},null,8,["title","date","time","duration","frequency","tag-id","description"])]),actions:D(()=>[f(E,{class:"btn-success",onClick:_},{default:D(()=>[q("Create")]),_:1})]),_:1},8,["is-opened"])])}}});export{Nt as _,Gt as a,Kt as b};
