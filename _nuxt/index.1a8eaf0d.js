import{g as f,o as c,l as C,w as D,a as _,n as g,h as l,m as p,t as M,v as R,c as h,b as u,I as V,E as O,J as A,s as N,d as P,F as S,r as Y,x as I,K as W,u as j,L as q}from"./entry.3c426d59.js";import{P as z}from"./PageHeading.a3405d24.js";import{a as E,_ as J,b as K}from"./CreateEvent.vue.247afc1a.js";import{_ as T,a as G}from"./TagSelecter.vue.9504b94b.js";import{r as v,t as m,a as $,g as Q,f as U,e as H}from"./index.f3feb017.js";import{u as B}from"./eventStore.efb7706c.js";import{i as X,s as F}from"./index.0bcc0cb9.js";import{a as Z}from"./index.6e1b1773.js";import{_ as ee}from"./Background.vue.4145edfb.js";import"./Tag.59fa2b7b.js";import"./Dialog.vue.24f220d6.js";import"./FABButton.vue.7f56f62b.js";import"./InputAlt.vue.eeed0fbb.js";function te(n){v(1,arguments);var e=n||{},t=m(e.start),a=m(e.end),r=a.getTime(),s=[];if(!(t.getTime()<=r))throw new RangeError("Invalid interval");var o=t;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=r;)s.push(m(o)),o.setMonth(o.getMonth()+1);return s}function ae(n){v(1,arguments);var e=m(n);return e.setDate(1),e.setHours(0,0,0,0),e}function se(n){v(1,arguments);var e=m(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function ne(n){v(1,arguments);var e=m(n),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function re(n){v(1,arguments);var e=m(n),t=e.getFullYear(),a=e.getMonth(),r=new Date(0);return r.setFullYear(t,a+1,0),r.setHours(0,0,0,0),r.getDate()}function oe(n){v(1,arguments);var e=m(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function le(n,e){v(2,arguments);var t=m(n),a=m(e);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function ie(n,e){var t,a,r,s,o,d,i,b;v(1,arguments);var k=Q(),w=$((t=(a=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:k.weekStartsOn)!==null&&a!==void 0?a:(i=k.locale)===null||i===void 0||(b=i.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&t!==void 0?t:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var y=m(n),x=y.getDay(),L=(x<w?-7:0)+6-(x-w);return y.setHours(0,0,0,0),y.setDate(y.getDate()+L),y}function de(n,e){v(2,arguments);var t=m(n),a=$(e),r=t.getFullYear(),s=t.getDate(),o=new Date(0);o.setFullYear(r,a,15),o.setHours(0,0,0,0);var d=re(o);return t.setMonth(a,Math.min(s,d)),t}function ce(n,e){v(2,arguments);var t=m(n),a=$(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(a),t)}const ue=["onClick"],me=f({__name:"MonthSelect",props:{month:{}},emits:["update:month"],setup(n,{emit:e}){const t=n,a=te({start:ne(new Date),end:se(new Date)}).map(s=>({text:U(s,"MMMM"),value:s.getMonth().toString()})),r=s=>e("update:month",Number(s));return(s,o)=>(c(),C(T,{options:l(a),value:t.month.toString(),"onUpdate:value":r},{option:D(({option:d,onSelect:i,selected:b})=>[_("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("bg-base-300")),onClick:i},[_("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("py-2","font-semibold","bg-base-200","hover:bg-base-300","mx-auto","w-40","drop-shadow-xl","border-0","text-center"))},M(d.text),3)],10,ue)]),_:1},8,["options","value"]))}}),ge=["onClick"],pe=f({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(n,{emit:e}){const t=n,a=R.range(1970,2100).map(s=>({text:s.toString(),value:s.toString()})),r=s=>e("update:year",Number(s));return(s,o)=>(c(),C(T,{options:l(a),value:t.year.toString(),"onUpdate:value":r},{option:D(({option:d,onSelect:i,selected:b})=>[_("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("bg-base-300")),onClick:i},[_("div",{class:g(("mergeClasses"in s?s.mergeClasses:l(p))("py-2","font-semibold","bg-base-200","hover:bg-base-300","mx-auto","w-20","drop-shadow-xl","border-0","text-center"))},M(d.text),3)],10,ge)]),_:1},8,["options","value"]))}}),fe=f({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(n,{emit:e}){const t=n,a=()=>e("nextMonth"),r=()=>e("previousMonth"),s=d=>e("selectMonth",d),o=d=>e("selectYear",d);return(d,i)=>(c(),h("div",{class:g(("mergeClasses"in d?d.mergeClasses:l(p))("px-4","flex","items-center","justify-between"))},[u(O,{icon:l(V),onClick:r,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),u(me,{month:t.date.getMonth(),"onUpdate:month":s,class:"!w-fit"},null,8,["month"]),u(pe,{year:t.date.getFullYear(),"onUpdate:year":o,class:"!w-fit"},null,8,["year"]),u(O,{icon:l(A),onClick:a,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),ve={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},he=f({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(n){const e=n,t=B(),a=N(()=>t.getEventsOfDay(e.day).filter(r=>(e.tagFilter??-1)<0||r.tagId===e.tagFilter).length);return(r,s)=>{const o=O;return c(),C(o,{class:g(("mergeClasses"in r?r.mergeClasses:l(p))("btn-circle",l(le)(e.day,e.date)?void 0:"opacity-50",l(X)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:D(()=>[P(M(r.day.getDate())+" ",1),_("div",ve,M(".".repeat(Math.min(3,l(a)))),1)]),_:1},8,["class"])}}}),_e={class:"text-base font-medium text-center"},be=f({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(n,{emit:e}){const t=n,a=H({start:F(t.date,{weekStartsOn:1}),end:Z(F(t.date,{weekStartsOn:1}),6)}).map(o=>U(o,"EEE")),r=N(()=>H({start:F(ae(t.date),{weekStartsOn:1}),end:ie(oe(t.date),{weekStartsOn:1})})),s=o=>e("selectDate",o);return(o,d)=>(c(),h("div",{class:g(("mergeClasses"in o?o.mergeClasses:l(p))("grid","grid-cols-7","gap-y-1"))},[(c(!0),h(S,null,Y(l(a),i=>(c(),h("div",_e,M(i),1))),256)),(c(!0),h(S,null,Y(l(r),i=>(c(),C(he,{key:"day-"+i,day:i,date:t.date,"tag-filter":t.tagFilter,onClick:()=>s(i)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),ye=f({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(n,{emit:e}){const t=n,a=()=>e("update:date",E(t.date,-1)),r=()=>e("update:date",E(t.date,1)),s=i=>e("update:date",de(t.date,i)),o=i=>e("update:date",ce(t.date,i)),d=i=>e("update:date",i);return(i,b)=>(c(),h("div",null,[u(fe,{date:t.date,onPreviousMonth:a,onNextMonth:r,onSelectMonth:s,onSelectYear:o,class:"px-4"},null,8,["date"]),u(be,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:d},null,8,["date","tag-filter"])]))}}),Me=f({__name:"Calendar",props:{tagFilter:{}},setup(n){const e=n,t=I(new Date);return(a,r)=>(c(),h("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("relative","max-w-md","md:max-w-full"))},[_("div",{class:g(("mergeClasses"in a?a.mergeClasses:l(p))("card","shadow-xl","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[u(ye,{date:l(t),"onUpdate:date":r[0]||(r[0]=s=>W(t)?t.value=s:null),"tag-filter":e.tagFilter,class:g(("mergeClasses"in a?a.mergeClasses:l(p))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),u(J,{day:l(t),"tag-filter":e.tagFilter,class:g(("mergeClasses"in a?a.mergeClasses:l(p))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),u(K)],2))}}),Ce=f({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(n,{emit:e}){const t=n,r=B().tagArray,s=o=>e("update:selected",o);return(o,d)=>(c(),C(G,{tags:l(r),selected:t.selected,label:"Filter by Tag","onUpdate:selected":s,clearable:""},null,8,["tags","selected"]))}}),we={class:"flex flex-col items-center gap-2"},De=f({__name:"EventsVue",setup(n){const e=I(-1);return(t,a)=>(c(),h("div",we,[u(Ce,{selected:l(e),"onUpdate:selected":a[0]||(a[0]=r=>e.value=r)},null,8,["selected"]),u(Me,{"tag-filter":l(e),class:"w-full"},null,8,["tag-filter"])]))}}),Fe=_("span",null,"Events",-1),Le=f({__name:"index",setup(n){return j({title:"Events"}),(e,t)=>(c(),h("div",null,[u(z,null,{default:D(()=>[Fe]),_:1}),u(ee,{icon:l(q)},null,8,["icon"]),u(De)]))}});export{Le as default};
