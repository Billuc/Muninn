import{g as b,r as f,o as _,c as h,j as s,i as N,x as B,b as c,q as C,n as U,y as M,z as S,s as T,v as V,l as D,F as j,m as z,a as v,t as y,h as A,w as x,A as F,d as E,B as O,C as q}from"./entry.cfc6213b.js";import{u as $}from"./todoStore.6357f93e.js";import{_ as P}from"./MultilineInput.vue.1abd0998.js";import{a as g,b as R,_ as W}from"./TextInput.vue.698585fb.js";const Y=["checked"],G=b({__name:"Checkbox",props:{value:{type:Boolean}},emits:["input"],setup(d,{expose:o,emit:l}){const t=d;var e=f(null);function a(r){l("input",r.target.checked)}return o({reset:()=>{e.value.checked=t.value}}),(r,p)=>(_(),h("input",{type:"checkbox",class:"checkbox",checked:s(t).value,onInput:a,ref_key:"checkbox",ref:e},null,40,Y))}}),L=b({__name:"Todo",props:{todo:{}},emits:["update:title","update:done"],setup(d,{emit:o}){const l=d,{todo:t}=N(l),e=f(null),a=f(null),i=n=>{var u;o("update:done",n),(u=a.value)==null||u.reset()},r=n=>{var u;o("update:title",n),(u=e.value)==null||u.resetContent()},p=B.debounce(r,2e3),m=n=>{r(n),p.cancel()};return(n,u)=>(_(),h("div",{class:C(("mergeClasses"in n?n.mergeClasses:s(T))("m-0","flex","flex-nowrap","gap-x-2"))},[c(G,{value:s(t).done,onInput:i,class:"checkbox-secondary",ref_key:"checkbox",ref:a},null,8,["value"]),c(P,{value:s(t).title,placeholder:"Write here...",ref_key:"input",ref:e,onInput:s(p),class:C({"w-full":!0,"line-through":s(t).done}),"detect-enter":"",onEnter:m},null,8,["value","onInput","class"]),s(t).id>=0?(_(),U(g,{key:0,icon:s(M),class:"btn-circle !btn-xs",onClick:u[0]||(u[0]=k=>m(""))},null,8,["icon"])):S("",!0)],2))}}),H=b({__name:"TodoList",props:{showChecked:{type:Boolean},listId:{}},setup(d){const o=d,{showChecked:l}=N(o),t=$(),{getList:e}=V(t),a=f(e.value(o.listId)),i=D(()=>B.pickBy(a.value.todos,n=>!n.done||l.value)),r={id:-1,done:!1,title:""};function p(n,u,k){u?t.editTodo(o.listId,n,u,k):t.removeTodo(o.listId,n)}function m(n){n&&t.newTodo(o.listId,n)}return(n,u)=>(_(),h("div",{class:C(("mergeClasses"in n?n.mergeClasses:s(T))("flex","flex-col","flex-nowrap","gap-y-2"))},[(_(!0),h(j,null,z(s(i),(k,I)=>(_(),U(L,{todo:k,"onUpdate:title":w=>p(Number(I),w,k.done),"onUpdate:done":w=>p(Number(I),k.title,w)},null,8,["todo","onUpdate:title","onUpdate:done"]))),256)),c(L,{todo:r,"onUpdate:title":m})],2))}}),J={class:"form-control"},K={class:"cursor-pointer label"},Q=["checked"],X=b({__name:"Toggle",props:{toggleClass:{},labelClass:{},label:{},value:{type:Boolean}},emits:["input"],setup(d,{emit:o}){const l=d;function t(e){o("input",e.target.checked)}return(e,a)=>(_(),h("div",J,[v("label",K,[v("span",{class:C(("mergeClasses"in e?e.mergeClasses:s(T))("label-text","mr-2",l.labelClass))},y(l.label),3),v("input",{type:"checkbox",class:C(("mergeClasses"in e?e.mergeClasses:s(T))("toggle",l.toggleClass)),checked:l.value,onInput:t},null,42,Q)])]))}}),Z={class:"inline-block"},ee=b({__name:"DeleteTodoList",props:{todolist:{}},setup(d){const o=d,l=$(),t=A(),e=f(!1),a=()=>e.value=!0,i=()=>e.value=!1;function r(){l.removeList(o.todolist.id),t.push({path:"/todos"}),i()}return(p,m)=>(_(),h("div",Z,[c(g,{icon:s(F),onClick:a,class:"text-error btn-ghost"},null,8,["icon"]),c(R,{"is-opened":s(e),onClose:i},{title:x(()=>[E('Are you sure you want to remove todolist "'+y(o.todolist.title)+'" ?',1)]),actions:x(()=>[c(g,{class:"btn-error",label:"No",onClick:i}),c(g,{class:"btn-success ml-2",label:"Yes",onClick:r})]),_:1},8,["is-opened"])]))}}),se={class:"inline-block"},te=b({__name:"EditTodoList",props:{todolist:{}},setup(d){const o=d,l=$(),t=f(!1),e=f(o.todolist.title),a=()=>t.value=!0,i=()=>t.value=!1,r=m=>e.value=m;function p(){l.editList(o.todolist.id,e.value),i()}return(m,n)=>(_(),h("div",se,[c(g,{icon:s(O),onClick:a,class:"text-info btn-ghost"},null,8,["icon"]),c(R,{"is-opened":s(t),onClose:i},{title:x(()=>[E('Edit todolist "'+y(o.todolist.title)+'"',1)]),default:x(()=>[v("div",null,[c(W,{label:"Todolist name",value:s(e),placeholder:"Enter name...","input-class":"input-secondary",onInput:r},null,8,["value"])])]),actions:x(()=>[c(g,{class:"btn-success",label:"Save",onClick:p})]),_:1},8,["is-opened"])]))}}),oe={class:"prose mx-auto"},ne={class:"text-center text-secondary-focus mb-0 mr-2"},le={class:"inline-block ml-2"},de=b({__name:"index",setup(d){const o=q(),l=$(),t=Number(o.params.id),e=l.getList(t),a=f(!1);return(i,r)=>{const p=H;return _(),h("div",oe,[v("div",{class:C(("mergeClasses"in i?i.mergeClasses:s(T))("flex","flex-wrap","justify-center","items-center","mb-6"))},[v("h1",ne,y(s(e).title),1),v("div",le,[c(te,{todolist:s(e)},null,8,["todolist"]),c(ee,{todolist:s(e)},null,8,["todolist"])])],2),c(X,{label:"Show checked",value:s(a),onInput:r[0]||(r[0]=m=>a.value=m),"toggle-class":"toggle-secondary",class:"w-fit my-4"},null,8,["value"]),c(p,{"show-checked":s(a),"list-id":s(t)},null,8,["show-checked","list-id"])])}}});export{de as default};
