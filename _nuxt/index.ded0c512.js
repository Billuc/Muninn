import{g as p,o as u,i as y,j as l,x as A,l as L,c as f,b as c,Q as P,K as b,R as W,q as v,s as _,h as T,w as F,d as I,t as C,a as O,F as Y,n as k,r as E,z as j,u as q,S as z}from"./entry.fdeab8e2.js";import{P as K}from"./PageHeading.bc1d6c96.js";import{a as N,_ as Q,b as G}from"./CreateEvent.vue.24111230.js";import{e as B}from"./SelectField.vue.2b791b6b.js";import{r as g,t as m,a as S,g as J,f as U,e as H}from"./index.504780f4.js";import{u as R}from"./eventStore.e7e86ec9.js";import{i as X,s as w}from"./index.ff624e87.js";import{a as Z}from"./index.5054022f.js";import{_ as ee}from"./TagSelecter.vue.3494ce3c.js";import{_ as te}from"./Background.vue.2dca8cfa.js";import"./InputField.vue.bc217c63.js";import"./FABButton.vue.20dd3cf1.js";function ae(s){g(1,arguments);var e=s||{},t=m(e.start),o=m(e.end),a=o.getTime(),r=[];if(!(t.getTime()<=a))throw new RangeError("Invalid interval");var n=t;for(n.setHours(0,0,0,0),n.setDate(1);n.getTime()<=a;)r.push(m(n)),n.setMonth(n.getMonth()+1);return r}function se(s){g(1,arguments);var e=m(s);return e.setDate(1),e.setHours(0,0,0,0),e}function ne(s){g(1,arguments);var e=m(s),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function re(s){g(1,arguments);var e=m(s),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function oe(s){g(1,arguments);var e=m(s),t=e.getFullYear(),o=e.getMonth(),a=new Date(0);return a.setFullYear(t,o+1,0),a.setHours(0,0,0,0),a.getDate()}function le(s){g(1,arguments);var e=m(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function de(s,e){g(2,arguments);var t=m(s),o=m(e);return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()}function ie(s,e){var t,o,a,r,n,i,d,M;g(1,arguments);var x=J(),D=S((t=(o=(a=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(n=e.locale)===null||n===void 0||(i=n.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&a!==void 0?a:x.weekStartsOn)!==null&&o!==void 0?o:(d=x.locale)===null||d===void 0||(M=d.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&t!==void 0?t:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var h=m(s),$=h.getDay(),V=($<D?-7:0)+6-($-D);return h.setHours(0,0,0,0),h.setDate(h.getDate()+V),h}function ce(s,e){g(2,arguments);var t=m(s),o=S(e),a=t.getFullYear(),r=t.getDate(),n=new Date(0);n.setFullYear(a,o,15),n.setHours(0,0,0,0);var i=oe(n);return t.setMonth(o,Math.min(r,i)),t}function ue(s,e){g(2,arguments);var t=m(s),o=S(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(o),t)}const me=p({__name:"MonthSelect",props:{month:{}},emits:["update:month"],setup(s,{emit:e}){const t=s,o=ae({start:re(new Date),end:ne(new Date)}).map(r=>({text:U(r,"MMMM"),value:r.getMonth().toString()})),a=r=>e("update:month",Number(r));return(r,n)=>(u(),y(B,{options:l(o),value:t.month.toString(),"label-class":"font-semibold","onUpdate:value":a},null,8,["options","value"]))}}),pe=p({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(s,{emit:e}){const t=s,o=A.range(1970,2100).map(r=>({text:r.toString(),value:r.toString()})),a=r=>e("update:year",Number(r));return L(()=>{const r=document.getElementsByClassName("selected")[0];r==null||r.scrollIntoView()}),(r,n)=>(u(),y(B,{options:l(o),value:t.year.toString(),"label-class":"font-semibold","onUpdate:value":a},null,8,["options","value"]))}}),ge=p({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(s,{emit:e}){const t=s,o=()=>e("nextMonth"),a=()=>e("previousMonth"),r=i=>e("selectMonth",i),n=i=>e("selectYear",i);return(i,d)=>(u(),f("div",{class:v(("mergeClasses"in i?i.mergeClasses:l(_))("px-4","flex","items-center","justify-between"))},[c(b,{icon:l(P),onClick:a,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),c(me,{month:t.date.getMonth(),"onUpdate:month":r,class:"!w-fit"},null,8,["month"]),c(pe,{year:t.date.getFullYear(),"onUpdate:year":n,class:"!w-fit"},null,8,["year"]),c(b,{icon:l(W),onClick:o,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),fe={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},ve=p({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(s){const e=s,t=R(),o=T(()=>t.getEventsOfDay(e.day).filter(a=>!e.tagFilter||a.tagId===e.tagFilter).length);return(a,r)=>{const n=b;return u(),y(n,{class:v(("mergeClasses"in a?a.mergeClasses:l(_))("btn-circle",l(de)(e.day,e.date)?void 0:"opacity-50",l(X)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:F(()=>[I(C(a.day.getDate())+" ",1),O("div",fe,C(".".repeat(Math.min(3,l(o)))),1)]),_:1},8,["class"])}}}),_e={class:"text-base font-medium text-center"},he=p({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(s,{emit:e}){const t=s,o=H({start:w(t.date,{weekStartsOn:1}),end:Z(w(t.date,{weekStartsOn:1}),6)}).map(n=>U(n,"EEE")),a=T(()=>H({start:w(se(t.date),{weekStartsOn:1}),end:ie(le(t.date),{weekStartsOn:1})})),r=n=>e("selectDate",n);return(n,i)=>(u(),f("div",{class:v(("mergeClasses"in n?n.mergeClasses:l(_))("grid","grid-cols-7","gap-y-1"))},[(u(!0),f(Y,null,k(l(o),d=>(u(),f("div",_e,C(d),1))),256)),(u(!0),f(Y,null,k(l(a),d=>(u(),y(ve,{key:"day-"+d,day:d,date:t.date,"tag-filter":t.tagFilter,onClick:()=>r(d)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),ye=p({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(s,{emit:e}){const t=s,o=()=>e("update:date",N(t.date,-1)),a=()=>e("update:date",N(t.date,1)),r=d=>e("update:date",ce(t.date,d)),n=d=>e("update:date",ue(t.date,d)),i=d=>e("update:date",d);return(d,M)=>(u(),f("div",null,[c(ge,{date:t.date,onPreviousMonth:o,onNextMonth:a,onSelectMonth:r,onSelectYear:n,class:"px-4"},null,8,["date"]),c(he,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:i},null,8,["date","tag-filter"])]))}}),Me=p({__name:"Calendar",props:{tagFilter:{},date:{}},emits:["update:date"],setup(s,{emit:e}){const t=s,o=a=>e("update:date",a);return(a,r)=>(u(),f("div",{class:v(("mergeClasses"in a?a.mergeClasses:l(_))("relative","max-w-md","md:max-w-full"))},[O("div",{class:v(("mergeClasses"in a?a.mergeClasses:l(_))("card","shadow-xl","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[c(ye,{date:t.date,"tag-filter":t.tagFilter,"onUpdate:date":o,class:v(("mergeClasses"in a?a.mergeClasses:l(_))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),c(Q,{day:t.date,"tag-filter":t.tagFilter,class:v(("mergeClasses"in a?a.mergeClasses:l(_))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),c(G)],2))}}),De=p({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(s,{emit:e}){const t=s,a=R().tagArray,r=n=>e("update:selected",n);return(n,i)=>(u(),y(ee,{tags:l(a),selected:t.selected,label:"Filter by Tag","onUpdate:selected":r,clearable:""},null,8,["tags","selected"]))}}),be={class:"flex flex-col items-center gap-2"},we=p({__name:"EventsVue",setup(s){const e=E(""),t=E(new Date);return(o,a)=>{const r=b;return u(),f("div",be,[c(De,{selected:l(e),"onUpdate:selected":a[0]||(a[0]=n=>e.value=n)},null,8,["selected"]),c(r,{onClick:a[1]||(a[1]=n=>t.value=new Date),class:"btn-primary btn-outline"},{default:F(()=>[I(" Today ")]),_:1}),c(Me,{"tag-filter":l(e),date:l(t),"onUpdate:date":a[2]||(a[2]=n=>j(t)?t.value=n:null),class:"w-full mt-2"},null,8,["tag-filter","date"])])}}}),Ce=O("span",null,"Events",-1),Be=p({__name:"index",setup(s){return q({title:"Events"}),(e,t)=>(u(),f("div",null,[c(K,null,{default:F(()=>[Ce]),_:1}),c(te,{icon:l(z)},null,8,["icon"]),c(we)]))}});export{Be as default};
