import{g as y,R as Q,r as M,S as X,o as m,c as D,b as i,j as u,K as Z,w as S,d as Y,v as $,A as F,i as x,x as ee,l as te,T as ae,U as ne,n as O,m as C,h as T,t as N,a as I,M as R,N as q,u as se,V as re}from"./entry.0233ebe9.js";import{P as le,_ as oe}from"./PageHeading.d5dd8b90.js";import{f as V,_ as ue,p as de,a as ie,b as A,c as ce}from"./CalendarEvents.vue.bd5751c6.js";import{_ as ve}from"./FABButton.vue.b363ae16.js";import{c as me}from"./InputField.vue.138e6c1a.js";import{u as B,F as L}from"./eventStore.526c15db.js";import{e as W}from"./Tag.94ca284d.js";import{r as w,t as E,a as f,g as j,f as z,e as P}from"./index.b79af48e.js";import{i as K}from"./index.362febfb.js";import{a as pe}from"./index.6f6f0be5.js";import{_ as fe}from"./TagSelecter.vue.e8d2a010.js";import"./v4.4a60fe23.js";function H(l,e){var t,s,a,n,r,o,d,p;w(1,arguments);var _=j(),c=E((t=(s=(a=(n=e==null?void 0:e.weekStartsOn)!==null&&n!==void 0?n:e==null||(r=e.locale)===null||r===void 0||(o=r.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:_.weekStartsOn)!==null&&s!==void 0?s:(d=_.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&t!==void 0?t:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=f(l),b=g.getDay(),k=(b<c?7:0)+b-c;return g.setDate(g.getDate()-k),g.setHours(0,0,0,0),g}function ge(l){w(1,arguments);var e=l||{},t=f(e.start),s=f(e.end),a=s.getTime(),n=[];if(!(t.getTime()<=a))throw new RangeError("Invalid interval");var r=t;for(r.setHours(0,0,0,0),r.setDate(1);r.getTime()<=a;)n.push(f(r)),r.setMonth(r.getMonth()+1);return n}function _e(l){w(1,arguments);var e=f(l);return e.setDate(1),e.setHours(0,0,0,0),e}function he(l){w(1,arguments);var e=f(l),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function ye(l){w(1,arguments);var e=f(l),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function we(l){w(1,arguments);var e=f(l),t=e.getFullYear(),s=e.getMonth(),a=new Date(0);return a.setFullYear(t,s+1,0),a.setHours(0,0,0,0),a.getDate()}function Me(l){w(1,arguments);var e=f(l),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function De(l,e){w(2,arguments);var t=f(l),s=f(e);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()}function be(l,e){var t,s,a,n,r,o,d,p;w(1,arguments);var _=j(),c=E((t=(s=(a=(n=e==null?void 0:e.weekStartsOn)!==null&&n!==void 0?n:e==null||(r=e.locale)===null||r===void 0||(o=r.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:_.weekStartsOn)!==null&&s!==void 0?s:(d=_.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&t!==void 0?t:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var g=f(l),b=g.getDay(),k=(b<c?-7:0)+6-(b-c);return g.setHours(0,0,0,0),g.setDate(g.getDate()+k),g}function Oe(l,e){w(2,arguments);var t=f(l),s=E(e),a=t.getFullYear(),n=t.getDate(),r=new Date(0);r.setFullYear(a,s,15),r.setHours(0,0,0,0);var o=we(r);return t.setMonth(s,Math.min(n,o)),t}function Ce(l,e){w(2,arguments);var t=f(l),s=E(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(s),t)}const $e=y({__name:"CreateEvent",props:{date:{}},setup(l){const e=l,t=B(),{date:s}=Q(e),a=M(!1),n=M(null),r=M(""),o=M(V((s==null?void 0:s.value)??new Date)),d=M([new Date().getHours()+1,0]),p=M([1,0]),_=M(L.Once),c=M(""),g=()=>a.value=!0,b=()=>a.value=!1,k=()=>{var v;if(!((v=n.value)!=null&&v.validate()))return;const U=de(o.value,d.value);t.newEvent({title:r.value,frequency:_.value,start:U,end:ie(U,p.value),tagId:c.value}),b(),G()},G=()=>{r.value="",o.value="",d.value=[void 0,void 0],p.value=[1,0],_.value=L.Once,c.value=""};return X([s],()=>{o.value=V((s==null?void 0:s.value)??new Date)}),(U,v)=>{const J=F;return m(),D("div",null,[i(ve,{icon:u(Z),class:"-bottom-4 right-4",onClick:g},null,8,["icon"]),i(me,{"is-opened":u(a),onClose:b},{title:S(()=>[Y("Create a new event")]),default:S(()=>[i(ue,{title:u(r),"onUpdate:title":v[0]||(v[0]=h=>$(r)?r.value=h:null),date:u(o),"onUpdate:date":v[1]||(v[1]=h=>$(o)?o.value=h:null),time:u(d),"onUpdate:time":v[2]||(v[2]=h=>$(d)?d.value=h:null),duration:u(p),"onUpdate:duration":v[3]||(v[3]=h=>$(p)?p.value=h:null),frequency:u(_),"onUpdate:frequency":v[4]||(v[4]=h=>$(_)?_.value=h:null),"tag-id":u(c),"onUpdate:tagId":v[5]||(v[5]=h=>$(c)?c.value=h:null),ref_key:"form",ref:n},null,8,["title","date","time","duration","frequency","tag-id"])]),actions:S(()=>[i(J,{class:"btn-success",onClick:k},{default:S(()=>[Y("Create")]),_:1})]),_:1},8,["is-opened"])])}}}),Se=y({__name:"MonthSelect",props:{month:{}},emits:["update:month"],setup(l,{emit:e}){const t=l,s=ge({start:ye(new Date),end:he(new Date)}).map(n=>({text:z(n,"MMMM"),value:n.getMonth().toString()})),a=n=>e("update:month",Number(n));return(n,r)=>(m(),x(W,{options:u(s),value:t.month.toString(),"label-class":"font-semibold","onUpdate:value":a},null,8,["options","value"]))}}),ke=y({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(l,{emit:e}){const t=l,s=ee.range(1970,2100).map(n=>({text:n.toString(),value:n.toString()})),a=n=>e("update:year",Number(n));return te(()=>{const n=document.getElementsByClassName("selected")[0];n==null||n.scrollIntoView()}),(n,r)=>(m(),x(W,{options:u(s),value:t.year.toString(),"label-class":"font-semibold","onUpdate:value":a},null,8,["options","value"]))}}),Fe=y({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(l,{emit:e}){const t=l,s=()=>e("nextMonth"),a=()=>e("previousMonth"),n=o=>e("selectMonth",o),r=o=>e("selectYear",o);return(o,d)=>(m(),D("div",{class:O(("mergeClasses"in o?o.mergeClasses:u(C))("px-4","flex","items-center","justify-between"))},[i(F,{icon:u(ae),onClick:a,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),i(Se,{month:t.date.getMonth(),"onUpdate:month":n,class:"!w-fit"},null,8,["month"]),i(ke,{year:t.date.getFullYear(),"onUpdate:year":r,class:"!w-fit"},null,8,["year"]),i(F,{icon:u(ne),onClick:s,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),xe={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},Ye=y({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(l){const e=l,t=B(),s=T(()=>t.getEventsOfDay(e.day).filter(a=>!e.tagFilter||a.tagId===e.tagFilter).length);return(a,n)=>{const r=F;return m(),x(r,{class:O(("mergeClasses"in a?a.mergeClasses:u(C))("btn-circle",u(De)(e.day,e.date)?void 0:"opacity-50",u(K)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:S(()=>[Y(N(a.day.getDate())+" ",1),I("div",xe,N(".".repeat(Math.min(3,u(s)))),1)]),_:1},8,["class"])}}}),Ee={class:"text-base font-medium text-center"},Ue=y({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(l,{emit:e}){const t=l,s=P({start:H(t.date,{weekStartsOn:1}),end:pe(H(t.date,{weekStartsOn:1}),6)}).map(r=>z(r,"EEE")),a=T(()=>P({start:H(_e(t.date),{weekStartsOn:1}),end:be(Me(t.date),{weekStartsOn:1})})),n=r=>e("selectDate",r);return(r,o)=>(m(),D("div",{class:O(("mergeClasses"in r?r.mergeClasses:u(C))("grid","grid-cols-7","gap-y-1"))},[(m(!0),D(R,null,q(u(s),d=>(m(),D("div",Ee,N(d),1))),256)),(m(!0),D(R,null,q(u(a),d=>(m(),x(Ye,{key:"day-"+d,day:d,date:t.date,"tag-filter":t.tagFilter,onClick:()=>n(d)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),He=y({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(l,{emit:e}){const t=l,s=()=>e("update:date",A(t.date,-1)),a=()=>e("update:date",A(t.date,1)),n=d=>e("update:date",Oe(t.date,d)),r=d=>e("update:date",Ce(t.date,d)),o=d=>e("update:date",d);return(d,p)=>(m(),D("div",null,[i(Fe,{date:t.date,onPreviousMonth:s,onNextMonth:a,onSelectMonth:n,onSelectYear:r,class:"px-4"},null,8,["date"]),i(Ue,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:o},null,8,["date","tag-filter"])]))}}),Ne=y({__name:"Calendar",props:{tagFilter:{},date:{}},emits:["update:date"],setup(l,{emit:e}){const t=l,s=a=>e("update:date",a);return(a,n)=>(m(),D("div",{class:O(("mergeClasses"in a?a.mergeClasses:u(C))("relative","max-w-md","md:max-w-full"))},[I("div",{class:O(("mergeClasses"in a?a.mergeClasses:u(C))("card","shadow-xl","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[i(He,{date:t.date,"tag-filter":t.tagFilter,"onUpdate:date":s,class:O(("mergeClasses"in a?a.mergeClasses:u(C))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),i(ce,{day:t.date,"tag-filter":t.tagFilter,class:O(("mergeClasses"in a?a.mergeClasses:u(C))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),i($e,{date:t.date},null,8,["date"])],2))}}),Te=y({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(l,{emit:e}){const t=l,a=B().tagArray,n=r=>e("update:selected",r);return(r,o)=>(m(),x(fe,{tags:u(a),selected:t.selected,label:"Filter by Tag","onUpdate:selected":n,clearable:""},null,8,["tags","selected"]))}}),Ie={class:"flex flex-col items-center gap-2"},Be=y({__name:"EventsVue",setup(l){const e=M(""),t=M(new Date),s=T(()=>K(t.value,new Date));return(a,n)=>{const r=F;return m(),D("div",Ie,[i(r,{onClick:n[0]||(n[0]=o=>t.value=new Date),class:O(("mergeClasses"in a?a.mergeClasses:u(C))("btn-primary","btn-outline",u(s)?"btn-active":void 0))},{default:S(()=>[Y(" Today ")]),_:1},8,["class"]),i(Te,{selected:u(e),"onUpdate:selected":n[1]||(n[1]=o=>e.value=o)},null,8,["selected"]),i(Ne,{"tag-filter":u(e),date:u(t),"onUpdate:date":n[2]||(n[2]=o=>$(t)?t.value=o:null),class:"w-full mt-2"},null,8,["tag-filter","date"])])}}}),Re=I("span",null,"Events",-1),Xe=y({__name:"index",setup(l){return se({title:"Events"}),(e,t)=>(m(),D("div",null,[i(le,null,{default:S(()=>[Re]),_:1}),i(oe,{icon:u(re)},null,8,["icon"]),i(Be)]))}});export{Xe as default};
