import{g as p,o as u,q as w,w as C,a as b,n as f,h as l,m as v,t as M,v as A,j as L,c as _,b as c,O as P,K as x,P as W,l as T,d as I,F as S,r as Y,x as E,z as j,u as q,Q as z}from"./entry.b18e108e.js";import{P as K}from"./PageHeading.5f531ff8.js";import{a as N,_ as Q,b as G}from"./CreateEvent.vue.19686f28.js";import{d as B}from"./SelectField.vue.8068d51c.js";import{r as g,t as m,a as O,g as J,f as U,e as H}from"./index.504780f4.js";import{u as V}from"./eventStore.dc245862.js";import{i as X,s as F}from"./index.ff624e87.js";import{a as Z}from"./index.5054022f.js";import{_ as ee}from"./TagSelecter.vue.2418b4c1.js";import{_ as te}from"./Background.vue.49b08bed.js";import"./InputField.vue.4dc7ceed.js";import"./FABButton.vue.fb96622b.js";function ae(n){g(1,arguments);var e=n||{},t=m(e.start),o=m(e.end),a=o.getTime(),s=[];if(!(t.getTime()<=a))throw new RangeError("Invalid interval");var r=t;for(r.setHours(0,0,0,0),r.setDate(1);r.getTime()<=a;)s.push(m(r)),r.setMonth(r.getMonth()+1);return s}function se(n){g(1,arguments);var e=m(n);return e.setDate(1),e.setHours(0,0,0,0),e}function ne(n){g(1,arguments);var e=m(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function re(n){g(1,arguments);var e=m(n),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function oe(n){g(1,arguments);var e=m(n),t=e.getFullYear(),o=e.getMonth(),a=new Date(0);return a.setFullYear(t,o+1,0),a.setHours(0,0,0,0),a.getDate()}function le(n){g(1,arguments);var e=m(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function de(n,e){g(2,arguments);var t=m(n),o=m(e);return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()}function ie(n,e){var t,o,a,s,r,i,d,h;g(1,arguments);var $=J(),D=O((t=(o=(a=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(r=e.locale)===null||r===void 0||(i=r.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&a!==void 0?a:$.weekStartsOn)!==null&&o!==void 0?o:(d=$.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var y=m(n),k=y.getDay(),R=(k<D?-7:0)+6-(k-D);return y.setHours(0,0,0,0),y.setDate(y.getDate()+R),y}function ce(n,e){g(2,arguments);var t=m(n),o=O(e),a=t.getFullYear(),s=t.getDate(),r=new Date(0);r.setFullYear(a,o,15),r.setHours(0,0,0,0);var i=oe(r);return t.setMonth(o,Math.min(s,i)),t}function ue(n,e){g(2,arguments);var t=m(n),o=O(e);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(o),t)}const me=["onClick"],pe=p({__name:"MonthSelect",props:{month:{}},emits:["update:month"],setup(n,{emit:e}){const t=n,o=ae({start:re(new Date),end:ne(new Date)}).map(s=>({text:U(s,"MMMM"),value:s.getMonth().toString()})),a=s=>e("update:month",Number(s));return(s,r)=>(u(),w(B,{options:l(o),value:t.month.toString(),"label-class":"font-semibold","onUpdate:value":a},{option:C(({option:i,onSelect:d,selected:h})=>[b("div",{onClick:d},[b("div",{class:f(("mergeClasses"in s?s.mergeClasses:l(v))("py-2","font-semibold","bg-base-100","hover:bg-base-300","mx-auto","w-40","drop-shadow-xl","border-0","text-center","rounded-box","mb-1"))},M(i.text),3)],8,me)]),_:1},8,["options","value"]))}}),ge=["onClick"],fe=p({__name:"YearSelect",props:{year:{}},emits:["update:year"],setup(n,{emit:e}){const t=n,o=A.range(1970,2100).map(s=>({text:s.toString(),value:s.toString()})),a=s=>e("update:year",Number(s));return L(()=>{const s=document.getElementsByClassName("selected")[0];s==null||s.scrollIntoView()}),(s,r)=>(u(),w(B,{options:l(o),value:t.year.toString(),"label-class":"font-semibold","onUpdate:value":a},{option:C(({option:i,onSelect:d,selected:h})=>[b("div",{onClick:d},[b("div",{class:f(("mergeClasses"in s?s.mergeClasses:l(v))("py-2","font-semibold","bg-base-100","hover:bg-base-300","mx-auto","w-20","drop-shadow-xl","border-0","text-center","rounded-box","mb-1",h?"selected":void 0))},M(i.text),3)],8,ge)]),_:1},8,["options","value"]))}}),ve=p({__name:"CalendarHeader",props:{date:{}},emits:["nextMonth","previousMonth","selectMonth","selectYear"],setup(n,{emit:e}){const t=n,o=()=>e("nextMonth"),a=()=>e("previousMonth"),s=i=>e("selectMonth",i),r=i=>e("selectYear",i);return(i,d)=>(u(),_("div",{class:f(("mergeClasses"in i?i.mergeClasses:l(v))("px-4","flex","items-center","justify-between"))},[c(x,{icon:l(P),onClick:a,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"]),c(pe,{month:t.date.getMonth(),"onUpdate:month":s,class:"!w-fit"},null,8,["month"]),c(fe,{year:t.date.getFullYear(),"onUpdate:year":r,class:"!w-fit"},null,8,["year"]),c(x,{icon:l(W),onClick:o,class:"btn-circle btn-ghost btn-xs"},null,8,["icon"])],2))}}),_e={class:"absolute left-1/2 bottom-[2px] -translate-x-1/2"},he=p({__name:"CalendarDayButton",props:{day:{},date:{},tagFilter:{}},setup(n){const e=n,t=V(),o=T(()=>t.getEventsOfDay(e.day).filter(a=>(e.tagFilter??-1)<0||a.tagId===e.tagFilter).length);return(a,s)=>{const r=x;return u(),w(r,{class:f(("mergeClasses"in a?a.mergeClasses:l(v))("btn-circle",l(de)(e.day,e.date)?void 0:"opacity-50",l(X)(e.day,e.date)?"btn-primary":"btn-ghost","relative"))},{default:C(()=>[I(M(a.day.getDate())+" ",1),b("div",_e,M(".".repeat(Math.min(3,l(o)))),1)]),_:1},8,["class"])}}}),be={class:"text-base font-medium text-center"},ye=p({__name:"CalendarMonthView",props:{date:{},tagFilter:{}},emits:["selectDate"],setup(n,{emit:e}){const t=n,o=H({start:F(t.date,{weekStartsOn:1}),end:Z(F(t.date,{weekStartsOn:1}),6)}).map(r=>U(r,"EEE")),a=T(()=>H({start:F(se(t.date),{weekStartsOn:1}),end:ie(le(t.date),{weekStartsOn:1})})),s=r=>e("selectDate",r);return(r,i)=>(u(),_("div",{class:f(("mergeClasses"in r?r.mergeClasses:l(v))("grid","grid-cols-7","gap-y-1"))},[(u(!0),_(S,null,Y(l(o),d=>(u(),_("div",be,M(d),1))),256)),(u(!0),_(S,null,Y(l(a),d=>(u(),w(he,{key:"day-"+d,day:d,date:t.date,"tag-filter":t.tagFilter,onClick:()=>s(d)},null,8,["day","date","tag-filter","onClick"]))),128))],2))}}),Me=p({__name:"CalendarCard",props:{date:{},tagFilter:{}},emits:["update:date"],setup(n,{emit:e}){const t=n,o=()=>e("update:date",N(t.date,-1)),a=()=>e("update:date",N(t.date,1)),s=d=>e("update:date",ce(t.date,d)),r=d=>e("update:date",ue(t.date,d)),i=d=>e("update:date",d);return(d,h)=>(u(),_("div",null,[c(ve,{date:t.date,onPreviousMonth:o,onNextMonth:a,onSelectMonth:s,onSelectYear:r,class:"px-4"},null,8,["date"]),c(ye,{date:t.date,"tag-filter":t.tagFilter,class:"pt-4",onSelectDate:i},null,8,["date","tag-filter"])]))}}),we=p({__name:"Calendar",props:{tagFilter:{},date:{}},emits:["update:date"],setup(n,{emit:e}){const t=n,o=a=>e("update:date",a);return(a,s)=>(u(),_("div",{class:f(("mergeClasses"in a?a.mergeClasses:l(v))("relative","max-w-md","md:max-w-full"))},[b("div",{class:f(("mergeClasses"in a?a.mergeClasses:l(v))("card","shadow-xl","grid","grid-cols-1","md:grid-cols-5","p-2","bg-base-300"))},[c(Me,{date:t.date,"tag-filter":t.tagFilter,"onUpdate:date":o,class:f(("mergeClasses"in a?a.mergeClasses:l(v))("px-4","py-4","bg-base-100","md:col-span-3","rounded-box"))},null,8,["date","tag-filter","class"]),c(Q,{day:t.date,"tag-filter":t.tagFilter,class:f(("mergeClasses"in a?a.mergeClasses:l(v))("md:col-span-2","rounded-box"))},null,8,["day","tag-filter","class"])],2),c(G)],2))}}),Ce=p({__name:"EventTagFilter",props:{selected:{}},emits:["update:selected"],setup(n,{emit:e}){const t=n,a=V().tagArray,s=r=>e("update:selected",r);return(r,i)=>(u(),w(ee,{tags:l(a),selected:t.selected,label:"Filter by Tag","onUpdate:selected":s,clearable:""},null,8,["tags","selected"]))}}),De={class:"flex flex-col items-center gap-2"},xe=p({__name:"EventsVue",setup(n){const e=E(-1),t=E(new Date);return(o,a)=>{const s=x;return u(),_("div",De,[c(Ce,{selected:l(e),"onUpdate:selected":a[0]||(a[0]=r=>e.value=r)},null,8,["selected"]),c(s,{onClick:a[1]||(a[1]=r=>t.value=new Date),class:"btn-primary btn-outline"},{default:C(()=>[I(" Today ")]),_:1}),c(we,{"tag-filter":l(e),date:l(t),"onUpdate:date":a[2]||(a[2]=r=>j(t)?t.value=r:null),class:"w-full mt-2"},null,8,["tag-filter","date"])])}}}),Fe=b("span",null,"Events",-1),Ve=p({__name:"index",setup(n){return q({title:"Events"}),(e,t)=>(u(),_("div",null,[c(K,null,{default:C(()=>[Fe]),_:1}),c(te,{icon:l(z)},null,8,["icon"]),c(xe)]))}});export{Ve as default};
