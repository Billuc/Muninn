import{f as y}from"./index.f3feb017.js";import{g as _,c as l,a as E,t as w,h as p,o as c,v as g,b as m,x,T as b,R as I,s as k,F as M,r as J,l as A}from"./entry.3c426d59.js";import{d as B}from"./PageHeading.a3405d24.js";import{_ as $}from"./MultilineField.vue.32485d71.js";const N={class:"text-secondary text-xl font-bold leading-4"},S={class:"text-secondary text-2xl font-extrabold"},P=_({__name:"DateDisplay",props:{date:{}},setup(t){const n=t;return(e,r)=>(c(),l("div",null,[E("h3",N,w(p(y)(n.date,"MMM d")),1),E("h2",S,w(p(y)(n.date,"EEEE")),1)]))}}),d=t=>y(t,"yyyy-MM-dd"),U=B("journal",{state:()=>({entries:new Map}),actions:{getEntries(t){return this.entries.get(d(t))},newEntry(t,n){const e=d(t);this.entries.has(e)||this.entries.set(e,[]),this.entries.get(e).push(n)},editEntry(t,n,e){const r=this.entries.get(d(t));if(!r)throw new Error(`[Journal] Key ${t} not found`);if(r[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);r.splice(n,1,e)},removeEntry(t,n){const e=this.entries.get(d(t));if(!e)throw new Error(`[Journal] Key ${t} not found`);if(e[n]===void 0)throw new Error(`[Journal] Index ${n} out of range for key ${t}`);e.splice(n,1)}}}),D={class:"m-0"},K=_({__name:"Entry",props:{entry:{}},emits:["update:entry"],setup(t,{emit:n}){const e=t,r=s=>n("update:entry",s.trim()),a=g.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",D,[m($,{value:e.entry,placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i},null,8,["value","onInput"])]))}}),F={class:"m-0"},L=_({__name:"AddEntry",emits:["input"],setup(t,{emit:n}){const e=x(null),r=s=>{n("input",s.trim()),b(()=>{e.value.reset()})},a=g.debounce(r,2e3),i=s=>{r(s),a.cancel()};return(s,o)=>(c(),l("li",F,[m($,{value:"",placeholder:"Write here...",onInput:p(a),class:"w-full","detect-enter":"",onEnter:i,ref_key:"input",ref:e},null,8,["onInput"])]))}}),R={class:"list-disc marker:text-base-300 pl-8"},V=_({__name:"EntryList",props:{date:{}},setup(t){const n=t,{date:e}=I(n),r=U(),a=k(()=>r.getEntries(e.value));function i(o,u){u?r.editEntry(e.value,o,u):r.removeEntry(e.value,o)}function s(o){o&&r.newEntry(e.value,o)}return(o,u)=>(c(),l("ul",R,[(c(!0),l(M,null,J(p(a),(f,h)=>(c(),A(K,{entry:f,"onUpdate:entry":v=>i(h,v),key:`entry-${h}`},null,8,["entry","onUpdate:entry"]))),128)),m(L,{onInput:u[0]||(u[0]=f=>s(f))})]))}});export{V as _,P as a};
